{"numTotalTestSuites":377,"numPassedTestSuites":377,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":771,"numPassedTests":769,"numFailedTests":0,"numPendingTests":2,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1766117611026,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso PASO 1: Debe iniciar enrollment y retornar challenge WebAuthn","status":"passed","title":"PASO 1: Debe iniciar enrollment y retornar challenge WebAuthn","duration":3.751201000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso PASO 2: Debe finalizar enrollment y registrar dispositivo","status":"passed","title":"PASO 2: Debe finalizar enrollment y registrar dispositivo","duration":1.1088950000000182,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso PASO 3: Debe generar session_key único durante enrollment","status":"passed","title":"PASO 3: Debe generar session_key único durante enrollment","duration":0.9189639999999883,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso ERROR: Debe lanzar error cuando falla la verificación de WebAuthn (catch block)","status":"passed","title":"ERROR: Debe lanzar error cuando falla la verificación de WebAuthn (catch block)","duration":1.460238000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso ERROR: Debe lanzar error cuando verified=false","status":"passed","title":"ERROR: Debe lanzar error cuando verified=false","duration":0.7357259999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso ERROR: Debe lanzar CHALLENGE_NOT_FOUND cuando no existe challenge","status":"passed","title":"ERROR: Debe lanzar CHALLENGE_NOT_FOUND cuando no existe challenge","duration":1.9859830000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso ERROR: Debe lanzar CHALLENGE_EXPIRED cuando el challenge ha expirado","status":"passed","title":"ERROR: Debe lanzar CHALLENGE_EXPIRED cuando el challenge ha expirado","duration":0.6122569999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso ERROR: Debe manejar error sin message (Unknown error)","status":"passed","title":"ERROR: Debe manejar error sin message (Unknown error)","duration":0.5799199999999871,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso ERROR: Debe lanzar error cuando AAGUID no está autorizado","status":"passed","title":"ERROR: Debe lanzar error cuando AAGUID no está autorizado","duration":0.5825570000000084,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Login ECDH Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Login ECDH Exitoso PASO 1: Debe establecer sesión con ECDH key exchange","status":"passed","title":"PASO 1: Debe establecer sesión con ECDH key exchange","duration":0.8595359999999914,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Login ECDH Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Login ECDH Exitoso PASO 2: Debe guardar nueva session_key en cada login","status":"passed","title":"PASO 2: Debe guardar nueva session_key en cada login","duration":0.5675150000000144,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Login ECDH Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Login ECDH Exitoso PASO 3: Debe generar diferentes session_keys en logins consecutivos","status":"passed","title":"PASO 3: Debe generar diferentes session_keys en logins consecutivos","duration":0.7162840000000017,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Login ECDH Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Login ECDH Exitoso PASO 4: Debe fallar login con credentialId incorrecto","status":"passed","title":"PASO 4: Debe fallar login con credentialId incorrecto","duration":0.5671559999999829,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Login ECDH Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Login ECDH Exitoso PASO 5: Debe fallar login si el dispositivo fue revocado","status":"passed","title":"PASO 5: Debe fallar login si el dispositivo fue revocado","duration":0.5071750000000179,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Validaciones de Seguridad"],"fullName":"Flujo Completo: Enrollment + Login Validaciones de Seguridad Debe rechazar login de dispositivo de otro usuario","status":"passed","title":"Debe rechazar login de dispositivo de otro usuario","duration":1.766258999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Validaciones de Seguridad"],"fullName":"Flujo Completo: Enrollment + Login Validaciones de Seguridad Debe manejar correctamente userId como string (BUG-002)","status":"passed","title":"Debe manejar correctamente userId como string (BUG-002)","duration":0.5166010000000085,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Start Enrollment con dispositivos existentes (excludeCredentials)"],"fullName":"Flujo Completo: Enrollment + Login Start Enrollment con dispositivos existentes (excludeCredentials) Debe incluir dispositivos existentes en excludeCredentials para evitar re-registro","status":"passed","title":"Debe incluir dispositivos existentes en excludeCredentials para evitar re-registro","duration":1.8725750000000119,"failureMessages":[],"meta":{}}],"startTime":1766117611216,"endTime":1766117611234.8726,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/__tests__/enrollment-login-flow.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState returns BLOCKED when user has active restrictions","status":"passed","title":"returns BLOCKED when user has active restrictions","duration":2.288268000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState returns NOT_ENROLLED when user has no active device (REQUIRES_ENROLLMENT)","status":"passed","title":"returns NOT_ENROLLED when user has no active device (REQUIRES_ENROLLMENT)","duration":0.49575699999999756,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState returns NOT_ENROLLED with message when user violates 1:1 policy (REQUIRES_REENROLLMENT)","status":"passed","title":"returns NOT_ENROLLED with message when user violates 1:1 policy (REQUIRES_REENROLLMENT)","duration":0.505825999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState returns ENROLLED_NO_SESSION when user has device but no session (ACCESS_GRANTED)","status":"passed","title":"returns ENROLLED_NO_SESSION when user has device but no session (ACCESS_GRANTED)","duration":0.5348240000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState returns READY when user has active session (ACCESS_GRANTED + session)","status":"passed","title":"returns READY when user has active session (ACCESS_GRANTED + session)","duration":0.3901209999999935,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState passes deviceFingerprint to orchestrator for 1:1 validation","status":"passed","title":"passes deviceFingerprint to orchestrator for 1:1 validation","duration":0.226397999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState includes device info when ACCESS_GRANTED","status":"passed","title":"includes device info when ACCESS_GRANTED","duration":0.2543840000000017,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState does not include message when state is not BLOCKED","status":"passed","title":"does not include message when state is not BLOCKED","duration":0.18559199999999976,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","idempotence"],"fullName":"AccessGatewayService idempotence returns same result for same user state","status":"passed","title":"returns same result for same user state","duration":0.2514749999999992,"failureMessages":[],"meta":{}}],"startTime":1766117615957,"endTime":1766117615962.2515,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/access/__tests__/access-gateway.service.test.ts"},{"assertionResults":[{"ancestorTitles":["AccessStateController","Validaciones de entrada"],"fullName":"AccessStateController Validaciones de entrada debería retornar 401 si no hay usuario autenticado","status":"passed","title":"debería retornar 401 si no hay usuario autenticado","duration":2.2238729999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Validaciones de entrada"],"fullName":"AccessStateController Validaciones de entrada debería retornar 400 si falta deviceFingerprint","status":"passed","title":"debería retornar 400 si falta deviceFingerprint","duration":0.3792720000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Validaciones de entrada"],"fullName":"AccessStateController Validaciones de entrada debería retornar 400 si deviceFingerprint es undefined","status":"passed","title":"debería retornar 400 si deviceFingerprint es undefined","duration":0.3010540000000077,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Casos de éxito - estados del sistema"],"fullName":"AccessStateController Casos de éxito - estados del sistema debería retornar estado BLOCKED si usuario está bloqueado","status":"passed","title":"debería retornar estado BLOCKED si usuario está bloqueado","duration":0.39747799999999245,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Casos de éxito - estados del sistema"],"fullName":"AccessStateController Casos de éxito - estados del sistema debería retornar estado NOT_ENROLLED con action=enroll","status":"passed","title":"debería retornar estado NOT_ENROLLED con action=enroll","duration":0.29930899999999383,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Casos de éxito - estados del sistema"],"fullName":"AccessStateController Casos de éxito - estados del sistema debería retornar estado ENROLLED_NO_SESSION con action=login y device","status":"passed","title":"debería retornar estado ENROLLED_NO_SESSION con action=login y device","duration":0.27660399999999186,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Casos de éxito - estados del sistema"],"fullName":"AccessStateController Casos de éxito - estados del sistema debería retornar estado READY con action=scan y device","status":"passed","title":"debería retornar estado READY con action=scan y device","duration":0.2734389999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Casos de éxito - estados del sistema"],"fullName":"AccessStateController Casos de éxito - estados del sistema debería retornar estado NOT_ENROLLED con mensaje de re-enrollment","status":"passed","title":"debería retornar estado NOT_ENROLLED con mensaje de re-enrollment","duration":0.26967100000000244,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Manejo de errores internos"],"fullName":"AccessStateController Manejo de errores internos debería retornar 500 si el servicio lanza error","status":"passed","title":"debería retornar 500 si el servicio lanza error","duration":3.2661659999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Manejo de errores internos"],"fullName":"AccessStateController Manejo de errores internos debería retornar 500 si el servicio lanza error genérico","status":"passed","title":"debería retornar 500 si el servicio lanza error genérico","duration":0.503532000000007,"failureMessages":[],"meta":{}}],"startTime":1766117617168,"endTime":1766117617176.5034,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/access/__tests__/access-state.controller.test.ts"},{"assertionResults":[{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt()"],"fullName":"AttendancePersistenceService saveValidationAttempt() debería crear y completar una nueva validación","status":"passed","title":"debería crear y completar una nueva validación","duration":3.0392789999999934,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt()"],"fullName":"AttendancePersistenceService saveValidationAttempt() debería completar una validación existente (sin crear nueva)","status":"passed","title":"debería completar una validación existente (sin crear nueva)","duration":0.567181000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt()"],"fullName":"AttendancePersistenceService saveValidationAttempt() NO debería fallar si sessionId no es numérico","status":"passed","title":"NO debería fallar si sessionId no es numérico","duration":1.1266580000000062,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt()"],"fullName":"AttendancePersistenceService saveValidationAttempt() NO debería fallar si no existe registración","status":"passed","title":"NO debería fallar si no existe registración","duration":0.3928360000000026,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult()"],"fullName":"AttendancePersistenceService saveAttendanceResult() debería guardar resultado PRESENT con certeza alta","status":"passed","title":"debería guardar resultado PRESENT con certeza alta","duration":0.486463999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult()"],"fullName":"AttendancePersistenceService saveAttendanceResult() debería guardar resultado DOUBTFUL con certeza media","status":"passed","title":"debería guardar resultado DOUBTFUL con certeza media","duration":0.35644599999999116,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult()"],"fullName":"AttendancePersistenceService saveAttendanceResult() debería guardar resultado ABSENT con certeza baja","status":"passed","title":"debería guardar resultado ABSENT con certeza baja","duration":0.36061300000000074,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult()"],"fullName":"AttendancePersistenceService saveAttendanceResult() NO debería duplicar resultado si ya existe (idempotencia)","status":"passed","title":"NO debería duplicar resultado si ya existe (idempotencia)","duration":0.30389099999999303,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult()"],"fullName":"AttendancePersistenceService saveAttendanceResult() debería usar estadísticas reales desde validation_attempts","status":"passed","title":"debería usar estadísticas reales desde validation_attempts","duration":0.35221599999999853,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","markRegistrationComplete()"],"fullName":"AttendancePersistenceService markRegistrationComplete() debería marcar registración como completada","status":"passed","title":"debería marcar registración como completada","duration":0.5016880000000015,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","markRegistrationComplete()"],"fullName":"AttendancePersistenceService markRegistrationComplete() NO debería fallar si no existe registración","status":"passed","title":"NO debería fallar si no existe registración","duration":1.3200879999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveCompleteAttendance() - operación atómica"],"fullName":"AttendancePersistenceService saveCompleteAttendance() - operación atómica debería guardar validación + resultado + marcar completado","status":"passed","title":"debería guardar validación + resultado + marcar completado","duration":0.4459190000000035,"failureMessages":[],"meta":{}}],"startTime":1766117613266,"endTime":1766117613275.4458,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/attendance-persistence.service.test.ts"},{"assertionResults":[{"ancestorTitles":["CompleteScanUseCase","execute() - Validación fallida"],"fullName":"CompleteScanUseCase execute() - Validación fallida debería retornar error si la validación falla por QR_NOT_FOUND","status":"passed","title":"debería retornar error si la validación falla por QR_NOT_FOUND","duration":1.581940000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Validación fallida"],"fullName":"CompleteScanUseCase execute() - Validación fallida debería retornar error si el QR ya fue consumido","status":"passed","title":"debería retornar error si el QR ya fue consumido","duration":0.3530659999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Validación fallida"],"fullName":"CompleteScanUseCase execute() - Validación fallida debería retornar error si el usuario no coincide (USER_MISMATCH)","status":"passed","title":"debería retornar error si el usuario no coincide (USER_MISMATCH)","duration":0.359296999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Validación exitosa pero falla markQRConsumed"],"fullName":"CompleteScanUseCase execute() - Validación exitosa pero falla markQRConsumed debería retornar error si markQRConsumed falla","status":"passed","title":"debería retornar error si markQRConsumed falla","duration":0.3684609999999964,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Validación exitosa pero falla markQRConsumed"],"fullName":"CompleteScanUseCase execute() - Validación exitosa pero falla markQRConsumed debería retornar error si markQRConsumed lanza excepción","status":"passed","title":"debería retornar error si markQRConsumed lanza excepción","duration":3.338014000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Validación exitosa pero falla completeRound"],"fullName":"CompleteScanUseCase execute() - Validación exitosa pero falla completeRound debería retornar error si completeRound falla","status":"passed","title":"debería retornar error si completeRound falla","duration":0.6679239999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Round parcial (no completó todos)"],"fullName":"CompleteScanUseCase execute() - Round parcial (no completó todos) debería retornar nextRound si completó round 1 de 3","status":"passed","title":"debería retornar nextRound si completó round 1 de 3","duration":2.676460000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Round parcial (no completó todos)"],"fullName":"CompleteScanUseCase execute() - Round parcial (no completó todos) debería retornar error parcial si falla generateAndPublish","status":"passed","title":"debería retornar error parcial si falla generateAndPublish","duration":0.46007099999999923,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Asistencia completada (todos los rounds)"],"fullName":"CompleteScanUseCase execute() - Asistencia completada (todos los rounds) debería calcular stats y retornar isComplete=true","status":"passed","title":"debería calcular stats y retornar isComplete=true","duration":0.5375399999999786,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","Persistencia opcional"],"fullName":"CompleteScanUseCase Persistencia opcional NO debería fallar si persistenceService no está configurado","status":"passed","title":"NO debería fallar si persistenceService no está configurado","duration":0.2600970000000018,"failureMessages":[],"meta":{}}],"startTime":1766117614007,"endTime":1766117614018.26,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/complete-scan.usecase.test.ts"},{"assertionResults":[{"ancestorTitles":["RegistrationRepository","create()"],"fullName":"RegistrationRepository create() debería crear una registración con queue_position auto-calculado (primer estudiante)","status":"passed","title":"debería crear una registración con queue_position auto-calculado (primer estudiante)","duration":3.574362999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","create()"],"fullName":"RegistrationRepository create() debería crear una registración con queue_position auto-calculado (segundo estudiante)","status":"passed","title":"debería crear una registración con queue_position auto-calculado (segundo estudiante)","duration":0.2142300000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","create()"],"fullName":"RegistrationRepository create() debería crear registración con queue_position 5 cuando hay 4 estudiantes","status":"passed","title":"debería crear registración con queue_position 5 cuando hay 4 estudiantes","duration":0.19199300000001074,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","getById()"],"fullName":"RegistrationRepository getById() debería retornar una registración por ID","status":"passed","title":"debería retornar una registración por ID","duration":0.44819999999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","getById()"],"fullName":"RegistrationRepository getById() debería retornar null si no existe la registración","status":"passed","title":"debería retornar null si no existe la registración","duration":0.1814810000000051,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","getBySessionAndUser()"],"fullName":"RegistrationRepository getBySessionAndUser() debería retornar registración por sessionId y userId","status":"passed","title":"debería retornar registración por sessionId y userId","duration":0.2988080000000082,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","getBySessionAndUser()"],"fullName":"RegistrationRepository getBySessionAndUser() debería retornar null si no existe registración para esa combinación","status":"passed","title":"debería retornar null si no existe registración para esa combinación","duration":0.17089099999999746,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","updateStatus()"],"fullName":"RegistrationRepository updateStatus() debería actualizar el status a \"completed\"","status":"passed","title":"debería actualizar el status a \"completed\"","duration":0.3001600000000053,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","updateStatus()"],"fullName":"RegistrationRepository updateStatus() debería actualizar el status a \"cancelled\"","status":"passed","title":"debería actualizar el status a \"cancelled\"","duration":0.18183700000000158,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","updateStatus()"],"fullName":"RegistrationRepository updateStatus() debería retornar null si la registración no existe","status":"passed","title":"debería retornar null si la registración no existe","duration":0.15263399999999194,"failureMessages":[],"meta":{}}],"startTime":1766117616714,"endTime":1766117616720.1526,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/registration.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["ResultRepository","create()"],"fullName":"ResultRepository create() debería crear un resultado PRESENT con todas las métricas","status":"passed","title":"debería crear un resultado PRESENT con todas las métricas","duration":2.8323210000000074,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","create()"],"fullName":"ResultRepository create() debería crear un resultado DOUBTFUL con métricas parciales","status":"passed","title":"debería crear un resultado DOUBTFUL con métricas parciales","duration":0.2830810000000099,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","create()"],"fullName":"ResultRepository create() debería crear un resultado ABSENT","status":"passed","title":"debería crear un resultado ABSENT","duration":0.21122599999998215,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","create()"],"fullName":"ResultRepository create() debería crear un resultado ERROR","status":"passed","title":"debería crear un resultado ERROR","duration":0.1335730000000126,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","getByRegistration()"],"fullName":"ResultRepository getByRegistration() debería obtener resultado por registrationId","status":"passed","title":"debería obtener resultado por registrationId","duration":0.31718000000000757,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","getByRegistration()"],"fullName":"ResultRepository getByRegistration() debería retornar null si no existe resultado","status":"passed","title":"debería retornar null si no existe resultado","duration":0.1284559999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","listBySession()"],"fullName":"ResultRepository listBySession() debería listar todos los resultados de una sesión","status":"passed","title":"debería listar todos los resultados de una sesión","duration":0.606788999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","listBySession()"],"fullName":"ResultRepository listBySession() debería retornar array vacío si no hay resultados","status":"passed","title":"debería retornar array vacío si no hay resultados","duration":0.13802999999998633,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","countByStatus()"],"fullName":"ResultRepository countByStatus() debería contar resultados por estado final","status":"skipped","title":"debería contar resultados por estado final","failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","countByStatus()"],"fullName":"ResultRepository countByStatus() debería retornar contadores en 0 si no hay resultados","status":"skipped","title":"debería retornar contadores en 0 si no hay resultados","failureMessages":[],"meta":{}}],"startTime":1766117614182,"endTime":1766117614187.138,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/result.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["SessionRepository","create()"],"fullName":"SessionRepository create() debería crear una sesión con maxRounds default 3","status":"passed","title":"debería crear una sesión con maxRounds default 3","duration":2.7000109999999893,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","create()"],"fullName":"SessionRepository create() debería crear una sesión con maxRounds personalizado","status":"passed","title":"debería crear una sesión con maxRounds personalizado","duration":0.36464599999999336,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","getById()"],"fullName":"SessionRepository getById() debería retornar una sesión por ID","status":"passed","title":"debería retornar una sesión por ID","duration":0.3168929999999932,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","getById()"],"fullName":"SessionRepository getById() debería retornar null si no existe la sesión","status":"passed","title":"debería retornar null si no existe la sesión","duration":0.13023000000001161,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","getActiveByProfessor()"],"fullName":"SessionRepository getActiveByProfessor() debería retornar sesiones activas del profesor","status":"passed","title":"debería retornar sesiones activas del profesor","duration":0.29054199999998787,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","getActiveByProfessor()"],"fullName":"SessionRepository getActiveByProfessor() debería retornar null si no hay sesiones activas","status":"passed","title":"debería retornar null si no hay sesiones activas","duration":0.11978899999999726,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","getActiveByRoom()"],"fullName":"SessionRepository getActiveByRoom() debería retornar sesiones activas en una sala","status":"passed","title":"debería retornar sesiones activas en una sala","duration":0.2964510000000189,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","getActiveByRoom()"],"fullName":"SessionRepository getActiveByRoom() debería retornar null si no hay sesiones en la sala","status":"passed","title":"debería retornar null si no hay sesiones en la sala","duration":0.1184599999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","update()"],"fullName":"SessionRepository update() debería actualizar el status de una sesión","status":"passed","title":"debería actualizar el status de una sesión","duration":0.2762740000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","update()"],"fullName":"SessionRepository update() debería retornar null si la sesión no existe","status":"passed","title":"debería retornar null si la sesión no existe","duration":0.12035000000000196,"failureMessages":[],"meta":{}}],"startTime":1766117616302,"endTime":1766117616307.2764,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/session.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["validateStructureStage"],"fullName":"validateStructureStage debe pasar con estructura valida","status":"passed","title":"debe pasar con estructura valida","duration":0.8781609999999915,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStructureStage"],"fullName":"validateStructureStage debe fallar sin response","status":"passed","title":"debe fallar sin response","duration":0.14299800000000573,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStructureStage"],"fullName":"validateStructureStage debe fallar con version incorrecta","status":"passed","title":"debe fallar con version incorrecta","duration":0.14277900000000443,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStructureStage"],"fullName":"validateStructureStage debe fallar con nonce de longitud incorrecta","status":"passed","title":"debe fallar con nonce de longitud incorrecta","duration":0.10011099999998407,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateOwnershipStage"],"fullName":"validateOwnershipStage debe pasar cuando studentId coincide","status":"passed","title":"debe pasar cuando studentId coincide","duration":0.1204169999999749,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateOwnershipStage"],"fullName":"validateOwnershipStage debe fallar cuando studentId no coincide","status":"passed","title":"debe fallar cuando studentId no coincide","duration":0.11727799999999888,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateQRNotExpiredStage"],"fullName":"validateQRNotExpiredStage debe pasar con QR existente","status":"passed","title":"debe pasar con QR existente","duration":0.12737899999999058,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateQRNotExpiredStage"],"fullName":"validateQRNotExpiredStage debe fallar con QR inexistente","status":"passed","title":"debe fallar con QR inexistente","duration":0.10923199999999156,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateQRNotConsumedStage"],"fullName":"validateQRNotConsumedStage debe pasar con QR no consumido","status":"passed","title":"debe pasar con QR no consumido","duration":0.12133599999998523,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateQRNotConsumedStage"],"fullName":"validateQRNotConsumedStage debe fallar con QR consumido","status":"passed","title":"debe fallar con QR consumido","duration":0.11451700000000642,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentRegisteredStage"],"fullName":"validateStudentRegisteredStage debe pasar con estudiante registrado","status":"passed","title":"debe pasar con estudiante registrado","duration":0.11434499999998593,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentRegisteredStage"],"fullName":"validateStudentRegisteredStage debe fallar con estudiante no registrado","status":"passed","title":"debe fallar con estudiante no registrado","duration":0.11167000000000371,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentActiveStage"],"fullName":"validateStudentActiveStage debe pasar con status active","status":"passed","title":"debe pasar con status active","duration":0.10863100000000259,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentActiveStage"],"fullName":"validateStudentActiveStage debe fallar con status completed","status":"passed","title":"debe fallar con status completed","duration":0.11663500000000226,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentActiveStage"],"fullName":"validateStudentActiveStage debe fallar con status failed","status":"passed","title":"debe fallar con status failed","duration":0.17193000000000325,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentOwnsQRStage"],"fullName":"validateStudentOwnsQRStage debe pasar cuando nonce coincide","status":"passed","title":"debe pasar cuando nonce coincide","duration":0.12837299999998208,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentOwnsQRStage"],"fullName":"validateStudentOwnsQRStage debe fallar cuando nonce no coincide","status":"passed","title":"debe fallar cuando nonce no coincide","duration":0.11107000000001221,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateRoundMatchStage"],"fullName":"validateRoundMatchStage debe pasar cuando round coincide","status":"passed","title":"debe pasar cuando round coincide","duration":0.11951799999999935,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateRoundMatchStage"],"fullName":"validateRoundMatchStage debe fallar cuando round ya fue completado","status":"passed","title":"debe fallar cuando round ya fue completado","duration":0.11524500000001581,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateRoundMatchStage"],"fullName":"validateRoundMatchStage debe fallar cuando round no ha sido alcanzado","status":"passed","title":"debe fallar cuando round no ha sido alcanzado","duration":0.10596400000000017,"failureMessages":[],"meta":{}}],"startTime":1766117617741,"endTime":1766117617745.1196,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/stages.test.ts"},{"assertionResults":[{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe pasar con TOTPu valido","status":"passed","title":"debe pasar con TOTPu valido","duration":3.0108359999999976,"failureMessages":[],"meta":{}},{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe fallar sin response desencriptada","status":"passed","title":"debe fallar sin response desencriptada","duration":0.19639100000000553,"failureMessages":[],"meta":{}},{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe fallar cuando falta TOTPu en el payload","status":"passed","title":"debe fallar cuando falta TOTPu en el payload","duration":0.16342000000000212,"failureMessages":[],"meta":{}},{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe fallar cuando session_key no existe en Valkey","status":"passed","title":"debe fallar cuando session_key no existe en Valkey","duration":0.17606100000000424,"failureMessages":[],"meta":{}},{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe fallar con TOTPu incorrecto","status":"passed","title":"debe fallar con TOTPu incorrecto","duration":0.3788509999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe validarse correctamente con diferentes session_keys","status":"passed","title":"debe validarse correctamente con diferentes session_keys","duration":0.5131080000000026,"failureMessages":[],"meta":{}},{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe rechazar TOTPu de otra sesion_key","status":"passed","title":"debe rechazar TOTPu de otra sesion_key","duration":0.28438400000000286,"failureMessages":[],"meta":{}}],"startTime":1766117617467,"endTime":1766117617472.2844,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/totp-validation.stage.test.ts"},{"assertionResults":[{"ancestorTitles":["ValidationRepository","create()"],"fullName":"ValidationRepository create() debería crear una validación con QR generado (estado inicial)","status":"passed","title":"debería crear una validación con QR generado (estado inicial)","duration":2.7014139999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","create()"],"fullName":"ValidationRepository create() debería crear validaciones para múltiples rounds","status":"passed","title":"debería crear validaciones para múltiples rounds","duration":0.269551000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","complete()"],"fullName":"ValidationRepository complete() debería completar una validación exitosa","status":"passed","title":"debería completar una validación exitosa","duration":0.5744929999999897,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","complete()"],"fullName":"ValidationRepository complete() debería completar una validación fallida","status":"passed","title":"debería completar una validación fallida","duration":0.1781440000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","complete()"],"fullName":"ValidationRepository complete() debería completar una validación con timeout","status":"passed","title":"debería completar una validación con timeout","duration":0.13874500000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","complete()"],"fullName":"ValidationRepository complete() debería retornar null si no existe la validación","status":"passed","title":"debería retornar null si no existe la validación","duration":0.12221900000000119,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","incrementFailedAttempts()"],"fullName":"ValidationRepository incrementFailedAttempts() debería incrementar contador de intentos fallidos","status":"passed","title":"debería incrementar contador de intentos fallidos","duration":0.23093800000000897,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","incrementFailedAttempts()"],"fullName":"ValidationRepository incrementFailedAttempts() debería retornar 0 si no existe la validación","status":"passed","title":"debería retornar 0 si no existe la validación","duration":0.13170900000000074,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","incrementFailedAttempts()"],"fullName":"ValidationRepository incrementFailedAttempts() debería incrementar múltiples veces","status":"passed","title":"debería incrementar múltiples veces","duration":0.16751099999999042,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","getByRound()"],"fullName":"ValidationRepository getByRound() debería obtener una validación por registrationId y round","status":"passed","title":"debería obtener una validación por registrationId y round","duration":0.22834100000000035,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","getByRound()"],"fullName":"ValidationRepository getByRound() debería retornar null si no existe la validación","status":"passed","title":"debería retornar null si no existe la validación","duration":0.1135020000000111,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","getResponseTimeStats()"],"fullName":"ValidationRepository getResponseTimeStats() debería calcular estadísticas de tiempo de respuesta","status":"passed","title":"debería calcular estadísticas de tiempo de respuesta","duration":0.24225899999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","getResponseTimeStats()"],"fullName":"ValidationRepository getResponseTimeStats() debería retornar valores null si no hay validaciones exitosas","status":"passed","title":"debería retornar valores null si no hay validaciones exitosas","duration":0.14934800000000337,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","countSuccessful()"],"fullName":"ValidationRepository countSuccessful() debería contar validaciones exitosas","status":"passed","title":"debería contar validaciones exitosas","duration":0.2003559999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","countSuccessful()"],"fullName":"ValidationRepository countSuccessful() debería retornar 0 si no hay validaciones exitosas","status":"passed","title":"debería retornar 0 si no hay validaciones exitosas","duration":0.11894699999999148,"failureMessages":[],"meta":{}}],"startTime":1766117612663,"endTime":1766117612669.119,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/validation.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe autenticar correctamente con header válido","status":"passed","title":"debe autenticar correctamente con header válido","duration":2.9771280000000218,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe autenticar estudiante correctamente","status":"passed","title":"debe autenticar estudiante correctamente","duration":0.3913729999999873,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe fallar sin header Authorization","status":"passed","title":"debe fallar sin header Authorization","duration":0.5778370000000166,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe fallar con header malformado","status":"passed","title":"debe fallar con header malformado","duration":0.13028399999998896,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe fallar con token inválido","status":"passed","title":"debe fallar con token inválido","duration":0.16755799999998544,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe fallar con token expirado","status":"passed","title":"debe fallar con token expirado","duration":0.32615200000000755,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe crear UserId válido desde payload","status":"passed","title":"debe crear UserId válido desde payload","duration":0.3551530000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe preservar caracteres especiales en nombreCompleto","status":"passed","title":"debe preservar caracteres especiales en nombreCompleto","duration":0.2234899999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","verifyToken"],"fullName":"AuthService verifyToken debe verificar token válido directamente","status":"passed","title":"debe verificar token válido directamente","duration":0.3104849999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","verifyToken"],"fullName":"AuthService verifyToken debe fallar con token inválido","status":"passed","title":"debe fallar con token inválido","duration":0.24267399999999384,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","verifyToken"],"fullName":"AuthService verifyToken debe fallar con token expirado","status":"passed","title":"debe fallar con token expirado","duration":0.2789060000000063,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","verifyToken"],"fullName":"AuthService verifyToken debe fallar con token firmado con otra secret","status":"passed","title":"debe fallar con token firmado con otra secret","duration":0.25737600000002203,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","mapToAuthenticatedUser"],"fullName":"AuthService mapToAuthenticatedUser debe mapear payload completo correctamente","status":"passed","title":"debe mapear payload completo correctamente","duration":0.3377240000000086,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","mapToAuthenticatedUser"],"fullName":"AuthService mapToAuthenticatedUser debe crear UserId como Value Object","status":"passed","title":"debe crear UserId como Value Object","duration":0.25335800000001996,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","integración authenticateFromHeader vs verifyToken"],"fullName":"AuthService integración authenticateFromHeader vs verifyToken debe producir mismo resultado con ambos métodos","status":"passed","title":"debe producir mismo resultado con ambos métodos","duration":0.302582000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","edge cases"],"fullName":"AuthService edge cases debe manejar userId = 1 correctamente","status":"passed","title":"debe manejar userId = 1 correctamente","duration":0.2162320000000193,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","edge cases"],"fullName":"AuthService edge cases debe manejar números grandes en userId","status":"passed","title":"debe manejar números grandes en userId","duration":0.21133199999999874,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","edge cases"],"fullName":"AuthService edge cases debe manejar username con caracteres especiales","status":"passed","title":"debe manejar username con caracteres especiales","duration":0.1889460000000156,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","edge cases"],"fullName":"AuthService edge cases debe manejar todos los roles válidos","status":"passed","title":"debe manejar todos los roles válidos","duration":0.3592789999999866,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","edge cases"],"fullName":"AuthService edge cases debe preservar espacios múltiples en nombreCompleto","status":"passed","title":"debe preservar espacios múltiples en nombreCompleto","duration":0.20207499999997935,"failureMessages":[],"meta":{}}],"startTime":1766117614536,"endTime":1766117614545.3594,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/auth/__tests__/auth.service.test.ts"},{"assertionResults":[{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe verificar JWT válido correctamente","status":"passed","title":"debe verificar JWT válido correctamente","duration":3.0331910000000164,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con token expirado","status":"passed","title":"debe fallar con token expirado","duration":0.9264360000000238,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con secret incorrecta","status":"passed","title":"debe fallar con secret incorrecta","duration":0.31207700000001637,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con issuer incorrecto","status":"passed","title":"debe fallar con issuer incorrecto","duration":0.2948079999999891,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con audience incorrecta","status":"passed","title":"debe fallar con audience incorrecta","duration":0.3347269999999867,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con payload sin userId","status":"passed","title":"debe fallar con payload sin userId","duration":0.29466499999998064,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con payload sin username","status":"passed","title":"debe fallar con payload sin username","duration":0.2877929999999935,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con token malformado","status":"passed","title":"debe fallar con token malformado","duration":0.14328900000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con string vacío","status":"passed","title":"debe fallar con string vacío","duration":0.1281579999999849,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe verificar token con campos opcionales","status":"passed","title":"debe verificar token con campos opcionales","duration":0.28531300000000215,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe extraer token de header válido","status":"passed","title":"debe extraer token de header válido","duration":0.1215219999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe fallar sin header Authorization","status":"passed","title":"debe fallar sin header Authorization","duration":0.14777300000000082,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe fallar con header vacío","status":"passed","title":"debe fallar con header vacío","duration":0.11522700000000441,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe fallar sin esquema Bearer","status":"passed","title":"debe fallar sin esquema Bearer","duration":0.10792399999999702,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe fallar con esquema incorrecto","status":"passed","title":"debe fallar con esquema incorrecto","duration":0.149675000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe fallar con múltiples espacios","status":"passed","title":"debe fallar con múltiples espacios","duration":0.11855099999999652,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe fallar con solo \"Bearer\" sin token","status":"passed","title":"debe fallar con solo \"Bearer\" sin token","duration":0.12161699999998632,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe extraer token largo correctamente","status":"passed","title":"debe extraer token largo correctamente","duration":0.09554799999997954,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe manejar token con puntos (formato JWT real)","status":"passed","title":"debe manejar token con puntos (formato JWT real)","duration":0.0705639999999903,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","integración verify + extractFromHeader"],"fullName":"JWTUtils integración verify + extractFromHeader debe extraer y verificar token de header completo","status":"passed","title":"debe extraer y verificar token de header completo","duration":0.26103699999998753,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","edge cases"],"fullName":"JWTUtils edge cases debe manejar token con caracteres especiales en payload","status":"passed","title":"debe manejar token con caracteres especiales en payload","duration":0.2179399999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","edge cases"],"fullName":"JWTUtils edge cases debe manejar userId = 1","status":"passed","title":"debe manejar userId = 1","duration":0.20880900000000224,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","edge cases"],"fullName":"JWTUtils edge cases debe manejar números grandes en userId","status":"passed","title":"debe manejar números grandes en userId","duration":0.19083999999998014,"failureMessages":[],"meta":{}}],"startTime":1766117614382,"endTime":1766117614390.218,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/auth/__tests__/jwt-utils.test.ts"},{"assertionResults":[{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe crear UserId válido con número positivo","status":"passed","title":"debe crear UserId válido con número positivo","duration":0.7384440000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe crear UserId con número 1","status":"passed","title":"debe crear UserId con número 1","duration":0.13710000000000377,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe fallar con número 0","status":"passed","title":"debe fallar con número 0","duration":0.5526750000000078,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe fallar con número negativo","status":"passed","title":"debe fallar con número negativo","duration":0.16037500000000193,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe fallar con número decimal","status":"passed","title":"debe fallar con número decimal","duration":0.14992799999998851,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe fallar con NaN","status":"passed","title":"debe fallar con NaN","duration":0.1804390000000069,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe fallar con Infinity","status":"passed","title":"debe fallar con Infinity","duration":0.1515489999999886,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","toNumber"],"fullName":"UserId toNumber debe retornar el valor numérico","status":"passed","title":"debe retornar el valor numérico","duration":0.13049100000000635,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","toString"],"fullName":"UserId toString debe retornar el valor como string","status":"passed","title":"debe retornar el valor como string","duration":0.1250569999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","equals"],"fullName":"UserId equals debe retornar true para UserIds con mismo valor","status":"passed","title":"debe retornar true para UserIds con mismo valor","duration":0.10555300000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","equals"],"fullName":"UserId equals debe retornar false para UserIds con valores diferentes","status":"passed","title":"debe retornar false para UserIds con valores diferentes","duration":0.1699780000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","equals"],"fullName":"UserId equals debe comparar correctamente números grandes","status":"passed","title":"debe comparar correctamente números grandes","duration":0.12935699999999883,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","inmutabilidad"],"fullName":"UserId inmutabilidad no debe permitir modificar el valor después de creación","status":"passed","title":"no debe permitir modificar el valor después de creación","duration":0.13566899999999293,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","identidad"],"fullName":"UserId identidad dos instancias con mismo valor NO deben ser iguales por referencia","status":"passed","title":"dos instancias con mismo valor NO deben ser iguales por referencia","duration":0.11664899999999534,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","identidad"],"fullName":"UserId identidad misma instancia debe ser igual a sí misma","status":"passed","title":"misma instancia debe ser igual a sí misma","duration":0.11347899999999811,"failureMessages":[],"meta":{}}],"startTime":1766117618277,"endTime":1766117618281.1135,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/auth/__tests__/user-id.test.ts"},{"assertionResults":[{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular que se necesitan 10 falsos si no hay estudiantes reales","status":"passed","title":"debería calcular que se necesitan 10 falsos si no hay estudiantes reales","duration":1.1532780000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular que se necesitan 5 falsos si hay 5 estudiantes","status":"passed","title":"debería calcular que se necesitan 5 falsos si hay 5 estudiantes","duration":0.1626630000000091,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular que NO se necesitan falsos si hay 10 estudiantes","status":"passed","title":"debería calcular que NO se necesitan falsos si hay 10 estudiantes","duration":0.11783099999999536,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular que NO se necesitan falsos si hay más de 10 estudiantes","status":"passed","title":"debería calcular que NO se necesitan falsos si hay más de 10 estudiantes","duration":0.12309600000000387,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - agregar falsos"],"fullName":"PoolBalancer balance() - agregar falsos debería agregar 10 falsos si el pool está vacío","status":"passed","title":"debería agregar 10 falsos si el pool está vacío","duration":1.6091480000000047,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - agregar falsos"],"fullName":"PoolBalancer balance() - agregar falsos debería agregar 5 falsos si hay 5 estudiantes","status":"passed","title":"debería agregar 5 falsos si hay 5 estudiantes","duration":0.20470000000000255,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - agregar falsos"],"fullName":"PoolBalancer balance() - agregar falsos debería agregar 3 falsos si hay 7 estudiantes y 0 falsos","status":"passed","title":"debería agregar 3 falsos si hay 7 estudiantes y 0 falsos","duration":0.17122499999999263,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - remover falsos"],"fullName":"PoolBalancer balance() - remover falsos debería remover 5 falsos si hay 15 estudiantes y 5 falsos","status":"passed","title":"debería remover 5 falsos si hay 15 estudiantes y 5 falsos","duration":0.2716190000000154,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - remover falsos"],"fullName":"PoolBalancer balance() - remover falsos debería remover 10 falsos si hay 12 estudiantes y 10 falsos","status":"passed","title":"debería remover 10 falsos si hay 12 estudiantes y 10 falsos","duration":0.16251499999998487,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - sin cambios"],"fullName":"PoolBalancer balance() - sin cambios NO debería hacer nada si el pool ya está balanceado (10 estudiantes, 0 falsos)","status":"passed","title":"NO debería hacer nada si el pool ya está balanceado (10 estudiantes, 0 falsos)","duration":0.22726299999999355,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - sin cambios"],"fullName":"PoolBalancer balance() - sin cambios NO debería hacer nada si hay 5 estudiantes y 5 falsos","status":"passed","title":"NO debería hacer nada si hay 5 estudiantes y 5 falsos","duration":0.1640999999999906,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() debería inyectar 15 QRs falsos manualmente","status":"passed","title":"debería inyectar 15 QRs falsos manualmente","duration":0.2192280000000153,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() NO debería inyectar si count es 0","status":"passed","title":"NO debería inyectar si count es 0","duration":0.19416000000001077,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() NO debería inyectar si count es negativo","status":"passed","title":"NO debería inyectar si count es negativo","duration":0.1339179999999942,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","getPoolStats()"],"fullName":"PoolBalancer getPoolStats() debería retornar estadísticas del pool","status":"passed","title":"debería retornar estadísticas del pool","duration":0.27824699999999325,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","getConfig()"],"fullName":"PoolBalancer getConfig() debería retornar la configuración actual","status":"passed","title":"debería retornar la configuración actual","duration":0.15958100000000286,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","updateConfig()"],"fullName":"PoolBalancer updateConfig() debería actualizar minPoolSize en runtime","status":"passed","title":"debería actualizar minPoolSize en runtime","duration":0.12946099999999205,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","updateConfig()"],"fullName":"PoolBalancer updateConfig() debería recalcular falsos necesarios con nueva configuración","status":"passed","title":"debería recalcular falsos necesarios con nueva configuración","duration":0.11372700000001146,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","updateConfig()"],"fullName":"PoolBalancer updateConfig() debería mantener configuración anterior si no se provee","status":"passed","title":"debería mantener configuración anterior si no se provee","duration":0.10389200000000187,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","generateFakeEncrypted() - generación de QRs falsos"],"fullName":"PoolBalancer generateFakeEncrypted() - generación de QRs falsos debería generar QRs falsos con formato válido","status":"passed","title":"debería generar QRs falsos con formato válido","duration":0.48138500000001727,"failureMessages":[],"meta":{}}],"startTime":1766117616150,"endTime":1766117616156.4814,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/qr-projection/__tests__/pool-balancer.service.test.ts"},{"assertionResults":[{"ancestorTitles":["PoolFeeder","feedStudentQR()"],"fullName":"PoolFeeder feedStudentQR() debería alimentar un QR de estudiante al pool con session_key real","status":"passed","title":"debería alimentar un QR de estudiante al pool con session_key real","duration":3.370405000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedStudentQR()"],"fullName":"PoolFeeder feedStudentQR() debería usar fallback AES service si no hay session_key","status":"passed","title":"debería usar fallback AES service si no hay session_key","duration":0.7181809999999871,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedStudentQR()"],"fullName":"PoolFeeder feedStudentQR() debería usar TTL por defecto (60s) si no se especifica","status":"passed","title":"debería usar TTL por defecto (60s) si no se especifica","duration":0.28352100000000746,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedStudentQR()"],"fullName":"PoolFeeder feedStudentQR() debería usar TTL personalizado","status":"passed","title":"debería usar TTL personalizado","duration":0.24247200000002067,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedStudentQR()"],"fullName":"PoolFeeder feedStudentQR() debería retornar error si falla el almacenamiento","status":"passed","title":"debería retornar error si falla el almacenamiento","duration":0.4011979999999937,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedStudentQR()"],"fullName":"PoolFeeder feedStudentQR() debería construir payload con los datos correctos","status":"passed","title":"debería construir payload con los datos correctos","duration":0.5875280000000203,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedMultiple()"],"fullName":"PoolFeeder feedMultiple() debería alimentar múltiples QRs al pool","status":"passed","title":"debería alimentar múltiples QRs al pool","duration":0.6875749999999812,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedMultiple()"],"fullName":"PoolFeeder feedMultiple() debería retornar resultados mixtos (éxito + error)","status":"passed","title":"debería retornar resultados mixtos (éxito + error)","duration":0.40460600000000113,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","getNonce()"],"fullName":"PoolFeeder getNonce() debería extraer el nonce del payload","status":"passed","title":"debería extraer el nonce del payload","duration":0.23780999999999608,"failureMessages":[],"meta":{}}],"startTime":1766117616885,"endTime":1766117616892.4045,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/qr-projection/__tests__/pool-feeder.service.test.ts"},{"assertionResults":[{"ancestorTitles":["LoginEcdhController","Validaciones de entrada"],"fullName":"LoginEcdhController Validaciones de entrada debería retornar 401 si no hay usuario autenticado","status":"passed","title":"debería retornar 401 si no hay usuario autenticado","duration":2.464939000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Validaciones de entrada"],"fullName":"LoginEcdhController Validaciones de entrada debería retornar 400 si falta credentialId","status":"passed","title":"debería retornar 400 si falta credentialId","duration":0.36636500000000183,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Validaciones de entrada"],"fullName":"LoginEcdhController Validaciones de entrada debería retornar 400 si falta clientPublicKey","status":"passed","title":"debería retornar 400 si falta clientPublicKey","duration":0.27125600000000816,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Validaciones de entrada"],"fullName":"LoginEcdhController Validaciones de entrada debería retornar 400 si ambos campos faltan","status":"passed","title":"debería retornar 400 si ambos campos faltan","duration":0.2829329999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Manejo de errores del UseCase"],"fullName":"LoginEcdhController Manejo de errores del UseCase debería retornar 404 si el dispositivo no existe (DEVICE_NOT_FOUND)","status":"passed","title":"debería retornar 404 si el dispositivo no existe (DEVICE_NOT_FOUND)","duration":0.35919699999999466,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Manejo de errores del UseCase"],"fullName":"LoginEcdhController Manejo de errores del UseCase debería retornar 403 si el dispositivo no pertenece al usuario (DEVICE_NOT_OWNED)","status":"passed","title":"debería retornar 403 si el dispositivo no pertenece al usuario (DEVICE_NOT_OWNED)","duration":0.28819399999999007,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Manejo de errores del UseCase"],"fullName":"LoginEcdhController Manejo de errores del UseCase debería retornar 403 si el dispositivo está revocado (DEVICE_REVOKED)","status":"passed","title":"debería retornar 403 si el dispositivo está revocado (DEVICE_REVOKED)","duration":0.2603780000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Manejo de errores del UseCase"],"fullName":"LoginEcdhController Manejo de errores del UseCase debería retornar 500 para errores genéricos sin código","status":"passed","title":"debería retornar 500 para errores genéricos sin código","duration":2.9969349999999935,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Caso de éxito"],"fullName":"LoginEcdhController Caso de éxito debería retornar 200 con serverPublicKey, totpu y deviceId","status":"passed","title":"debería retornar 200 con serverPublicKey, totpu y deviceId","duration":0.49593699999999785,"failureMessages":[],"meta":{}}],"startTime":1766117617877,"endTime":1766117617885.4958,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/session/__tests__/login-ecdh.controller.test.ts"},{"assertionResults":[{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","caso exitoso"],"fullName":"CompleteScanUseCase (EJEMPLO) caso exitoso debe completar el escaneo correctamente","status":"passed","title":"debe completar el escaneo correctamente","duration":1.3671919999999886,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","casos de error"],"fullName":"CompleteScanUseCase (EJEMPLO) casos de error debe fallar si el estudiante no está registrado","status":"passed","title":"debe fallar si el estudiante no está registrado","duration":0.3474209999999971,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","casos de error"],"fullName":"CompleteScanUseCase (EJEMPLO) casos de error debe fallar si el QR ya fue consumido","status":"passed","title":"debe fallar si el QR ya fue consumido","duration":0.32829300000000217,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","casos de error"],"fullName":"CompleteScanUseCase (EJEMPLO) casos de error debe fallar si el TOTP es inválido","status":"passed","title":"debe fallar si el TOTP es inválido","duration":0.35328400000000215,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","límites y edge cases"],"fullName":"CompleteScanUseCase (EJEMPLO) límites y edge cases debe avanzar al siguiente round después de completar uno","status":"passed","title":"debe avanzar al siguiente round después de completar uno","duration":0.33438599999999497,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","límites y edge cases"],"fullName":"CompleteScanUseCase (EJEMPLO) límites y edge cases debe completar el proceso después del último round","status":"passed","title":"debe completar el proceso después del último round","duration":0.33265700000001175,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","límites y edge cases"],"fullName":"CompleteScanUseCase (EJEMPLO) límites y edge cases debe reiniciar intentos al pasar de round","status":"passed","title":"debe reiniciar intentos al pasar de round","duration":0.3261499999999842,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","manejo de timestamps"],"fullName":"CompleteScanUseCase (EJEMPLO) manejo de timestamps debe rechazar QR muy antiguo","status":"passed","title":"debe rechazar QR muy antiguo","duration":0.33247700000001146,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","manejo de timestamps"],"fullName":"CompleteScanUseCase (EJEMPLO) manejo de timestamps debe aceptar QR reciente","status":"passed","title":"debe aceptar QR reciente","duration":0.37366999999997574,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","concurrencia y race conditions"],"fullName":"CompleteScanUseCase (EJEMPLO) concurrencia y race conditions debe manejar múltiples escaneos simultáneos del mismo estudiante","status":"passed","title":"debe manejar múltiples escaneos simultáneos del mismo estudiante","duration":0.3211669999999742,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","limpieza de mocks"],"fullName":"CompleteScanUseCase (EJEMPLO) limpieza de mocks debe resetear correctamente todos los mocks","status":"passed","title":"debe resetear correctamente todos los mocks","duration":0.8570220000000006,"failureMessages":[],"meta":{}}],"startTime":1766117614700,"endTime":1766117614705.857,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/shared/__tests__/example-usecase.test.ts"},{"assertionResults":[{"ancestorTitles":["ParticipationService","registerParticipation()"],"fullName":"ParticipationService registerParticipation() debería registrar nuevo estudiante y generar QR","status":"passed","title":"debería registrar nuevo estudiante y generar QR","duration":2.8369090000000057,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","registerParticipation()"],"fullName":"ParticipationService registerParticipation() debería rechazar si estudiante ya completó","status":"passed","title":"debería rechazar si estudiante ya completó","duration":0.5096130000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","registerParticipation()"],"fullName":"ParticipationService registerParticipation() debería rechazar si estudiante está failed","status":"passed","title":"debería rechazar si estudiante está failed","duration":0.2925599999999946,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","registerParticipation()"],"fullName":"ParticipationService registerParticipation() debería retornar error si generateAndProject falla","status":"passed","title":"debería retornar error si generateAndProject falla","duration":5.351309999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería retornar error si estudiante no está registrado","status":"passed","title":"debería retornar error si estudiante no está registrado","duration":0.3671680000000208,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería rechazar si estudiante completó","status":"passed","title":"debería rechazar si estudiante completó","duration":0.47154299999999694,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería rechazar si estudiante está failed","status":"passed","title":"debería rechazar si estudiante está failed","duration":0.4431539999999927,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería retornar QR existente si sigue válido","status":"passed","title":"debería retornar QR existente si sigue válido","duration":1.7814740000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería generar nuevo QR si el anterior expiró","status":"passed","title":"debería generar nuevo QR si el anterior expiró","duration":0.3596729999999866,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería rechazar si QR expiró y no quedan intentos","status":"passed","title":"debería rechazar si QR expiró y no quedan intentos","duration":0.22799899999998274,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería manejar errores internos","status":"passed","title":"debería manejar errores internos","duration":0.3678069999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","getStatus()"],"fullName":"ParticipationService getStatus() debería retornar registered=false si estudiante no existe","status":"passed","title":"debería retornar registered=false si estudiante no existe","duration":0.24737899999999513,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","getStatus()"],"fullName":"ParticipationService getStatus() debería retornar estado completo con QR activo","status":"passed","title":"debería retornar estado completo con QR activo","duration":0.35062899999999786,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","getStatus()"],"fullName":"ParticipationService getStatus() debería retornar estado sin QR si no hay activo","status":"passed","title":"debería retornar estado sin QR si no hay activo","duration":0.21876199999999812,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","getStatus()"],"fullName":"ParticipationService getStatus() debería retornar estado completed","status":"passed","title":"debería retornar estado completed","duration":0.2527249999999981,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","getStatus()"],"fullName":"ParticipationService getStatus() debería ignorar QR consumido","status":"passed","title":"debería ignorar QR consumido","duration":0.19933499999999071,"failureMessages":[],"meta":{}}],"startTime":1766117611754,"endTime":1766117611769.1992,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/application/__tests__/participation.service.test.ts"},{"assertionResults":[{"ancestorTitles":["FraudMetricsRepository","recordAttempt()"],"fullName":"FraudMetricsRepository recordAttempt() debería registrar intento fraudulento con todos los datos","status":"passed","title":"debería registrar intento fraudulento con todos los datos","duration":2.0952350000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","recordAttempt()"],"fullName":"FraudMetricsRepository recordAttempt() debería agregar intento a lista de recientes","status":"passed","title":"debería agregar intento a lista de recientes","duration":0.951486999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","recordAttempt()"],"fullName":"FraudMetricsRepository recordAttempt() debería agregar estudiante al set de sospechosos","status":"passed","title":"debería agregar estudiante al set de sospechosos","duration":0.24245899999999665,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","recordAttempt()"],"fullName":"FraudMetricsRepository recordAttempt() debería truncar payload preview a 20 caracteres","status":"passed","title":"debería truncar payload preview a 20 caracteres","duration":0.32205600000000345,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","recordAttempt()"],"fullName":"FraudMetricsRepository recordAttempt() debería establecer TTL en todas las keys","status":"passed","title":"debería establecer TTL en todas las keys","duration":0.4061439999999834,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","getStats()"],"fullName":"FraudMetricsRepository getStats() debería retornar estadísticas completas","status":"passed","title":"debería retornar estadísticas completas","duration":0.667587999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","getStats()"],"fullName":"FraudMetricsRepository getStats() debería manejar sesión sin fraudes","status":"passed","title":"debería manejar sesión sin fraudes","duration":0.2965210000000127,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","getStats()"],"fullName":"FraudMetricsRepository getStats() debería parsear intentos recientes correctamente","status":"passed","title":"debería parsear intentos recientes correctamente","duration":0.28723099999999135,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","getStats()"],"fullName":"FraudMetricsRepository getStats() debería ignorar intentos con JSON inválido","status":"passed","title":"debería ignorar intentos con JSON inválido","duration":0.43489700000000653,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","getSuspiciousStudents()"],"fullName":"FraudMetricsRepository getSuspiciousStudents() debería retornar lista de estudiantes sospechosos","status":"passed","title":"debería retornar lista de estudiantes sospechosos","duration":0.33843799999999646,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","getSuspiciousStudents()"],"fullName":"FraudMetricsRepository getSuspiciousStudents() debería retornar array vacío si no hay sospechosos","status":"passed","title":"debería retornar array vacío si no hay sospechosos","duration":0.24635500000002253,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","getSuspiciousStudents()"],"fullName":"FraudMetricsRepository getSuspiciousStudents() debería convertir strings a números","status":"passed","title":"debería convertir strings a números","duration":0.2623800000000074,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","getCountByType()"],"fullName":"FraudMetricsRepository getCountByType() debería retornar conteo para tipo específico","status":"passed","title":"debería retornar conteo para tipo específico","duration":0.28129200000000765,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","getCountByType()"],"fullName":"FraudMetricsRepository getCountByType() debería retornar 0 si no existe el contador","status":"passed","title":"debería retornar 0 si no existe el contador","duration":0.20531299999998964,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","clearSession()"],"fullName":"FraudMetricsRepository clearSession() debería eliminar todas las keys de la sesión","status":"passed","title":"debería eliminar todas las keys de la sesión","duration":0.28264599999999973,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","Keys building"],"fullName":"FraudMetricsRepository Keys building debería construir count key correctamente","status":"passed","title":"debería construir count key correctamente","duration":0.2935600000000136,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","Keys building"],"fullName":"FraudMetricsRepository Keys building debería construir attempts key correctamente","status":"passed","title":"debería construir attempts key correctamente","duration":0.26588499999999726,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","Keys building"],"fullName":"FraudMetricsRepository Keys building debería construir students key correctamente","status":"passed","title":"debería construir students key correctamente","duration":0.26342800000000466,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","Integración - Múltiples intentos"],"fullName":"FraudMetricsRepository Integración - Múltiples intentos debería acumular múltiples intentos del mismo tipo","status":"passed","title":"debería acumular múltiples intentos del mismo tipo","duration":0.3030689999999936,"failureMessages":[],"meta":{}},{"ancestorTitles":["FraudMetricsRepository","Integración - Múltiples intentos"],"fullName":"FraudMetricsRepository Integración - Múltiples intentos debería acumular diferentes estudiantes en set","status":"passed","title":"debería acumular diferentes estudiantes en set","duration":0.34796200000002386,"failureMessages":[],"meta":{}}],"startTime":1766117613862,"endTime":1766117613871.348,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/infrastructure/__tests__/fraud-metrics.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["StudentSessionRepository","registerStudent()"],"fullName":"StudentSessionRepository registerStudent() debería crear estado inicial para nuevo estudiante","status":"passed","title":"debería crear estado inicial para nuevo estudiante","duration":3.1308159999999816,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","registerStudent()"],"fullName":"StudentSessionRepository registerStudent() debería retornar estado existente si estudiante ya está registrado","status":"passed","title":"debería retornar estado existente si estudiante ya está registrado","duration":0.3336140000000114,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","registerStudent()"],"fullName":"StudentSessionRepository registerStudent() debería usar configuración personalizada","status":"passed","title":"debería usar configuración personalizada","duration":0.2180050000000051,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getState()"],"fullName":"StudentSessionRepository getState() debería retornar estado del estudiante","status":"passed","title":"debería retornar estado del estudiante","duration":0.26731000000000904,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getState()"],"fullName":"StudentSessionRepository getState() debería retornar null si no existe estado","status":"passed","title":"debería retornar null si no existe estado","duration":0.20416099999999915,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getState()"],"fullName":"StudentSessionRepository getState() debería retornar null si hay error de parsing","status":"passed","title":"debería retornar null si hay error de parsing","duration":4.692177999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","saveState()"],"fullName":"StudentSessionRepository saveState() debería guardar estado con TTL y actualizar timestamp","status":"passed","title":"debería guardar estado con TTL y actualizar timestamp","duration":0.32955100000000925,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","setActiveQR()"],"fullName":"StudentSessionRepository setActiveQR() debería actualizar QR activo y renovar TTL","status":"passed","title":"debería actualizar QR activo y renovar TTL","duration":0.3355309999999747,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","setActiveQR()"],"fullName":"StudentSessionRepository setActiveQR() debería retornar null si no existe estado","status":"passed","title":"debería retornar null si no existe estado","duration":0.18661399999999162,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","completeRound()"],"fullName":"StudentSessionRepository completeRound() debería completar round y avanzar al siguiente","status":"passed","title":"debería completar round y avanzar al siguiente","duration":0.684332999999981,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","completeRound()"],"fullName":"StudentSessionRepository completeRound() debería marcar como completado al terminar todos los rounds","status":"passed","title":"debería marcar como completado al terminar todos los rounds","duration":0.3101169999999911,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","completeRound()"],"fullName":"StudentSessionRepository completeRound() debería lanzar error si no existe estado","status":"passed","title":"debería lanzar error si no existe estado","duration":0.8978529999999978,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","failRound()"],"fullName":"StudentSessionRepository failRound() debería incrementar intento fallido","status":"passed","title":"debería incrementar intento fallido","duration":0.36407299999999054,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","failRound()"],"fullName":"StudentSessionRepository failRound() debería marcar como fallido si no quedan intentos","status":"passed","title":"debería marcar como fallido si no quedan intentos","duration":0.20807800000000043,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","failRound()"],"fullName":"StudentSessionRepository failRound() debería lanzar error si no existe estado","status":"passed","title":"debería lanzar error si no existe estado","duration":0.26957799999999565,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","validateRoundMatch()"],"fullName":"StudentSessionRepository validateRoundMatch() debería validar round correcto con nonce coincidente","status":"passed","title":"debería validar round correcto con nonce coincidente","duration":0.2685290000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","validateRoundMatch()"],"fullName":"StudentSessionRepository validateRoundMatch() debería rechazar si estudiante no está registrado","status":"passed","title":"debería rechazar si estudiante no está registrado","duration":0.16059300000000576,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","validateRoundMatch()"],"fullName":"StudentSessionRepository validateRoundMatch() debería rechazar si estudiante está completed","status":"passed","title":"debería rechazar si estudiante está completed","duration":0.20964599999999223,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","validateRoundMatch()"],"fullName":"StudentSessionRepository validateRoundMatch() debería rechazar si nonce no coincide","status":"passed","title":"debería rechazar si nonce no coincide","duration":0.1906319999999937,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","validateRoundMatch()"],"fullName":"StudentSessionRepository validateRoundMatch() debería rechazar si round ya fue completado","status":"passed","title":"debería rechazar si round ya fue completado","duration":0.16954200000000696,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","validateRoundMatch()"],"fullName":"StudentSessionRepository validateRoundMatch() debería rechazar si round todavía no fue alcanzado","status":"passed","title":"debería rechazar si round todavía no fue alcanzado","duration":0.17866300000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getActiveStudents()"],"fullName":"StudentSessionRepository getActiveStudents() debería retornar lista de estudiantes activos","status":"passed","title":"debería retornar lista de estudiantes activos","duration":0.2160030000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getActiveStudents()"],"fullName":"StudentSessionRepository getActiveStudents() debería retornar array vacío si no hay estudiantes","status":"passed","title":"debería retornar array vacío si no hay estudiantes","duration":0.1491709999999955,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","countByStatus()"],"fullName":"StudentSessionRepository countByStatus() debería contar estudiantes por estado","status":"passed","title":"debería contar estudiantes por estado","duration":0.2699389999999937,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getOrCreateSessionConfig()"],"fullName":"StudentSessionRepository getOrCreateSessionConfig() debería retornar config existente","status":"passed","title":"debería retornar config existente","duration":0.19064800000001014,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getOrCreateSessionConfig()"],"fullName":"StudentSessionRepository getOrCreateSessionConfig() debería crear nueva config con valores por defecto","status":"passed","title":"debería crear nueva config con valores por defecto","duration":0.2742990000000134,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getOrCreateSessionConfig()"],"fullName":"StudentSessionRepository getOrCreateSessionConfig() debería crear config con valores personalizados","status":"passed","title":"debería crear config con valores personalizados","duration":0.31451800000002095,"failureMessages":[],"meta":{}}],"startTime":1766117611595,"endTime":1766117611610.3145,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/infrastructure/__tests__/student-session.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["AuthService","authenticateFromHeader()"],"fullName":"AuthService authenticateFromHeader() debería autenticar usuario desde header válido","status":"passed","title":"debería autenticar usuario desde header válido","duration":2.1110319999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader()"],"fullName":"AuthService authenticateFromHeader() debería lanzar error si header es undefined","status":"passed","title":"debería lanzar error si header es undefined","duration":0.6296980000000048,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader()"],"fullName":"AuthService authenticateFromHeader() debería lanzar error si token es inválido","status":"passed","title":"debería lanzar error si token es inválido","duration":0.25024700000000166,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","verifyToken()"],"fullName":"AuthService verifyToken() debería verificar token directamente","status":"passed","title":"debería verificar token directamente","duration":0.29832799999999793,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","verifyToken()"],"fullName":"AuthService verifyToken() debería lanzar error si token expirado","status":"passed","title":"debería lanzar error si token expirado","duration":0.24193199999999138,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","mapToAuthenticatedUser()"],"fullName":"AuthService mapToAuthenticatedUser() debería mapear payload a AuthenticatedUser con todos los campos","status":"passed","title":"debería mapear payload a AuthenticatedUser con todos los campos","duration":0.3378280000000018,"failureMessages":[],"meta":{}}],"startTime":1766117618147,"endTime":1766117618151.338,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/auth/application/__tests__/auth.service.test.ts"},{"assertionResults":[{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","save() - Guardar challenge de enrollment"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges save() - Guardar challenge de enrollment Debe guardar challenge en Valkey con TTL por defecto (300s)","status":"passed","title":"Debe guardar challenge en Valkey con TTL por defecto (300s)","duration":2.483618000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","save() - Guardar challenge de enrollment"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges save() - Guardar challenge de enrollment Debe guardar challenge con TTL personalizado","status":"passed","title":"Debe guardar challenge con TTL personalizado","duration":0.33884499999999207,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","save() - Guardar challenge de enrollment"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges save() - Guardar challenge de enrollment Debe serializar todos los campos como strings","status":"passed","title":"Debe serializar todos los campos como strings","duration":0.3399119999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","save() - Guardar challenge de enrollment"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges save() - Guardar challenge de enrollment Debe sobrescribir challenge existente (nuevo intento de enrollment)","status":"passed","title":"Debe sobrescribir challenge existente (nuevo intento de enrollment)","duration":0.2728129999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","findByUserId() - Buscar challenge por userId"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges findByUserId() - Buscar challenge por userId Debe retornar challenge cuando existe","status":"passed","title":"Debe retornar challenge cuando existe","duration":0.4048739999999924,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","findByUserId() - Buscar challenge por userId"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges findByUserId() - Buscar challenge por userId Debe retornar null cuando no existe challenge","status":"passed","title":"Debe retornar null cuando no existe challenge","duration":0.4365939999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","findByUserId() - Buscar challenge por userId"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges findByUserId() - Buscar challenge por userId Debe deserializar correctamente números desde strings","status":"passed","title":"Debe deserializar correctamente números desde strings","duration":0.3238100000000088,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","findByUserId() - Buscar challenge por userId"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges findByUserId() - Buscar challenge por userId Debe manejar challenge string correctamente (no es número)","status":"passed","title":"Debe manejar challenge string correctamente (no es número)","duration":0.2792969999999855,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","delete() - Eliminar challenge"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges delete() - Eliminar challenge Debe eliminar challenge de Valkey","status":"passed","title":"Debe eliminar challenge de Valkey","duration":0.23651700000002052,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","delete() - Eliminar challenge"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges delete() - Eliminar challenge Debe manejar eliminación de challenge inexistente sin error","status":"passed","title":"Debe manejar eliminación de challenge inexistente sin error","duration":0.6832410000000095,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","buildKey() - Construcción de keys"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges buildKey() - Construcción de keys Debe construir key con formato correcto","status":"passed","title":"Debe construir key con formato correcto","duration":0.2917889999999943,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","buildKey() - Construcción de keys"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges buildKey() - Construcción de keys Debe generar keys únicas para diferentes usuarios","status":"passed","title":"Debe generar keys únicas para diferentes usuarios","duration":0.33349900000001753,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","Flujo completo: save -> find -> delete"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges Flujo completo: save -> find -> delete Debe completar ciclo de vida de challenge","status":"passed","title":"Debe completar ciclo de vida de challenge","duration":0.3560139999999876,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","Validación de TTL"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges Validación de TTL Debe usar TTL de 300s por defecto (5 minutos)","status":"passed","title":"Debe usar TTL de 300s por defecto (5 minutos)","duration":0.3014029999999934,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","Validación de TTL"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges Validación de TTL Debe permitir TTL personalizado para casos especiales","status":"passed","title":"Debe permitir TTL personalizado para casos especiales","duration":0.3089089999999999,"failureMessages":[],"meta":{}}],"startTime":1766117612502,"endTime":1766117612510.3088,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/infrastructure/__tests__/enrollment-challenge.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["QRGenerator","Generación de nonce"],"fullName":"QRGenerator Generación de nonce debe generar nonce de 32 caracteres hex","status":"passed","title":"debe generar nonce de 32 caracteres hex","duration":1.4447279999999978,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Generación de nonce"],"fullName":"QRGenerator Generación de nonce debe generar nonces diferentes en cada llamada","status":"passed","title":"debe generar nonces diferentes en cada llamada","duration":0.6619639999999976,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe construir payload con estructura correcta","status":"passed","title":"debe construir payload con estructura correcta","duration":0.3822590000000048,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe incluir version 1","status":"passed","title":"debe incluir version 1","duration":0.15131100000000686,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe incluir sessionId como string","status":"passed","title":"debe incluir sessionId como string","duration":0.1628820000000104,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe incluir userId","status":"passed","title":"debe incluir userId","duration":0.16483199999998988,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe incluir timestamp reciente","status":"passed","title":"debe incluir timestamp reciente","duration":0.26169000000000153,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe incluir nonce de 32 caracteres hex","status":"passed","title":"debe incluir nonce de 32 caracteres hex","duration":0.17450700000000552,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe incluir round number positivo","status":"passed","title":"debe incluir round number positivo","duration":0.1749760000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Round counter"],"fullName":"QRGenerator Round counter debe iniciar en round 1","status":"passed","title":"debe iniciar en round 1","duration":0.18353000000000463,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Round counter"],"fullName":"QRGenerator Round counter debe incrementar round en cada llamada para misma sesión","status":"passed","title":"debe incrementar round en cada llamada para misma sesión","duration":0.19448100000001034,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Round counter"],"fullName":"QRGenerator Round counter debe mantener contadores independientes por sesión","status":"passed","title":"debe mantener contadores independientes por sesión","duration":0.22151999999999816,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Round counter"],"fullName":"QRGenerator Round counter debe reiniciar contador tras resetRoundCounter","status":"passed","title":"debe reiniciar contador tras resetRoundCounter","duration":0.17012800000000539,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Conversión a string JSON"],"fullName":"QRGenerator Conversión a string JSON debe convertir payload a JSON válido","status":"passed","title":"debe convertir payload a JSON válido","duration":0.7069719999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Conversión a string JSON"],"fullName":"QRGenerator Conversión a string JSON debe incluir todos los campos en el JSON","status":"passed","title":"debe incluir todos los campos en el JSON","duration":0.25840900000000033,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Encriptación con AES-GCM"],"fullName":"QRGenerator Encriptación con AES-GCM debe encriptar payload generando string no vacío","status":"passed","title":"debe encriptar payload generando string no vacío","duration":0.5482829999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Encriptación con AES-GCM"],"fullName":"QRGenerator Encriptación con AES-GCM debe generar formato iv.ciphertext.authTag (partes separadas por punto)","status":"passed","title":"debe generar formato iv.ciphertext.authTag (partes separadas por punto)","duration":0.26762499999999534,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Encriptación con AES-GCM"],"fullName":"QRGenerator Encriptación con AES-GCM debe generar ciphertexts diferentes para payloads idénticos","status":"passed","title":"debe generar ciphertexts diferentes para payloads idénticos","duration":0.21263799999999833,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Encriptación con clave aleatoria (QRs decoy)"],"fullName":"QRGenerator Encriptación con clave aleatoria (QRs decoy) debe generar payload encriptado con formato válido","status":"passed","title":"debe generar payload encriptado con formato válido","duration":0.3117859999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Encriptación con clave aleatoria (QRs decoy)"],"fullName":"QRGenerator Encriptación con clave aleatoria (QRs decoy) debe generar ciphertexts diferentes en cada llamada (claves aleatorias)","status":"passed","title":"debe generar ciphertexts diferentes en cada llamada (claves aleatorias)","duration":1.5141050000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Encriptación con clave aleatoria (QRs decoy)"],"fullName":"QRGenerator Encriptación con clave aleatoria (QRs decoy) QR decoy debe ser indistinguible de QR real (mismo formato)","status":"passed","title":"QR decoy debe ser indistinguible de QR real (mismo formato)","duration":0.2610820000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateV1 (método principal)"],"fullName":"QRGenerator generateV1 (método principal) debe generar envelope con payload y payloadString encriptado","status":"passed","title":"debe generar envelope con payload y payloadString encriptado","duration":0.1897340000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateV1 (método principal)"],"fullName":"QRGenerator generateV1 (método principal) debe incluir payload V1 estructurado","status":"passed","title":"debe incluir payload V1 estructurado","duration":0.18825200000000564,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateV1 (método principal)"],"fullName":"QRGenerator generateV1 (método principal) debe incluir payloadString encriptado","status":"passed","title":"debe incluir payloadString encriptado","duration":0.15723199999999338,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateV1 (método principal)"],"fullName":"QRGenerator generateV1 (método principal) debe incluir sessionId original","status":"passed","title":"debe incluir sessionId original","duration":0.11901699999999948,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateForStudent (implementación IQRGenerator)"],"fullName":"QRGenerator generateForStudent (implementación IQRGenerator) debe generar payload para round específico","status":"passed","title":"debe generar payload para round específico","duration":0.19431899999999303,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateForStudent (implementación IQRGenerator)"],"fullName":"QRGenerator generateForStudent (implementación IQRGenerator) debe incluir sessionId y hostUserId correctos","status":"passed","title":"debe incluir sessionId y hostUserId correctos","duration":0.16233599999999626,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateForStudent (implementación IQRGenerator)"],"fullName":"QRGenerator generateForStudent (implementación IQRGenerator) debe retornar payload y encrypted","status":"passed","title":"debe retornar payload y encrypted","duration":0.15398700000000076,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateForStudent (implementación IQRGenerator)"],"fullName":"QRGenerator generateForStudent (implementación IQRGenerator) debe generar nonce único en cada llamada","status":"passed","title":"debe generar nonce único en cada llamada","duration":0.2587840000000057,"failureMessages":[],"meta":{}}],"startTime":1766117613411,"endTime":1766117613421.2588,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/qr-projection/domain/__tests__/qr-generator.test.ts"},{"assertionResults":[{"ancestorTitles":["AccessGatewayService","getState() - Usuario bloqueado"],"fullName":"AccessGatewayService getState() - Usuario bloqueado debería retornar BLOCKED si usuario tiene restricción","status":"passed","title":"debería retornar BLOCKED si usuario tiene restricción","duration":1.5385269999999878,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState() - Usuario sin enrollment"],"fullName":"AccessGatewayService getState() - Usuario sin enrollment debería retornar NOT_ENROLLED si requiere enrollment","status":"passed","title":"debería retornar NOT_ENROLLED si requiere enrollment","duration":0.30230799999999647,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState() - Usuario sin enrollment"],"fullName":"AccessGatewayService getState() - Usuario sin enrollment debería retornar NOT_ENROLLED si requiere re-enrollment","status":"passed","title":"debería retornar NOT_ENROLLED si requiere re-enrollment","duration":0.29168300000000613,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState() - Usuario enrolled sin sesión"],"fullName":"AccessGatewayService getState() - Usuario enrolled sin sesión debería retornar ENROLLED_NO_SESSION si no tiene sesión activa","status":"passed","title":"debería retornar ENROLLED_NO_SESSION si no tiene sesión activa","duration":0.7265689999999978,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState() - Usuario enrolled sin sesión"],"fullName":"AccessGatewayService getState() - Usuario enrolled sin sesión debería manejar device undefined","status":"passed","title":"debería manejar device undefined","duration":0.378625999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState() - Usuario READY"],"fullName":"AccessGatewayService getState() - Usuario READY debería retornar READY si cumple todas las condiciones","status":"passed","title":"debería retornar READY si cumple todas las condiciones","duration":0.2743030000000033,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState() - Usuario READY"],"fullName":"AccessGatewayService getState() - Usuario READY debería verificar en orden: restricción → enrollment → sesión","status":"passed","title":"debería verificar en orden: restricción → enrollment → sesión","duration":0.27214600000000644,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","Flujo completo - Casos de borde"],"fullName":"AccessGatewayService Flujo completo - Casos de borde debería pasar deviceFingerprint al orchestrator","status":"passed","title":"debería pasar deviceFingerprint al orchestrator","duration":0.751882000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","Flujo completo - Casos de borde"],"fullName":"AccessGatewayService Flujo completo - Casos de borde debería manejar múltiples usuarios concurrentemente","status":"passed","title":"debería manejar múltiples usuarios concurrentemente","duration":0.6296289999999942,"failureMessages":[],"meta":{}}],"startTime":1766117616434,"endTime":1766117616439.752,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/access/application/services/__tests__/access-gateway.service.test.ts"},{"assertionResults":[{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt"],"fullName":"AttendancePersistenceService saveValidationAttempt debería guardar nueva validación si no existe","status":"passed","title":"debería guardar nueva validación si no existe","duration":3.069986,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt"],"fullName":"AttendancePersistenceService saveValidationAttempt debería completar validación existente sin crear duplicado","status":"passed","title":"debería completar validación existente sin crear duplicado","duration":0.6697040000000101,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt"],"fullName":"AttendancePersistenceService saveValidationAttempt NO debería lanzar error si no encuentra registro","status":"passed","title":"NO debería lanzar error si no encuentra registro","duration":1.2074269999999956,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt"],"fullName":"AttendancePersistenceService saveValidationAttempt NO debería lanzar error si sessionId no es numérico","status":"passed","title":"NO debería lanzar error si sessionId no es numérico","duration":0.3820890000000077,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult"],"fullName":"AttendancePersistenceService saveAttendanceResult debería guardar resultado final con estadísticas","status":"passed","title":"debería guardar resultado final con estadísticas","duration":0.4741989999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult"],"fullName":"AttendancePersistenceService saveAttendanceResult debería ser idempotente: NO duplicar si ya existe resultado","status":"passed","title":"debería ser idempotente: NO duplicar si ya existe resultado","duration":0.2941469999999953,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult"],"fullName":"AttendancePersistenceService saveAttendanceResult debería determinar finalStatus PRESENT si certainty >= 70","status":"passed","title":"debería determinar finalStatus PRESENT si certainty >= 70","duration":0.6223140000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult"],"fullName":"AttendancePersistenceService saveAttendanceResult debería determinar finalStatus DOUBTFUL si 40 <= certainty < 70","status":"passed","title":"debería determinar finalStatus DOUBTFUL si 40 <= certainty < 70","duration":0.43027800000000127,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult"],"fullName":"AttendancePersistenceService saveAttendanceResult debería determinar finalStatus ABSENT si certainty < 40","status":"passed","title":"debería determinar finalStatus ABSENT si certainty < 40","duration":0.35966600000000426,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","markRegistrationComplete"],"fullName":"AttendancePersistenceService markRegistrationComplete debería actualizar estado de registración a completed","status":"passed","title":"debería actualizar estado de registración a completed","duration":0.37416100000000085,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","markRegistrationComplete"],"fullName":"AttendancePersistenceService markRegistrationComplete NO debería lanzar error si no encuentra registro","status":"passed","title":"NO debería lanzar error si no encuentra registro","duration":0.33305500000000166,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveCompleteAttendance"],"fullName":"AttendancePersistenceService saveCompleteAttendance debería ejecutar las 3 operaciones en orden","status":"passed","title":"debería ejecutar las 3 operaciones en orden","duration":0.42531499999999767,"failureMessages":[],"meta":{}}],"startTime":1766117615408,"endTime":1766117615417.4253,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/application/services/__tests__/attendance-persistence.service.test.ts"},{"assertionResults":[{"ancestorTitles":["QRLifecycleService","generateAndPublish (implementa IQRLifecycleManager)"],"fullName":"QRLifecycleService generateAndPublish (implementa IQRLifecycleManager) debe generar QR y retornar resultado correcto","status":"passed","title":"debe generar QR y retornar resultado correcto","duration":1.5360829999999908,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndPublish (implementa IQRLifecycleManager)"],"fullName":"QRLifecycleService generateAndPublish (implementa IQRLifecycleManager) debe llamar a generateForStudent con parámetros correctos","status":"passed","title":"debe llamar a generateForStudent con parámetros correctos","duration":1.2407690000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndPublish (implementa IQRLifecycleManager)"],"fullName":"QRLifecycleService generateAndPublish (implementa IQRLifecycleManager) debe almacenar payload en repositorio","status":"passed","title":"debe almacenar payload en repositorio","duration":1.018810000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndPublish (implementa IQRLifecycleManager)"],"fullName":"QRLifecycleService generateAndPublish (implementa IQRLifecycleManager) debe actualizar pool de proyección","status":"passed","title":"debe actualizar pool de proyección","duration":0.519880999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndPublish (implementa IQRLifecycleManager)"],"fullName":"QRLifecycleService generateAndPublish (implementa IQRLifecycleManager) debe propagar errores del generador","status":"passed","title":"debe propagar errores del generador","duration":1.049997999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndPublish (implementa IQRLifecycleManager)"],"fullName":"QRLifecycleService generateAndPublish (implementa IQRLifecycleManager) debe propagar errores del repositorio de payloads","status":"passed","title":"debe propagar errores del repositorio de payloads","duration":0.44313999999999965,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndProject"],"fullName":"QRLifecycleService generateAndProject debe generar QR con hostUserId custom","status":"passed","title":"debe generar QR con hostUserId custom","duration":0.3362300000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndProject"],"fullName":"QRLifecycleService generateAndProject debe retornar payload y encrypted","status":"passed","title":"debe retornar payload y encrypted","duration":0.3116760000000056,"failureMessages":[],"meta":{}}],"startTime":1766117617329,"endTime":1766117617335.3362,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/application/services/__tests__/qr-lifecycle.service.test.ts"},{"assertionResults":[{"ancestorTitles":["AttendanceStatsCalculator","calculate","con tiempos de respuesta vacíos"],"fullName":"AttendanceStatsCalculator calculate con tiempos de respuesta vacíos debe retornar estadísticas vacías","status":"passed","title":"debe retornar estadísticas vacías","duration":0.9100169999999963,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","con tiempos de respuesta normales"],"fullName":"AttendanceStatsCalculator calculate con tiempos de respuesta normales debe calcular promedio correctamente","status":"passed","title":"debe calcular promedio correctamente","duration":0.22159999999999513,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","con tiempos de respuesta normales"],"fullName":"AttendanceStatsCalculator calculate con tiempos de respuesta normales debe calcular min y max correctamente","status":"passed","title":"debe calcular min y max correctamente","duration":0.14842799999999556,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","con tiempos de respuesta normales"],"fullName":"AttendanceStatsCalculator calculate con tiempos de respuesta normales debe calcular desviación estándar correctamente","status":"passed","title":"debe calcular desviación estándar correctamente","duration":0.12230700000000638,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","con tiempos de respuesta normales"],"fullName":"AttendanceStatsCalculator calculate con tiempos de respuesta normales debe detectar fullCompletion cuando todos los rounds están completos","status":"passed","title":"debe detectar fullCompletion cuando todos los rounds están completos","duration":0.14102300000000412,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","con tiempos de respuesta normales"],"fullName":"AttendanceStatsCalculator calculate con tiempos de respuesta normales debe detectar no fullCompletion cuando faltan rounds","status":"passed","title":"debe detectar no fullCompletion cuando faltan rounds","duration":0.13593099999999936,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","cálculo de certeza"],"fullName":"AttendanceStatsCalculator calculate cálculo de certeza debe dar alta certeza para tiempos consistentes en rango óptimo","status":"passed","title":"debe dar alta certeza para tiempos consistentes en rango óptimo","duration":0.2004440000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","cálculo de certeza"],"fullName":"AttendanceStatsCalculator calculate cálculo de certeza debe dar menor certeza para tiempos muy dispersos","status":"passed","title":"debe dar menor certeza para tiempos muy dispersos","duration":0.13672799999999086,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","cálculo de certeza"],"fullName":"AttendanceStatsCalculator calculate cálculo de certeza debe penalizar tiempos sospechosamente rápidos (<300ms)","status":"passed","title":"debe penalizar tiempos sospechosamente rápidos (<300ms)","duration":0.11636400000000435,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","cálculo de certeza"],"fullName":"AttendanceStatsCalculator calculate cálculo de certeza debe penalizar tiempos excesivamente lentos (>15000ms)","status":"passed","title":"debe penalizar tiempos excesivamente lentos (>15000ms)","duration":0.11414800000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","redondeo de valores"],"fullName":"AttendanceStatsCalculator calculate redondeo de valores debe redondear avg, stdDev, min, max a enteros","status":"passed","title":"debe redondear avg, stdDev, min, max a enteros","duration":0.26585099999999784,"failureMessages":[],"meta":{}}],"startTime":1766117617599,"endTime":1766117617602.2659,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/domain/services/__tests__/attendance-stats-calculator.service.test.ts"},{"assertionResults":[{"ancestorTitles":["EnrollmentFlowOrchestrator","attemptAccess","CheckEnrolado: User not enrolled"],"fullName":"EnrollmentFlowOrchestrator attemptAccess CheckEnrolado: User not enrolled returns REQUIRES_ENROLLMENT when user has no active devices","status":"passed","title":"returns REQUIRES_ENROLLMENT when user has no active devices","duration":1.463599000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","attemptAccess","CheckEnrolado: User not enrolled"],"fullName":"EnrollmentFlowOrchestrator attemptAccess CheckEnrolado: User not enrolled returns REQUIRES_ENROLLMENT with hasRevokedDevices=true when user has revoked devices","status":"passed","title":"returns REQUIRES_ENROLLMENT with hasRevokedDevices=true when user has revoked devices","duration":0.3334660000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","attemptAccess","EvaluarUnoAUno: User enrolled, evaluate 1:1"],"fullName":"EnrollmentFlowOrchestrator attemptAccess EvaluarUnoAUno: User enrolled, evaluate 1:1 returns ACCESS_GRANTED when device fingerprint matches","status":"passed","title":"returns ACCESS_GRANTED when device fingerprint matches","duration":0.26617499999998984,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","attemptAccess","EvaluarUnoAUno: User enrolled, evaluate 1:1"],"fullName":"EnrollmentFlowOrchestrator attemptAccess EvaluarUnoAUno: User enrolled, evaluate 1:1 returns REQUIRES_REENROLLMENT when device fingerprint does not match","status":"passed","title":"returns REQUIRES_REENROLLMENT when device fingerprint does not match","duration":0.7468549999999965,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","attemptAccess","EvaluarUnoAUno: User enrolled, evaluate 1:1"],"fullName":"EnrollmentFlowOrchestrator attemptAccess EvaluarUnoAUno: User enrolled, evaluate 1:1 returns REQUIRES_REENROLLMENT when user has multiple active devices","status":"passed","title":"returns REQUIRES_REENROLLMENT when user has multiple active devices","duration":0.7127949999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","attemptAccess","enrollment info accuracy"],"fullName":"EnrollmentFlowOrchestrator attemptAccess enrollment info accuracy correctly reports enrollment state","status":"passed","title":"correctly reports enrollment state","duration":0.27541800000000194,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","processEnrollmentConsent","consent rejected"],"fullName":"EnrollmentFlowOrchestrator processEnrollmentConsent consent rejected returns shouldProceed=false when consent rejected","status":"passed","title":"returns shouldProceed=false when consent rejected","duration":0.33226700000000164,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","processEnrollmentConsent","consent accepted"],"fullName":"EnrollmentFlowOrchestrator processEnrollmentConsent consent accepted returns shouldProceed=true when consent accepted","status":"passed","title":"returns shouldProceed=true when consent accepted","duration":0.23977900000001284,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","processEnrollmentConsent","consent accepted"],"fullName":"EnrollmentFlowOrchestrator processEnrollmentConsent consent accepted identifies devices to revoke when user has existing devices","status":"passed","title":"identifies devices to revoke when user has existing devices","duration":0.2964619999999911,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","processEnrollmentConsent","consent accepted"],"fullName":"EnrollmentFlowOrchestrator processEnrollmentConsent consent accepted returns undefined devicesToRevoke when user has no existing devices","status":"passed","title":"returns undefined devicesToRevoke when user has no existing devices","duration":0.1837459999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","needsEnrollment"],"fullName":"EnrollmentFlowOrchestrator needsEnrollment returns true when user is not enrolled","status":"passed","title":"returns true when user is not enrolled","duration":0.1912499999999966,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","needsEnrollment"],"fullName":"EnrollmentFlowOrchestrator needsEnrollment returns true when user needs re-enrollment","status":"passed","title":"returns true when user needs re-enrollment","duration":0.19110200000000077,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","needsEnrollment"],"fullName":"EnrollmentFlowOrchestrator needsEnrollment returns false when user has valid access","status":"passed","title":"returns false when user has valid access","duration":0.175690000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","workflow scenarios"],"fullName":"EnrollmentFlowOrchestrator workflow scenarios first-time enrollment flow","status":"passed","title":"first-time enrollment flow","duration":0.2192890000000034,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","workflow scenarios"],"fullName":"EnrollmentFlowOrchestrator workflow scenarios re-enrollment flow (new device)","status":"passed","title":"re-enrollment flow (new device)","duration":0.30694299999998975,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","workflow scenarios"],"fullName":"EnrollmentFlowOrchestrator workflow scenarios successful access flow","status":"passed","title":"successful access flow","duration":0.21255299999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","workflow scenarios"],"fullName":"EnrollmentFlowOrchestrator workflow scenarios consent rejection flow","status":"passed","title":"consent rejection flow","duration":0.1763820000000038,"failureMessages":[],"meta":{}}],"startTime":1766117614836,"endTime":1766117614842.307,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/application/orchestrators/__tests__/enrollment-flow.orchestrator.test.ts"},{"assertionResults":[{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","execute() - Listar dispositivos exitosamente"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos execute() - Listar dispositivos exitosamente Debe retornar lista de dispositivos activos del usuario","status":"passed","title":"Debe retornar lista de dispositivos activos del usuario","duration":2.6230079999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","execute() - Listar dispositivos exitosamente"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos execute() - Listar dispositivos exitosamente Debe retornar array vacío si el usuario no tiene dispositivos","status":"passed","title":"Debe retornar array vacío si el usuario no tiene dispositivos","duration":0.3452649999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","execute() - Listar dispositivos exitosamente"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos execute() - Listar dispositivos exitosamente Debe transformar correctamente los datos del dispositivo","status":"passed","title":"Debe transformar correctamente los datos del dispositivo","duration":0.7408390000000082,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Múltiples dispositivos"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Múltiples dispositivos Debe manejar correctamente 5 dispositivos","status":"passed","title":"Debe manejar correctamente 5 dispositivos","duration":0.4614689999999939,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Múltiples dispositivos"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Múltiples dispositivos Debe mantener el orden de los dispositivos del repository","status":"passed","title":"Debe mantener el orden de los dispositivos del repository","duration":0.23520600000000513,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Casos edge con fechas"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Casos edge con fechas Debe manejar dispositivo sin lastUsedAt (nunca usado después de enrollment)","status":"passed","title":"Debe manejar dispositivo sin lastUsedAt (nunca usado después de enrollment)","duration":0.18889500000000226,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Casos edge con fechas"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Casos edge con fechas Debe manejar correctamente timezone en fechas","status":"passed","title":"Debe manejar correctamente timezone en fechas","duration":0.21444599999999525,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Casos de uso reales"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Casos de uso reales Debe listar dispositivos para UI de gestión de usuario","status":"passed","title":"Debe listar dispositivos para UI de gestión de usuario","duration":0.2170759999999916,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Casos de uso reales"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Casos de uso reales Debe manejar nuevo usuario sin dispositivos enrolados","status":"passed","title":"Debe manejar nuevo usuario sin dispositivos enrolados","duration":0.181839999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Consistencia de datos"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Consistencia de datos Debe verificar que deviceCount coincide con el tamaño del array","status":"passed","title":"Debe verificar que deviceCount coincide con el tamaño del array","duration":0.19929999999999382,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Consistencia de datos"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Consistencia de datos Debe retornar estructura consistente incluso con array vacío","status":"passed","title":"Debe retornar estructura consistente incluso con array vacío","duration":0.1942849999999936,"failureMessages":[],"meta":{}}],"startTime":1766117612062,"endTime":1766117612068.1992,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/application/use-cases/__tests__/get-devices.use-case.test.ts"},{"assertionResults":[{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","execute() - Revocar dispositivo exitosamente"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos execute() - Revocar dispositivo exitosamente Debe revocar un dispositivo enrolled exitosamente","status":"passed","title":"Debe revocar un dispositivo enrolled exitosamente","duration":2.269112000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","execute() - Revocar dispositivo exitosamente"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos execute() - Revocar dispositivo exitosamente Debe usar reason por defecto si no se proporciona","status":"passed","title":"Debe usar reason por defecto si no se proporciona","duration":0.35654399999999953,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Validaciones de seguridad"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Validaciones de seguridad Debe lanzar error si el dispositivo no existe","status":"passed","title":"Debe lanzar error si el dispositivo no existe","duration":0.9926209999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Validaciones de seguridad"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Validaciones de seguridad Debe lanzar error si el dispositivo pertenece a otro usuario","status":"passed","title":"Debe lanzar error si el dispositivo pertenece a otro usuario","duration":0.303206000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Validaciones de seguridad"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Validaciones de seguridad Debe lanzar error si el dispositivo ya está revocado","status":"passed","title":"Debe lanzar error si el dispositivo ya está revocado","duration":0.30976900000000285,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Validaciones de seguridad"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Validaciones de seguridad Debe lanzar error si el estado es not_enrolled","status":"passed","title":"Debe lanzar error si el estado es not_enrolled","duration":0.290379999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Flujo completo con repository"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Flujo completo con repository Debe completar el flujo completo de revocación","status":"passed","title":"Debe completar el flujo completo de revocación","duration":0.3981859999999955,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Casos de uso reales"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Casos de uso reales Debe permitir revocar dispositivo perdido","status":"passed","title":"Debe permitir revocar dispositivo perdido","duration":0.29245400000000643,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Casos de uso reales"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Casos de uso reales Debe permitir revocar dispositivo robado","status":"passed","title":"Debe permitir revocar dispositivo robado","duration":0.27026999999999646,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Casos de uso reales"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Casos de uso reales Debe permitir revocación preventiva antes de vender dispositivo","status":"passed","title":"Debe permitir revocación preventiva antes de vender dispositivo","duration":0.19030899999999917,"failureMessages":[],"meta":{}}],"startTime":1766117614981,"endTime":1766117614987.1904,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/application/use-cases/__tests__/revoke-device.use-case.test.ts"},{"assertionResults":[{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","authorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) authorized AAGUIDs accepts Windows Hello AAGUID","status":"passed","title":"accepts Windows Hello AAGUID","duration":6.275593999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","authorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) authorized AAGUIDs accepts Google Password Manager AAGUID","status":"passed","title":"accepts Google Password Manager AAGUID","duration":6.308774,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","authorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) authorized AAGUIDs accepts iCloud Keychain AAGUID","status":"passed","title":"accepts iCloud Keychain AAGUID","duration":0.9721279999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","authorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) authorized AAGUIDs accepts Samsung Pass AAGUID","status":"passed","title":"accepts Samsung Pass AAGUID","duration":0.7841319999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","authorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) authorized AAGUIDs accepts uppercase AAGUID (case insensitive)","status":"passed","title":"accepts uppercase AAGUID (case insensitive)","duration":0.8016230000000064,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","unauthorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) unauthorized AAGUIDs rejects unknown AAGUID","status":"passed","title":"rejects unknown AAGUID","duration":0.9136029999999948,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","unauthorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) unauthorized AAGUIDs rejects NULL AAGUID when allowNull is false","status":"passed","title":"rejects NULL AAGUID when allowNull is false","duration":0.8017120000000091,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","utility methods"],"fullName":"AaguidValidationService when validation is enabled (default) utility methods isEnabled returns true when validation is enabled","status":"passed","title":"isEnabled returns true when validation is enabled","duration":0.7703459999999893,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","utility methods"],"fullName":"AaguidValidationService when validation is enabled (default) utility methods getAuthorizedAaguids returns list of whitelisted AAGUIDs","status":"passed","title":"getAuthorizedAaguids returns list of whitelisted AAGUIDs","duration":0.9213829999999916,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is disabled"],"fullName":"AaguidValidationService when validation is disabled accepts any AAGUID when disabled","status":"passed","title":"accepts any AAGUID when disabled","duration":0.8446949999999731,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is disabled"],"fullName":"AaguidValidationService when validation is disabled accepts NULL AAGUID when validation is disabled","status":"passed","title":"accepts NULL AAGUID when validation is disabled","duration":0.6911829999999952,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is disabled"],"fullName":"AaguidValidationService when validation is disabled isEnabled returns false when validation is disabled","status":"passed","title":"isEnabled returns false when validation is disabled","duration":0.7086979999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when allowNull is true"],"fullName":"AaguidValidationService when allowNull is true accepts NULL AAGUID when allowNull is true","status":"passed","title":"accepts NULL AAGUID when allowNull is true","duration":0.7967260000000067,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when allowNull is true"],"fullName":"AaguidValidationService when allowNull is true still rejects unknown non-null AAGUIDs","status":"passed","title":"still rejects unknown non-null AAGUIDs","duration":0.7313929999999971,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when allowUnknown is true (permissive mode)"],"fullName":"AaguidValidationService when allowUnknown is true (permissive mode) accepts unknown AAGUID with permissive mode enabled","status":"passed","title":"accepts unknown AAGUID with permissive mode enabled","duration":0.7861159999999927,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when allowUnknown is true (permissive mode)"],"fullName":"AaguidValidationService when allowUnknown is true (permissive mode) still validates known AAGUIDs normally","status":"passed","title":"still validates known AAGUIDs normally","duration":0.7001080000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when allowUnknown is true (permissive mode)"],"fullName":"AaguidValidationService when allowUnknown is true (permissive mode) still rejects NULL AAGUID when allowNull is false","status":"passed","title":"still rejects NULL AAGUID when allowNull is false","duration":0.7266329999999925,"failureMessages":[],"meta":{}}],"startTime":1766117617020,"endTime":1766117617044.7266,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/domain/services/__tests__/aaguid-validation.service.test.ts"},{"assertionResults":[{"ancestorTitles":["OneToOnePolicyService","validate","compliant scenarios (no violations)"],"fullName":"OneToOnePolicyService validate compliant scenarios (no violations) returns compliant when no existing devices","status":"passed","title":"returns compliant when no existing devices","duration":1.5578629999999976,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","validate","compliant scenarios (no violations)"],"fullName":"OneToOnePolicyService validate compliant scenarios (no violations) returns compliant when device exists but is inactive","status":"passed","title":"returns compliant when device exists but is inactive","duration":0.33713400000000604,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","validate","compliant scenarios (no violations)"],"fullName":"OneToOnePolicyService validate compliant scenarios (no violations) returns compliant when device is active for same user (re-validation)","status":"passed","title":"returns compliant when device is active for same user (re-validation)","duration":0.33881500000001097,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","validate","device conflict (device enrolled by another user)"],"fullName":"OneToOnePolicyService validate device conflict (device enrolled by another user) detects device conflict when device is active for different user","status":"passed","title":"detects device conflict when device is active for different user","duration":0.6276709999999923,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","validate","user conflict (user has other devices)"],"fullName":"OneToOnePolicyService validate user conflict (user has other devices) detects user conflict when user has other active devices","status":"passed","title":"detects user conflict when user has other active devices","duration":0.35142199999999946,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","validate","user conflict (user has other devices)"],"fullName":"OneToOnePolicyService validate user conflict (user has other devices) detects multiple device conflict","status":"passed","title":"detects multiple device conflict","duration":0.9711850000000055,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","validate","combined conflicts"],"fullName":"OneToOnePolicyService validate combined conflicts detects both device and user conflicts simultaneously","status":"passed","title":"detects both device and user conflicts simultaneously","duration":0.3342739999999935,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","revokeViolations"],"fullName":"OneToOnePolicyService revokeViolations returns empty result when no violations exist","status":"passed","title":"returns empty result when no violations exist","duration":0.26795300000000566,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","revokeViolations"],"fullName":"OneToOnePolicyService revokeViolations revokes device from other user (device conflict by fingerprint)","status":"passed","title":"revokes device from other user (device conflict by fingerprint)","duration":0.6164289999999966,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","revokeViolations"],"fullName":"OneToOnePolicyService revokeViolations does not revoke when no other user has same fingerprint","status":"passed","title":"does not revoke when no other user has same fingerprint","duration":0.3129649999999913,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","revokeViolations"],"fullName":"OneToOnePolicyService revokeViolations revokes all user existing devices (user conflict)","status":"passed","title":"revokes all user existing devices (user conflict)","duration":0.284522999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","revokeViolations"],"fullName":"OneToOnePolicyService revokeViolations handles both conflicts in correct order","status":"passed","title":"handles both conflicts in correct order","duration":0.3033320000000117,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","isDuplicateEnrollment"],"fullName":"OneToOnePolicyService isDuplicateEnrollment returns true when device is active for same user","status":"passed","title":"returns true when device is active for same user","duration":0.2261969999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","isDuplicateEnrollment"],"fullName":"OneToOnePolicyService isDuplicateEnrollment returns false when device is inactive for same user","status":"passed","title":"returns false when device is inactive for same user","duration":0.2140449999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","isDuplicateEnrollment"],"fullName":"OneToOnePolicyService isDuplicateEnrollment returns false when device is active for different user","status":"passed","title":"returns false when device is active for different user","duration":0.20264600000000144,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","isDuplicateEnrollment"],"fullName":"OneToOnePolicyService isDuplicateEnrollment returns false when device does not exist","status":"passed","title":"returns false when device does not exist","duration":1.4008039999999937,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","integration scenarios"],"fullName":"OneToOnePolicyService integration scenarios workflow: validate -> revokeViolations for re-enrollment","status":"passed","title":"workflow: validate -> revokeViolations for re-enrollment","duration":0.26739599999999086,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","integration scenarios"],"fullName":"OneToOnePolicyService integration scenarios workflow: device takeover from another user by fingerprint","status":"passed","title":"workflow: device takeover from another user by fingerprint","duration":0.20563200000000847,"failureMessages":[],"meta":{}}],"startTime":1766117613558,"endTime":1766117613567.2673,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/domain/services/__tests__/one-to-one-policy.service.test.ts"},{"assertionResults":[{"ancestorTitles":["RestrictionService (Stub)","checkRestrictions"],"fullName":"RestrictionService (Stub) checkRestrictions returns blocked=false for any user (stub behavior)","status":"passed","title":"returns blocked=false for any user (stub behavior)","duration":0.7950680000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["RestrictionService (Stub)","checkRestrictions"],"fullName":"RestrictionService (Stub) checkRestrictions returns blocked=false for different users","status":"passed","title":"returns blocked=false for different users","duration":0.15598500000000115,"failureMessages":[],"meta":{}},{"ancestorTitles":["RestrictionService (Stub)","checkRestrictions"],"fullName":"RestrictionService (Stub) checkRestrictions implements IRestrictionService interface","status":"passed","title":"implements IRestrictionService interface","duration":0.0788130000000109,"failureMessages":[],"meta":{}},{"ancestorTitles":["RestrictionService (Stub)","stub documentation"],"fullName":"RestrictionService (Stub) stub documentation service has correct structure for future implementation","status":"passed","title":"service has correct structure for future implementation","duration":0.36629500000000803,"failureMessages":[],"meta":{}}],"startTime":1766117618525,"endTime":1766117618526.3662,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/domain/services/__tests__/restriction.service.test.ts"},{"assertionResults":[{"ancestorTitles":["DeviceStateMachine","canTransition","desde not_enrolled"],"fullName":"DeviceStateMachine canTransition desde not_enrolled permite transicion a pending (startEnrollment)","status":"passed","title":"permite transicion a pending (startEnrollment)","duration":0.7440540000000055,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde not_enrolled"],"fullName":"DeviceStateMachine canTransition desde not_enrolled NO permite transicion directa a enrolled","status":"passed","title":"NO permite transicion directa a enrolled","duration":0.13853899999999442,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde not_enrolled"],"fullName":"DeviceStateMachine canTransition desde not_enrolled NO permite transicion a revoked","status":"passed","title":"NO permite transicion a revoked","duration":0.12141400000000147,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde not_enrolled"],"fullName":"DeviceStateMachine canTransition desde not_enrolled NO permite quedarse en not_enrolled","status":"passed","title":"NO permite quedarse en not_enrolled","duration":0.11101900000001308,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde pending"],"fullName":"DeviceStateMachine canTransition desde pending permite transicion a enrolled (finishEnrollment OK)","status":"passed","title":"permite transicion a enrolled (finishEnrollment OK)","duration":0.11695100000000025,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde pending"],"fullName":"DeviceStateMachine canTransition desde pending permite transicion a not_enrolled (TTL expira)","status":"passed","title":"permite transicion a not_enrolled (TTL expira)","duration":0.10814100000000337,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde pending"],"fullName":"DeviceStateMachine canTransition desde pending permite transicion a pending (reintento de enrollment)","status":"passed","title":"permite transicion a pending (reintento de enrollment)","duration":0.11844200000000171,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde pending"],"fullName":"DeviceStateMachine canTransition desde pending NO permite transicion directa a revoked","status":"passed","title":"NO permite transicion directa a revoked","duration":0.11739400000000444,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde enrolled"],"fullName":"DeviceStateMachine canTransition desde enrolled permite transicion a revoked (revoke manual)","status":"passed","title":"permite transicion a revoked (revoke manual)","duration":0.10904100000000483,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde enrolled"],"fullName":"DeviceStateMachine canTransition desde enrolled permite transicion a pending (re-enrollment)","status":"passed","title":"permite transicion a pending (re-enrollment)","duration":0.10972300000000246,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde enrolled"],"fullName":"DeviceStateMachine canTransition desde enrolled NO permite transicion a not_enrolled","status":"passed","title":"NO permite transicion a not_enrolled","duration":0.10589099999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde enrolled"],"fullName":"DeviceStateMachine canTransition desde enrolled NO permite quedarse en enrolled","status":"passed","title":"NO permite quedarse en enrolled","duration":0.10875399999999047,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde revoked"],"fullName":"DeviceStateMachine canTransition desde revoked permite transicion a pending (nuevo enrollment)","status":"passed","title":"permite transicion a pending (nuevo enrollment)","duration":0.1250259999999912,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde revoked"],"fullName":"DeviceStateMachine canTransition desde revoked NO permite transicion directa a enrolled","status":"passed","title":"NO permite transicion directa a enrolled","duration":0.10964299999999128,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde revoked"],"fullName":"DeviceStateMachine canTransition desde revoked NO permite transicion a not_enrolled","status":"passed","title":"NO permite transicion a not_enrolled","duration":0.1087699999999927,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde revoked"],"fullName":"DeviceStateMachine canTransition desde revoked NO permite quedarse en revoked","status":"passed","title":"NO permite quedarse en revoked","duration":0.10356900000000735,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde estado invalido"],"fullName":"DeviceStateMachine canTransition desde estado invalido retorna false para estado origen inexistente","status":"passed","title":"retorna false para estado origen inexistente","duration":0.11172700000000191,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde estado invalido"],"fullName":"DeviceStateMachine canTransition desde estado invalido retorna false cuando origen es invalido sin importar destino","status":"passed","title":"retorna false cuando origen es invalido sin importar destino","duration":0.10314100000000792,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","getValidTransitions"],"fullName":"DeviceStateMachine getValidTransitions retorna [pending] desde not_enrolled","status":"passed","title":"retorna [pending] desde not_enrolled","duration":0.4551579999999973,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","getValidTransitions"],"fullName":"DeviceStateMachine getValidTransitions retorna [enrolled, not_enrolled, pending] desde pending","status":"passed","title":"retorna [enrolled, not_enrolled, pending] desde pending","duration":0.1267700000000076,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","getValidTransitions"],"fullName":"DeviceStateMachine getValidTransitions retorna [revoked, pending] desde enrolled","status":"passed","title":"retorna [revoked, pending] desde enrolled","duration":0.10830699999999638,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","getValidTransitions"],"fullName":"DeviceStateMachine getValidTransitions retorna [pending] desde revoked","status":"passed","title":"retorna [pending] desde revoked","duration":0.11469400000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","getValidTransitions"],"fullName":"DeviceStateMachine getValidTransitions retorna array vacio para estado invalido","status":"passed","title":"retorna array vacio para estado invalido","duration":0.1398929999999865,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","assertTransition"],"fullName":"DeviceStateMachine assertTransition no lanza error para transicion valida","status":"passed","title":"no lanza error para transicion valida","duration":0.5687399999999911,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","assertTransition"],"fullName":"DeviceStateMachine assertTransition lanza INVALID_TRANSITION para transicion invalida","status":"passed","title":"lanza INVALID_TRANSITION para transicion invalida","duration":0.21391700000000924,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","assertTransition"],"fullName":"DeviceStateMachine assertTransition incluye transiciones validas en mensaje de error","status":"passed","title":"incluye transiciones validas en mensaje de error","duration":0.19300899999998933,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","inferState"],"fullName":"DeviceStateMachine inferState retorna PENDING si hay challenge pendiente","status":"passed","title":"retorna PENDING si hay challenge pendiente","duration":0.1331959999999981,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","inferState"],"fullName":"DeviceStateMachine inferState retorna ENROLLED si hay dispositivo activo","status":"passed","title":"retorna ENROLLED si hay dispositivo activo","duration":0.1295430000000124,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","inferState"],"fullName":"DeviceStateMachine inferState retorna REVOKED si hay dispositivo revocado sin activo","status":"passed","title":"retorna REVOKED si hay dispositivo revocado sin activo","duration":0.0908719999999903,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","inferState"],"fullName":"DeviceStateMachine inferState retorna NOT_ENROLLED si no hay nada","status":"passed","title":"retorna NOT_ENROLLED si no hay nada","duration":0.08621200000000329,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","inferState"],"fullName":"DeviceStateMachine inferState prioriza PENDING sobre ENROLLED (challenge en curso)","status":"passed","title":"prioriza PENDING sobre ENROLLED (challenge en curso)","duration":0.08264499999999941,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","inferState"],"fullName":"DeviceStateMachine inferState prioriza ENROLLED sobre REVOKED","status":"passed","title":"prioriza ENROLLED sobre REVOKED","duration":0.08696100000000229,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","flujos completos"],"fullName":"DeviceStateMachine flujos completos flujo happy path: not_enrolled -> pending -> enrolled","status":"passed","title":"flujo happy path: not_enrolled -> pending -> enrolled","duration":1.3471420000000052,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","flujos completos"],"fullName":"DeviceStateMachine flujos completos flujo enrollment fallido: not_enrolled -> pending -> not_enrolled","status":"passed","title":"flujo enrollment fallido: not_enrolled -> pending -> not_enrolled","duration":0.10918100000000663,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","flujos completos"],"fullName":"DeviceStateMachine flujos completos flujo revoke y re-enrollment","status":"passed","title":"flujo revoke y re-enrollment","duration":0.0882440000000031,"failureMessages":[],"meta":{}}],"startTime":1766117616567,"endTime":1766117616575.0881,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/domain/state-machines/__tests__/device-state-machine.test.ts"},{"assertionResults":[{"ancestorTitles":["SessionStateMachine","isEnabled"],"fullName":"SessionStateMachine isEnabled retorna true solo para enrollment enrolled","status":"passed","title":"retorna true solo para enrollment enrolled","duration":0.7424330000000054,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","isEnabled"],"fullName":"SessionStateMachine isEnabled retorna false para enrollment not_enrolled","status":"passed","title":"retorna false para enrollment not_enrolled","duration":0.1396050000000031,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","isEnabled"],"fullName":"SessionStateMachine isEnabled retorna false para enrollment pending","status":"passed","title":"retorna false para enrollment pending","duration":0.1017970000000048,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","isEnabled"],"fullName":"SessionStateMachine isEnabled retorna false para enrollment revoked","status":"passed","title":"retorna false para enrollment revoked","duration":0.0996239999999915,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde no_session"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde no_session permite transicion a session_active (login)","status":"passed","title":"permite transicion a session_active (login)","duration":0.16357299999999952,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde no_session"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde no_session NO permite transicion directa a session_expired","status":"passed","title":"NO permite transicion directa a session_expired","duration":0.11535800000000052,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde no_session"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde no_session NO permite quedarse en no_session","status":"passed","title":"NO permite quedarse en no_session","duration":0.10872799999999927,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde session_active"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde session_active permite transicion a session_expired (TTL)","status":"passed","title":"permite transicion a session_expired (TTL)","duration":0.10965400000000614,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde session_active"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde session_active permite transicion a no_session (logout)","status":"passed","title":"permite transicion a no_session (logout)","duration":0.11567099999999186,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde session_active"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde session_active NO permite quedarse en session_active","status":"passed","title":"NO permite quedarse en session_active","duration":0.11324999999999363,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde session_expired"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde session_expired permite transicion a no_session (cleanup)","status":"passed","title":"permite transicion a no_session (cleanup)","duration":0.10851699999999198,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde session_expired"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde session_expired NO permite transicion directa a session_active","status":"passed","title":"NO permite transicion directa a session_active","duration":0.11292699999999911,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde session_expired"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde session_expired NO permite quedarse en session_expired","status":"passed","title":"NO permite quedarse en session_expired","duration":0.10438299999999856,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment NO enrolled)","cuando enrollment es not_enrolled"],"fullName":"SessionStateMachine canTransition (con enrollment NO enrolled) cuando enrollment es not_enrolled NO permite transicion de no_session a session_active","status":"passed","title":"NO permite transicion de no_session a session_active","duration":0.11468600000000606,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment NO enrolled)","cuando enrollment es not_enrolled"],"fullName":"SessionStateMachine canTransition (con enrollment NO enrolled) cuando enrollment es not_enrolled permite transicion de session_active a no_session (cleanup)","status":"passed","title":"permite transicion de session_active a no_session (cleanup)","duration":0.1039909999999935,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment NO enrolled)","cuando enrollment es not_enrolled"],"fullName":"SessionStateMachine canTransition (con enrollment NO enrolled) cuando enrollment es not_enrolled permite transicion de session_expired a no_session","status":"passed","title":"permite transicion de session_expired a no_session","duration":0.1065889999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment NO enrolled)","cuando enrollment es pending"],"fullName":"SessionStateMachine canTransition (con enrollment NO enrolled) cuando enrollment es pending NO permite iniciar sesion","status":"passed","title":"NO permite iniciar sesion","duration":0.10599499999999296,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment NO enrolled)","cuando enrollment es revoked"],"fullName":"SessionStateMachine canTransition (con enrollment NO enrolled) cuando enrollment es revoked NO permite iniciar sesion","status":"passed","title":"NO permite iniciar sesion","duration":0.103580000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment NO enrolled)","cuando enrollment es revoked"],"fullName":"SessionStateMachine canTransition (con enrollment NO enrolled) cuando enrollment es revoked permite limpiar sesion activa","status":"passed","title":"permite limpiar sesion activa","duration":0.10365499999998917,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","getValidTransitions","con enrollment enrolled"],"fullName":"SessionStateMachine getValidTransitions con enrollment enrolled retorna [session_active] desde no_session","status":"passed","title":"retorna [session_active] desde no_session","duration":0.49391400000000374,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","getValidTransitions","con enrollment enrolled"],"fullName":"SessionStateMachine getValidTransitions con enrollment enrolled retorna [session_expired, no_session] desde session_active","status":"passed","title":"retorna [session_expired, no_session] desde session_active","duration":0.1439979999999963,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","getValidTransitions","con enrollment enrolled"],"fullName":"SessionStateMachine getValidTransitions con enrollment enrolled retorna [no_session] desde session_expired","status":"passed","title":"retorna [no_session] desde session_expired","duration":0.12664100000000644,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","getValidTransitions","con enrollment NOT enrolled"],"fullName":"SessionStateMachine getValidTransitions con enrollment NOT enrolled retorna [] desde no_session (no puede iniciar)","status":"passed","title":"retorna [] desde no_session (no puede iniciar)","duration":0.17111099999999624,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","getValidTransitions","con enrollment NOT enrolled"],"fullName":"SessionStateMachine getValidTransitions con enrollment NOT enrolled retorna [no_session] desde session_active (solo cleanup)","status":"passed","title":"retorna [no_session] desde session_active (solo cleanup)","duration":0.15822799999999404,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","getValidTransitions","con enrollment NOT enrolled"],"fullName":"SessionStateMachine getValidTransitions con enrollment NOT enrolled retorna [no_session] desde session_expired","status":"passed","title":"retorna [no_session] desde session_expired","duration":0.1129889999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","assertTransition"],"fullName":"SessionStateMachine assertTransition no lanza error para transicion valida","status":"passed","title":"no lanza error para transicion valida","duration":0.565417999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","assertTransition"],"fullName":"SessionStateMachine assertTransition lanza INVALID_SESSION_TRANSITION para transicion invalida","status":"passed","title":"lanza INVALID_SESSION_TRANSITION para transicion invalida","duration":0.2034230000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","assertTransition"],"fullName":"SessionStateMachine assertTransition lanza SESSION_BLOCKED cuando enrollment no esta activo","status":"passed","title":"lanza SESSION_BLOCKED cuando enrollment no esta activo","duration":0.8538679999999914,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","assertTransition"],"fullName":"SessionStateMachine assertTransition mensaje de SESSION_BLOCKED incluye estado de enrollment","status":"passed","title":"mensaje de SESSION_BLOCKED incluye estado de enrollment","duration":0.16565799999999342,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","assertTransition"],"fullName":"SessionStateMachine assertTransition permite ir a no_session incluso con enrollment inactivo","status":"passed","title":"permite ir a no_session incluso con enrollment inactivo","duration":0.10394200000000353,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","flujos completos"],"fullName":"SessionStateMachine flujos completos flujo happy path: login -> logout","status":"passed","title":"flujo happy path: login -> logout","duration":0.14105099999999027,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","flujos completos"],"fullName":"SessionStateMachine flujos completos flujo expiracion: login -> expired -> cleanup","status":"passed","title":"flujo expiracion: login -> expired -> cleanup","duration":0.09241099999999847,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","flujos completos"],"fullName":"SessionStateMachine flujos completos flujo revoke durante sesion activa","status":"passed","title":"flujo revoke durante sesion activa","duration":0.07810399999999618,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","flujos completos"],"fullName":"SessionStateMachine flujos completos intento de login sin enrollment completo","status":"passed","title":"intento de login sin enrollment completo","duration":0.11778800000000444,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","integracion con EnrollmentStateMachine"],"fullName":"SessionStateMachine integracion con EnrollmentStateMachine solo enrolled permite iniciar sesion","status":"passed","title":"solo enrolled permite iniciar sesion","duration":0.1146839999999969,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","inferState - Inferir estado de session desde datos"],"fullName":"SessionStateMachine inferState - Inferir estado de session desde datos debe retornar NO_SESSION cuando no hay session key","status":"passed","title":"debe retornar NO_SESSION cuando no hay session key","duration":0.08696100000000229,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","inferState - Inferir estado de session desde datos"],"fullName":"SessionStateMachine inferState - Inferir estado de session desde datos debe retornar NO_SESSION incluso si sessionKeyExpired es true cuando no hay key","status":"passed","title":"debe retornar NO_SESSION incluso si sessionKeyExpired es true cuando no hay key","duration":0.05660299999999552,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","inferState - Inferir estado de session desde datos"],"fullName":"SessionStateMachine inferState - Inferir estado de session desde datos debe retornar SESSION_EXPIRED cuando hay key pero está expirada","status":"passed","title":"debe retornar SESSION_EXPIRED cuando hay key pero está expirada","duration":0.06021199999999283,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","inferState - Inferir estado de session desde datos"],"fullName":"SessionStateMachine inferState - Inferir estado de session desde datos debe retornar SESSION_ACTIVE cuando hay key y no está expirada","status":"passed","title":"debe retornar SESSION_ACTIVE cuando hay key y no está expirada","duration":0.05515199999999254,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","Edge cases - Estados inválidos"],"fullName":"SessionStateMachine Edge cases - Estados inválidos debe manejar estado inválido en canTransition","status":"passed","title":"debe manejar estado inválido en canTransition","duration":0.054887999999991166,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","Edge cases - Estados inválidos"],"fullName":"SessionStateMachine Edge cases - Estados inválidos debe retornar array vacío para getValidTransitions con estado inválido","status":"passed","title":"debe retornar array vacío para getValidTransitions con estado inválido","duration":0.06635799999999392,"failureMessages":[],"meta":{}}],"startTime":1766117615127,"endTime":1766117615135.1177,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/domain/state-machines/__tests__/session-state-machine.test.ts"},{"assertionResults":[{"ancestorTitles":["EcdhService - Tests de Key Exchange","generateKeyPair() - Generar par de claves efímeras"],"fullName":"EcdhService - Tests de Key Exchange generateKeyPair() - Generar par de claves efímeras Debe generar par de claves con publicKey en base64 y privateKey como Buffer","status":"passed","title":"Debe generar par de claves con publicKey en base64 y privateKey como Buffer","duration":1.107633000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","generateKeyPair() - Generar par de claves efímeras"],"fullName":"EcdhService - Tests de Key Exchange generateKeyPair() - Generar par de claves efímeras Debe generar pares de claves diferentes en cada llamada","status":"passed","title":"Debe generar pares de claves diferentes en cada llamada","duration":0.6338070000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","generateKeyPair() - Generar par de claves efímeras"],"fullName":"EcdhService - Tests de Key Exchange generateKeyPair() - Generar par de claves efímeras Debe generar claves privadas de longitud correcta para P-256","status":"passed","title":"Debe generar claves privadas de longitud correcta para P-256","duration":0.15624900000000252,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","generateKeyPair() - Generar par de claves efímeras"],"fullName":"EcdhService - Tests de Key Exchange generateKeyPair() - Generar par de claves efímeras Debe generar clave pública válida decodificable en base64","status":"passed","title":"Debe generar clave pública válida decodificable en base64","duration":0.5729440000000068,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","performKeyExchange() - Key exchange completo"],"fullName":"EcdhService - Tests de Key Exchange performKeyExchange() - Key exchange completo Debe realizar key exchange y retornar sharedSecret y serverPublicKey","status":"passed","title":"Debe realizar key exchange y retornar sharedSecret y serverPublicKey","duration":0.4359890000000064,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","performKeyExchange() - Key exchange completo"],"fullName":"EcdhService - Tests de Key Exchange performKeyExchange() - Key exchange completo Debe generar serverPublicKey diferente en cada key exchange (Perfect Forward Secrecy)","status":"passed","title":"Debe generar serverPublicKey diferente en cada key exchange (Perfect Forward Secrecy)","duration":0.3497470000000078,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","performKeyExchange() - Key exchange completo"],"fullName":"EcdhService - Tests de Key Exchange performKeyExchange() - Key exchange completo Debe producir mismo sharedSecret en cliente y servidor","status":"passed","title":"Debe producir mismo sharedSecret en cliente y servidor","duration":0.36338600000000554,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","performKeyExchange() - Key exchange completo"],"fullName":"EcdhService - Tests de Key Exchange performKeyExchange() - Key exchange completo Debe manejar clave pública del cliente en formato base64 válido","status":"passed","title":"Debe manejar clave pública del cliente en formato base64 válido","duration":0.2933609999999902,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","performKeyExchange() - Key exchange completo"],"fullName":"EcdhService - Tests de Key Exchange performKeyExchange() - Key exchange completo Debe lanzar error con clave pública inválida","status":"passed","title":"Debe lanzar error con clave pública inválida","duration":0.23302300000000287,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","performKeyExchange() - Key exchange completo"],"fullName":"EcdhService - Tests de Key Exchange performKeyExchange() - Key exchange completo Debe lanzar error con clave pública de longitud incorrecta","status":"passed","title":"Debe lanzar error con clave pública de longitud incorrecta","duration":0.23023200000000088,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","Vectores de prueba con valores determinísticos"],"fullName":"EcdhService - Tests de Key Exchange Vectores de prueba con valores determinísticos Debe producir sharedSecret que cliente puede verificar independientemente","status":"passed","title":"Debe producir sharedSecret que cliente puede verificar independientemente","duration":0.32908700000000124,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","Seguridad y validaciones"],"fullName":"EcdhService - Tests de Key Exchange Seguridad y validaciones Debe usar curva P-256 (prime256v1)","status":"passed","title":"Debe usar curva P-256 (prime256v1)","duration":0.23624399999999923,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","Seguridad y validaciones"],"fullName":"EcdhService - Tests de Key Exchange Seguridad y validaciones Debe generar sharedSecret de 32 bytes (256 bits)","status":"passed","title":"Debe generar sharedSecret de 32 bytes (256 bits)","duration":0.21751199999999926,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","Seguridad y validaciones"],"fullName":"EcdhService - Tests de Key Exchange Seguridad y validaciones Debe generar sharedSecret con alta entropía (no todos ceros)","status":"passed","title":"Debe generar sharedSecret con alta entropía (no todos ceros)","duration":0.29509799999999586,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","Interoperabilidad con cliente frontend"],"fullName":"EcdhService - Tests de Key Exchange Interoperabilidad con cliente frontend Debe producir resultado compatible con Web Crypto API del frontend","status":"passed","title":"Debe producir resultado compatible con Web Crypto API del frontend","duration":0.392871999999997,"failureMessages":[],"meta":{}}],"startTime":1766117615545,"endTime":1766117615550.3928,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/infrastructure/crypto/__tests__/ecdh.service.test.ts"},{"assertionResults":[{"ancestorTitles":["Fido2Service - Tests de WebAuthn","generateRegistrationOptions() - Generar challenge de registro"],"fullName":"Fido2Service - Tests de WebAuthn generateRegistrationOptions() - Generar challenge de registro Debe generar opciones de registro con datos del usuario","status":"passed","title":"Debe generar opciones de registro con datos del usuario","duration":2.8127950000000084,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","generateRegistrationOptions() - Generar challenge de registro"],"fullName":"Fido2Service - Tests de WebAuthn generateRegistrationOptions() - Generar challenge de registro Debe configurar authenticatorSelection para platform authenticator","status":"passed","title":"Debe configurar authenticatorSelection para platform authenticator","duration":3.8619239999999877,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","generateRegistrationOptions() - Generar challenge de registro"],"fullName":"Fido2Service - Tests de WebAuthn generateRegistrationOptions() - Generar challenge de registro Debe excluir credenciales existentes para evitar duplicados","status":"passed","title":"Debe excluir credenciales existentes para evitar duplicados","duration":1.8527310000000057,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","generateRegistrationOptions() - Generar challenge de registro"],"fullName":"Fido2Service - Tests de WebAuthn generateRegistrationOptions() - Generar challenge de registro Debe soportar algoritmos ES256 (-7) y RS256 (-257)","status":"passed","title":"Debe soportar algoritmos ES256 (-7) y RS256 (-257)","duration":0.5508049999999969,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","generateRegistrationOptions() - Generar challenge de registro"],"fullName":"Fido2Service - Tests de WebAuthn generateRegistrationOptions() - Generar challenge de registro Debe configurar timeout de 5 minutos (300000ms)","status":"passed","title":"Debe configurar timeout de 5 minutos (300000ms)","duration":0.42150000000000887,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","verifyRegistration() - Verificar respuesta de registro"],"fullName":"Fido2Service - Tests de WebAuthn verifyRegistration() - Verificar respuesta de registro Debe verificar registro exitosamente","status":"passed","title":"Debe verificar registro exitosamente","duration":0.7461989999999901,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","verifyRegistration() - Verificar respuesta de registro"],"fullName":"Fido2Service - Tests de WebAuthn verifyRegistration() - Verificar respuesta de registro Debe rechazar registro con challenge incorrecto","status":"passed","title":"Debe rechazar registro con challenge incorrecto","duration":1.1444319999999948,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","verifyRegistration() - Verificar respuesta de registro"],"fullName":"Fido2Service - Tests de WebAuthn verifyRegistration() - Verificar respuesta de registro Debe requerir user verification","status":"passed","title":"Debe requerir user verification","duration":0.42748800000001097,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","extractCredentialInfo() - Extraer información de credencial"],"fullName":"Fido2Service - Tests de WebAuthn extractCredentialInfo() - Extraer información de credencial Debe extraer credentialId, publicKey, counter y aaguid","status":"passed","title":"Debe extraer credentialId, publicKey, counter y aaguid","duration":0.5290990000000022,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","extractCredentialInfo() - Extraer información de credencial"],"fullName":"Fido2Service - Tests de WebAuthn extractCredentialInfo() - Extraer información de credencial Debe lanzar error si falta registrationInfo","status":"passed","title":"Debe lanzar error si falta registrationInfo","duration":0.41402300000001446,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","extractCredentialInfo() - Extraer información de credencial"],"fullName":"Fido2Service - Tests de WebAuthn extractCredentialInfo() - Extraer información de credencial Debe lanzar error si falta credential.id","status":"passed","title":"Debe lanzar error si falta credential.id","duration":0.39907199999998966,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","generateAuthenticationOptions() - Generar challenge de autenticación"],"fullName":"Fido2Service - Tests de WebAuthn generateAuthenticationOptions() - Generar challenge de autenticación Debe generar opciones de autenticación con allowCredentials","status":"passed","title":"Debe generar opciones de autenticación con allowCredentials","duration":0.6895100000000127,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","verifyAuthentication() - Verificar respuesta de autenticación"],"fullName":"Fido2Service - Tests de WebAuthn verifyAuthentication() - Verificar respuesta de autenticación Debe verificar autenticación exitosamente","status":"passed","title":"Debe verificar autenticación exitosamente","duration":0.6558019999999942,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","Conversiones Base64URL y Uint8Array"],"fullName":"Fido2Service - Tests de WebAuthn Conversiones Base64URL y Uint8Array Debe convertir userId numérico a Uint8Array","status":"passed","title":"Debe convertir userId numérico a Uint8Array","duration":0.5670440000000099,"failureMessages":[],"meta":{}}],"startTime":1766117611915,"endTime":1766117611930.5671,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/infrastructure/crypto/__tests__/fido2.service.test.ts"},{"assertionResults":[{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Derivación con HkdfService (Backend)"],"fullName":"HKDF Compatibilidad Frontend-Backend Derivación con HkdfService (Backend) debe derivar session_key determinística con vector 1","status":"passed","title":"debe derivar session_key determinística con vector 1","duration":2.0879970000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Derivación con HkdfService (Backend)"],"fullName":"HKDF Compatibilidad Frontend-Backend Derivación con HkdfService (Backend) debe producir session_key diferente con vector 2 (diferente credentialId)","status":"passed","title":"debe producir session_key diferente con vector 2 (diferente credentialId)","duration":0.4017210000000091,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Compatibilidad con Web Crypto API (simulación)"],"fullName":"HKDF Compatibilidad Frontend-Backend Compatibilidad con Web Crypto API (simulación) HKDF nativo debe producir mismo resultado que HkdfService","status":"passed","title":"HKDF nativo debe producir mismo resultado que HkdfService","duration":6.85144600000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Compatibilidad con Web Crypto API (simulación)"],"fullName":"HKDF Compatibilidad Frontend-Backend Compatibilidad con Web Crypto API (simulación) info string debe formarse correctamente","status":"passed","title":"info string debe formarse correctamente","duration":0.13564499999999668,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Compatibilidad con Web Crypto API (simulación)"],"fullName":"HKDF Compatibilidad Frontend-Backend Compatibilidad con Web Crypto API (simulación) salt vacío debe ser equivalente entre Uint8Array y Buffer","status":"passed","title":"salt vacío debe ser equivalente entre Uint8Array y Buffer","duration":0.1181399999999968,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Documentación de Vectores de Prueba"],"fullName":"HKDF Compatibilidad Frontend-Backend Documentación de Vectores de Prueba debe documentar session_key esperada para vector 1","status":"passed","title":"debe documentar session_key esperada para vector 1","duration":0.3008339999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Edge Cases"],"fullName":"HKDF Compatibilidad Frontend-Backend Edge Cases debe manejar credentialId con caracteres especiales Base64","status":"passed","title":"debe manejar credentialId con caracteres especiales Base64","duration":0.19863399999999842,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Edge Cases"],"fullName":"HKDF Compatibilidad Frontend-Backend Edge Cases debe manejar credentialId largo","status":"passed","title":"debe manejar credentialId largo","duration":0.6000099999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Edge Cases"],"fullName":"HKDF Compatibilidad Frontend-Backend Edge Cases debe manejar sharedSecret de exactamente 32 bytes (P-256 ECDH)","status":"passed","title":"debe manejar sharedSecret de exactamente 32 bytes (P-256 ECDH)","duration":0.17128900000000158,"failureMessages":[],"meta":{}}],"startTime":1766117615819,"endTime":1766117615830.1714,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/infrastructure/crypto/__tests__/hkdf-compatibility.test.ts"},{"assertionResults":[{"ancestorTitles":["HkdfService","deriveSessionKey con credentialId binding"],"fullName":"HkdfService deriveSessionKey con credentialId binding debe derivar session_key de 32 bytes","status":"passed","title":"debe derivar session_key de 32 bytes","duration":1.6479439999999954,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveSessionKey con credentialId binding"],"fullName":"HkdfService deriveSessionKey con credentialId binding debe producir session_keys diferentes para diferentes credentialId","status":"passed","title":"debe producir session_keys diferentes para diferentes credentialId","duration":0.29910599999999476,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveSessionKey con credentialId binding"],"fullName":"HkdfService deriveSessionKey con credentialId binding debe producir session_key idéntica para mismo sharedSecret y credentialId","status":"passed","title":"debe producir session_key idéntica para mismo sharedSecret y credentialId","duration":0.23459599999999625,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveSessionKey con credentialId binding"],"fullName":"HkdfService deriveSessionKey con credentialId binding debe producir session_keys diferentes para diferentes sharedSecret","status":"passed","title":"debe producir session_keys diferentes para diferentes sharedSecret","duration":0.1950080000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveHandshakeSecret"],"fullName":"HkdfService deriveHandshakeSecret debe derivar handshake_secret de 32 bytes","status":"passed","title":"debe derivar handshake_secret de 32 bytes","duration":0.3461200000000133,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveHandshakeSecret"],"fullName":"HkdfService deriveHandshakeSecret debe producir secrets diferentes para diferentes usuarios","status":"passed","title":"debe producir secrets diferentes para diferentes usuarios","duration":0.293974999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveHandshakeSecret"],"fullName":"HkdfService deriveHandshakeSecret debe ser determinístico para mismo credentialId y userId","status":"passed","title":"debe ser determinístico para mismo credentialId y userId","duration":0.2850609999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveKey - Derivación genérica"],"fullName":"HkdfService deriveKey - Derivación genérica debe derivar clave de 32 bytes por defecto","status":"passed","title":"debe derivar clave de 32 bytes por defecto","duration":0.2160080000000022,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveKey - Derivación genérica"],"fullName":"HkdfService deriveKey - Derivación genérica debe derivar clave con longitud personalizada","status":"passed","title":"debe derivar clave con longitud personalizada","duration":0.22149799999999686,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveKey - Derivación genérica"],"fullName":"HkdfService deriveKey - Derivación genérica debe producir claves diferentes para diferentes contextos","status":"passed","title":"debe producir claves diferentes para diferentes contextos","duration":0.19512799999999686,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveKey - Derivación genérica"],"fullName":"HkdfService deriveKey - Derivación genérica debe ser determinístico para mismo ikm y contexto","status":"passed","title":"debe ser determinístico para mismo ikm y contexto","duration":0.18376700000000312,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","generateTotp - Generación TOTP"],"fullName":"HkdfService generateTotp - Generación TOTP debe generar TOTP de 6 dígitos","status":"passed","title":"debe generar TOTP de 6 dígitos","duration":0.43967999999999563,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","generateTotp - Generación TOTP"],"fullName":"HkdfService generateTotp - Generación TOTP debe generar TOTP con padding de ceros a la izquierda","status":"passed","title":"debe generar TOTP con padding de ceros a la izquierda","duration":0.18345500000000925,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","generateTotp - Generación TOTP"],"fullName":"HkdfService generateTotp - Generación TOTP debe generar diferentes TOTPs con diferentes time steps","status":"passed","title":"debe generar diferentes TOTPs con diferentes time steps","duration":0.16177700000000073,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","generateTotp - Generación TOTP"],"fullName":"HkdfService generateTotp - Generación TOTP debe ser consistente en el mismo periodo de tiempo","status":"passed","title":"debe ser consistente en el mismo periodo de tiempo","duration":0.20484600000000341,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","generateTotp - Generación TOTP"],"fullName":"HkdfService generateTotp - Generación TOTP debe generar TOTPs diferentes para secrets diferentes","status":"passed","title":"debe generar TOTPs diferentes para secrets diferentes","duration":0.5578909999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","validateTotp - Validación TOTP"],"fullName":"HkdfService validateTotp - Validación TOTP debe validar TOTP correcto en ventana actual","status":"passed","title":"debe validar TOTP correcto en ventana actual","duration":0.21005599999999447,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","validateTotp - Validación TOTP"],"fullName":"HkdfService validateTotp - Validación TOTP debe rechazar TOTP incorrecto","status":"passed","title":"debe rechazar TOTP incorrecto","duration":0.15726100000000542,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","validateTotp - Validación TOTP"],"fullName":"HkdfService validateTotp - Validación TOTP debe validar TOTP con ventana de tolerancia","status":"passed","title":"debe validar TOTP con ventana de tolerancia","duration":0.14432800000000157,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","validateTotp - Validación TOTP"],"fullName":"HkdfService validateTotp - Validación TOTP debe rechazar TOTP con secret diferente","status":"passed","title":"debe rechazar TOTP con secret diferente","duration":0.1511870000000073,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","validateTotp - Validación TOTP"],"fullName":"HkdfService validateTotp - Validación TOTP debe rechazar TOTP con formato inválido","status":"passed","title":"debe rechazar TOTP con formato inválido","duration":0.2444279999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","validateTotp - Validación TOTP"],"fullName":"HkdfService validateTotp - Validación TOTP debe manejar ventana de tolerancia de 0","status":"passed","title":"debe manejar ventana de tolerancia de 0","duration":0.1307379999999938,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Error handling y edge cases"],"fullName":"HkdfService Error handling y edge cases debe manejar Buffer vacío en deriveSessionKey","status":"passed","title":"debe manejar Buffer vacío en deriveSessionKey","duration":3.7765909999999963,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Error handling y edge cases"],"fullName":"HkdfService Error handling y edge cases debe manejar credentialId largo pero dentro del límite","status":"passed","title":"debe manejar credentialId largo pero dentro del límite","duration":0.2538019999999932,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Error handling y edge cases"],"fullName":"HkdfService Error handling y edge cases debe manejar userId = 0 en deriveHandshakeSecret","status":"passed","title":"debe manejar userId = 0 en deriveHandshakeSecret","duration":2.4440969999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Error handling y edge cases"],"fullName":"HkdfService Error handling y edge cases debe manejar userId negativo en deriveHandshakeSecret","status":"passed","title":"debe manejar userId negativo en deriveHandshakeSecret","duration":0.1976760000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Error handling y edge cases"],"fullName":"HkdfService Error handling y edge cases debe manejar context vacío en deriveKey","status":"passed","title":"debe manejar context vacío en deriveKey","duration":0.15048300000000836,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Error handling y edge cases"],"fullName":"HkdfService Error handling y edge cases debe generar TOTP válido con secret de 1 byte","status":"passed","title":"debe generar TOTP válido con secret de 1 byte","duration":0.13729000000000724,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Compatibilidad con masterSecret por defecto"],"fullName":"HkdfService Compatibilidad con masterSecret por defecto debe usar config.crypto.masterSecret si no se proporciona","status":"passed","title":"debe usar config.crypto.masterSecret si no se proporciona","duration":0.13781800000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Compatibilidad con masterSecret por defecto"],"fullName":"HkdfService Compatibilidad con masterSecret por defecto debe derivar claves consistentemente con masterSecret personalizado","status":"passed","title":"debe derivar claves consistentemente con masterSecret personalizado","duration":0.1822310000000016,"failureMessages":[],"meta":{}}],"startTime":1766117612983,"endTime":1766117612998.1821,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/infrastructure/crypto/__tests__/hkdf.service.test.ts"},{"assertionResults":[{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","create() - Crear nuevo dispositivo"],"fullName":"DeviceRepository - Tests Críticos de Persistencia create() - Crear nuevo dispositivo Debe crear un dispositivo nuevo con todos los campos","status":"passed","title":"Debe crear un dispositivo nuevo con todos los campos","duration":3.0187080000000037,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","create() - Crear nuevo dispositivo"],"fullName":"DeviceRepository - Tests Críticos de Persistencia create() - Crear nuevo dispositivo Debe usar valores por defecto para campos opcionales","status":"passed","title":"Debe usar valores por defecto para campos opcionales","duration":0.5755690000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findByCredentialId() - Buscar por credentialId"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findByCredentialId() - Buscar por credentialId Debe retornar dispositivo cuando existe y está activo","status":"passed","title":"Debe retornar dispositivo cuando existe y está activo","duration":0.5411310000000071,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findByCredentialId() - Buscar por credentialId"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findByCredentialId() - Buscar por credentialId Debe retornar null cuando el dispositivo no existe","status":"passed","title":"Debe retornar null cuando el dispositivo no existe","duration":0.23262600000001044,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findByUserId() - Buscar dispositivos de usuario"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findByUserId() - Buscar dispositivos de usuario Debe retornar array vacío si el usuario no tiene dispositivos","status":"passed","title":"Debe retornar array vacío si el usuario no tiene dispositivos","duration":0.2842990000000043,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findByUserId() - Buscar dispositivos de usuario"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findByUserId() - Buscar dispositivos de usuario Debe retornar múltiples dispositivos del usuario","status":"passed","title":"Debe retornar múltiples dispositivos del usuario","duration":0.8144220000000075,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","updateCounter() - Actualizar contador de firmas"],"fullName":"DeviceRepository - Tests Críticos de Persistencia updateCounter() - Actualizar contador de firmas Debe actualizar sign_count y last_used_at","status":"passed","title":"Debe actualizar sign_count y last_used_at","duration":0.4587609999999813,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","updateLastUsed() - Actualizar timestamp de uso"],"fullName":"DeviceRepository - Tests Críticos de Persistencia updateLastUsed() - Actualizar timestamp de uso Debe actualizar last_used_at a NOW()","status":"passed","title":"Debe actualizar last_used_at a NOW()","duration":0.40128600000002734,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","revoke() - Revocar dispositivo (soft delete)"],"fullName":"DeviceRepository - Tests Críticos de Persistencia revoke() - Revocar dispositivo (soft delete) Debe actualizar is_active = FALSE en transacción","status":"passed","title":"Debe actualizar is_active = FALSE en transacción","duration":0.48298500000001354,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findByCredentialIdIncludingInactive() - Buscar incluyendo inactivos"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findByCredentialIdIncludingInactive() - Buscar incluyendo inactivos Debe retornar dispositivo revocado cuando se busca con includeInactive","status":"passed","title":"Debe retornar dispositivo revocado cuando se busca con includeInactive","duration":1.618126000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","Mapeo de rows a Device"],"fullName":"DeviceRepository - Tests Críticos de Persistencia Mapeo de rows a Device Debe parsear transports JSON correctamente","status":"passed","title":"Debe parsear transports JSON correctamente","duration":0.21642800000000761,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","Mapeo de rows a Device"],"fullName":"DeviceRepository - Tests Críticos de Persistencia Mapeo de rows a Device Debe manejar transports null correctamente","status":"passed","title":"Debe manejar transports null correctamente","duration":0.1946399999999926,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findById() - Buscar dispositivo por ID"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findById() - Buscar dispositivo por ID Debe retornar dispositivo cuando existe","status":"passed","title":"Debe retornar dispositivo cuando existe","duration":0.27411299999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findById() - Buscar dispositivo por ID"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findById() - Buscar dispositivo por ID Debe retornar null si no existe","status":"passed","title":"Debe retornar null si no existe","duration":0.15165799999999763,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findByUserIdIncludingInactive() - Incluye dispositivos revocados"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findByUserIdIncludingInactive() - Incluye dispositivos revocados Debe retornar dispositivos activos e inactivos","status":"passed","title":"Debe retornar dispositivos activos e inactivos","duration":0.3908959999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","updateDeviceFingerprint() - Actualiza fingerprint del dispositivo"],"fullName":"DeviceRepository - Tests Críticos de Persistencia updateDeviceFingerprint() - Actualiza fingerprint del dispositivo Debe actualizar deviceFingerprint y last_used_at","status":"passed","title":"Debe actualizar deviceFingerprint y last_used_at","duration":0.33680000000001087,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","countByUserId() - Contar dispositivos activos"],"fullName":"DeviceRepository - Tests Críticos de Persistencia countByUserId() - Contar dispositivos activos Debe retornar número de dispositivos activos","status":"passed","title":"Debe retornar número de dispositivos activos","duration":0.3190919999999835,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","countByUserId() - Contar dispositivos activos"],"fullName":"DeviceRepository - Tests Críticos de Persistencia countByUserId() - Contar dispositivos activos Debe retornar 0 si no tiene dispositivos","status":"passed","title":"Debe retornar 0 si no tiene dispositivos","duration":0.19880900000001134,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","hasEnrolledDevices() - Verificar si tiene dispositivos"],"fullName":"DeviceRepository - Tests Críticos de Persistencia hasEnrolledDevices() - Verificar si tiene dispositivos Debe retornar true si tiene dispositivos","status":"passed","title":"Debe retornar true si tiene dispositivos","duration":0.16140799999999444,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","hasEnrolledDevices() - Verificar si tiene dispositivos"],"fullName":"DeviceRepository - Tests Críticos de Persistencia hasEnrolledDevices() - Verificar si tiene dispositivos Debe retornar false si no tiene dispositivos","status":"passed","title":"Debe retornar false si no tiene dispositivos","duration":0.13693499999999403,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","revokeAllByUserId() - Revocar todos los dispositivos del usuario"],"fullName":"DeviceRepository - Tests Críticos de Persistencia revokeAllByUserId() - Revocar todos los dispositivos del usuario Debe revocar todos los dispositivos activos en transacción","status":"passed","title":"Debe revocar todos los dispositivos activos en transacción","duration":0.5176629999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","revokeAllByUserId() - Revocar todos los dispositivos del usuario"],"fullName":"DeviceRepository - Tests Críticos de Persistencia revokeAllByUserId() - Revocar todos los dispositivos del usuario Debe retornar 0 si no hay dispositivos activos","status":"passed","title":"Debe retornar 0 si no hay dispositivos activos","duration":0.28102100000000974,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findActiveByDeviceFingerprint() - Buscar por fingerprint físico"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findActiveByDeviceFingerprint() - Buscar por fingerprint físico Debe retornar dispositivos activos con ese fingerprint","status":"passed","title":"Debe retornar dispositivos activos con ese fingerprint","duration":0.4012730000000033,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findActiveByDeviceFingerprint() - Buscar por fingerprint físico"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findActiveByDeviceFingerprint() - Buscar por fingerprint físico Debe retornar array vacío si no hay dispositivos con ese fingerprint","status":"passed","title":"Debe retornar array vacío si no hay dispositivos con ese fingerprint","duration":0.1812710000000095,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findActiveByDeviceFingerprint() - Buscar por fingerprint físico"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findActiveByDeviceFingerprint() - Buscar por fingerprint físico NO debe retornar dispositivos revocados aunque tengan el mismo fingerprint","status":"passed","title":"NO debe retornar dispositivos revocados aunque tengan el mismo fingerprint","duration":0.2173930000000155,"failureMessages":[],"meta":{}}],"startTime":1766117611406,"endTime":1766117611419.4014,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/infrastructure/repositories/__tests__/device.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["FinishEnrollmentController","handle() - Casos exitosos"],"fullName":"FinishEnrollmentController handle() - Casos exitosos Debe finalizar enrollment exitosamente sin revocaciones","status":"passed","title":"Debe finalizar enrollment exitosamente sin revocaciones","duration":2.634506000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Casos exitosos"],"fullName":"FinishEnrollmentController handle() - Casos exitosos Debe finalizar enrollment CON revocación de usuario previo","status":"passed","title":"Debe finalizar enrollment CON revocación de usuario previo","duration":0.9960869999999886,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Casos exitosos"],"fullName":"FinishEnrollmentController handle() - Casos exitosos Debe finalizar enrollment CON revocación de propios dispositivos","status":"passed","title":"Debe finalizar enrollment CON revocación de propios dispositivos","duration":0.4133939999999967,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Casos exitosos"],"fullName":"FinishEnrollmentController handle() - Casos exitosos Debe continuar enrollment aunque falle la revocación (best-effort)","status":"passed","title":"Debe continuar enrollment aunque falle la revocación (best-effort)","duration":0.5848450000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Validaciones de request"],"fullName":"FinishEnrollmentController handle() - Validaciones de request Debe retornar 401 si no hay usuario autenticado","status":"passed","title":"Debe retornar 401 si no hay usuario autenticado","duration":0.3963719999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Validaciones de request"],"fullName":"FinishEnrollmentController handle() - Validaciones de request Debe retornar 400 si falta credential","status":"passed","title":"Debe retornar 400 si falta credential","duration":0.6183819999999969,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Validaciones de request"],"fullName":"FinishEnrollmentController handle() - Validaciones de request Debe retornar 400 si falta deviceFingerprint","status":"passed","title":"Debe retornar 400 si falta deviceFingerprint","duration":0.37301800000000185,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Validaciones de request"],"fullName":"FinishEnrollmentController handle() - Validaciones de request Debe retornar 400 si faltan ambos campos","status":"passed","title":"Debe retornar 400 si faltan ambos campos","duration":0.2723979999999955,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe retornar 400 para CHALLENGE_NOT_FOUND","status":"passed","title":"Debe retornar 400 para CHALLENGE_NOT_FOUND","duration":4.164657999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe retornar 400 para CHALLENGE_EXPIRED","status":"passed","title":"Debe retornar 400 para CHALLENGE_EXPIRED","duration":0.4582419999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe retornar 400 para VERIFICATION_FAILED","status":"passed","title":"Debe retornar 400 para VERIFICATION_FAILED","duration":0.41497400000000084,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe retornar 409 para CREDENTIAL_ALREADY_EXISTS","status":"passed","title":"Debe retornar 409 para CREDENTIAL_ALREADY_EXISTS","duration":0.4049279999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe retornar 403 para AAGUID_NOT_AUTHORIZED","status":"passed","title":"Debe retornar 403 para AAGUID_NOT_AUTHORIZED","duration":0.4633400000000023,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe retornar 500 para errores genéricos","status":"passed","title":"Debe retornar 500 para errores genéricos","duration":0.45674099999999385,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe manejar errores que no son instancias de Error","status":"passed","title":"Debe manejar errores que no son instancias de Error","duration":0.3160270000000054,"failureMessages":[],"meta":{}}],"startTime":1766117612347,"endTime":1766117612360.316,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/presentation/controllers/__tests__/finish-enrollment.controller.test.ts"},{"assertionResults":[{"ancestorTitles":["RevokeDeviceController","handle() - Casos exitosos"],"fullName":"RevokeDeviceController handle() - Casos exitosos Debe revocar dispositivo exitosamente","status":"passed","title":"Debe revocar dispositivo exitosamente","duration":2.4518429999999967,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Casos exitosos"],"fullName":"RevokeDeviceController handle() - Casos exitosos Debe pasar el reason si viene en el body","status":"passed","title":"Debe pasar el reason si viene en el body","duration":0.3644620000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Validaciones de request"],"fullName":"RevokeDeviceController handle() - Validaciones de request Debe retornar 401 si no hay usuario autenticado","status":"passed","title":"Debe retornar 401 si no hay usuario autenticado","duration":0.4146339999999924,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Validaciones de request"],"fullName":"RevokeDeviceController handle() - Validaciones de request Debe retornar 400 si deviceId no es un número","status":"passed","title":"Debe retornar 400 si deviceId no es un número","duration":0.31557700000000466,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Manejo de errores del use case"],"fullName":"RevokeDeviceController handle() - Manejo de errores del use case Debe retornar 404 para DEVICE_NOT_FOUND","status":"passed","title":"Debe retornar 404 para DEVICE_NOT_FOUND","duration":0.3524309999999957,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Manejo de errores del use case"],"fullName":"RevokeDeviceController handle() - Manejo de errores del use case Debe retornar 403 para DEVICE_NOT_OWNED","status":"passed","title":"Debe retornar 403 para DEVICE_NOT_OWNED","duration":0.333311000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Manejo de errores del use case"],"fullName":"RevokeDeviceController handle() - Manejo de errores del use case Debe retornar 409 para DEVICE_ALREADY_REVOKED","status":"passed","title":"Debe retornar 409 para DEVICE_ALREADY_REVOKED","duration":0.30068800000000806,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Manejo de errores del use case"],"fullName":"RevokeDeviceController handle() - Manejo de errores del use case Debe retornar 500 para errores genéricos","status":"passed","title":"Debe retornar 500 para errores genéricos","duration":2.9134010000000075,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Manejo de errores del use case"],"fullName":"RevokeDeviceController handle() - Manejo de errores del use case Debe manejar errores que no son instancia de Error","status":"passed","title":"Debe manejar errores que no son instancia de Error","duration":0.4768720000000002,"failureMessages":[],"meta":{}}],"startTime":1766117618015,"endTime":1766117618023.4768,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/presentation/controllers/__tests__/revoke-device.controller.test.ts"},{"assertionResults":[{"ancestorTitles":["StartEnrollmentController","handle() - Casos exitosos"],"fullName":"StartEnrollmentController handle() - Casos exitosos Debe iniciar enrollment exitosamente con displayName del body","status":"passed","title":"Debe iniciar enrollment exitosamente con displayName del body","duration":2.5586739999999963,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Casos exitosos"],"fullName":"StartEnrollmentController handle() - Casos exitosos Debe usar nombreCompleto como displayName si no viene en body","status":"passed","title":"Debe usar nombreCompleto como displayName si no viene en body","duration":0.44599600000000805,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Casos exitosos"],"fullName":"StartEnrollmentController handle() - Casos exitosos Debe usar username como displayName si no hay nombreCompleto ni body","status":"passed","title":"Debe usar username como displayName si no hay nombreCompleto ni body","duration":0.3294350000000037,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Validaciones de autenticación"],"fullName":"StartEnrollmentController handle() - Validaciones de autenticación Debe retornar 401 si no hay usuario autenticado","status":"passed","title":"Debe retornar 401 si no hay usuario autenticado","duration":0.39169499999999857,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Validaciones de autenticación"],"fullName":"StartEnrollmentController handle() - Validaciones de autenticación Debe retornar 401 si request.user es null","status":"passed","title":"Debe retornar 401 si request.user es null","duration":0.31601999999999464,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"StartEnrollmentController handle() - Manejo de errores del use case Debe retornar 429 cuando hay penalización activa","status":"passed","title":"Debe retornar 429 cuando hay penalización activa","duration":0.44159299999999746,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"StartEnrollmentController handle() - Manejo de errores del use case Debe extraer waitMinutes de diferentes formatos de mensaje de penalización","status":"passed","title":"Debe extraer waitMinutes de diferentes formatos de mensaje de penalización","duration":0.34869900000001053,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"StartEnrollmentController handle() - Manejo de errores del use case Debe usar waitMinutes=0 si no se puede extraer del mensaje","status":"passed","title":"Debe usar waitMinutes=0 si no se puede extraer del mensaje","duration":0.3072999999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"StartEnrollmentController handle() - Manejo de errores del use case Debe retornar 500 para errores genéricos","status":"passed","title":"Debe retornar 500 para errores genéricos","duration":3.8979129999999884,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"StartEnrollmentController handle() - Manejo de errores del use case Debe manejar errores que no son instancias de Error","status":"passed","title":"Debe manejar errores que no son instancias de Error","duration":0.4758159999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Integración con el use case"],"fullName":"StartEnrollmentController handle() - Integración con el use case Debe pasar correctamente el userId convertido a número","status":"passed","title":"Debe pasar correctamente el userId convertido a número","duration":0.3277740000000051,"failureMessages":[],"meta":{}}],"startTime":1766117615266,"endTime":1766117615276.328,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/presentation/controllers/__tests__/start-enrollment.controller.test.ts"},{"assertionResults":[{"ancestorTitles":["PoolBalancer","Constructor y configuración"],"fullName":"PoolBalancer Constructor y configuración debería inicializar con configuración por defecto","status":"passed","title":"debería inicializar con configuración por defecto","duration":2.3082449999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","Constructor y configuración"],"fullName":"PoolBalancer Constructor y configuración debería aceptar configuración personalizada","status":"passed","title":"debería aceptar configuración personalizada","duration":0.20510200000001078,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","Constructor y configuración"],"fullName":"PoolBalancer Constructor y configuración debería permitir actualizar configuración en runtime","status":"passed","title":"debería permitir actualizar configuración en runtime","duration":0.14949699999999666,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular 10 falsos cuando hay 0 reales (minPoolSize=10)","status":"passed","title":"debería calcular 10 falsos cuando hay 0 reales (minPoolSize=10)","duration":0.15626999999997793,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular 5 falsos cuando hay 5 reales (minPoolSize=10)","status":"passed","title":"debería calcular 5 falsos cuando hay 5 reales (minPoolSize=10)","duration":0.11222599999999261,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular 0 falsos cuando hay >= minPoolSize reales","status":"passed","title":"debería calcular 0 falsos cuando hay >= minPoolSize reales","duration":0.14721399999999107,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería manejar valores negativos retornando 0","status":"passed","title":"debería manejar valores negativos retornando 0","duration":0.10990099999997938,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Agregar falsos"],"fullName":"PoolBalancer balance() - Agregar falsos debería agregar falsos cuando pool está vacío","status":"passed","title":"debería agregar falsos cuando pool está vacío","duration":1.630613000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Agregar falsos"],"fullName":"PoolBalancer balance() - Agregar falsos debería agregar falsos parciales cuando hay algunos reales","status":"passed","title":"debería agregar falsos parciales cuando hay algunos reales","duration":0.24353200000001607,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Agregar falsos"],"fullName":"PoolBalancer balance() - Agregar falsos debería generar encrypted falsos usando AesGcmService","status":"passed","title":"debería generar encrypted falsos usando AesGcmService","duration":0.4265100000000075,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Remover falsos"],"fullName":"PoolBalancer balance() - Remover falsos debería remover falsos cuando sobran","status":"passed","title":"debería remover falsos cuando sobran","duration":0.6002950000000169,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Remover falsos"],"fullName":"PoolBalancer balance() - Remover falsos debería remover todos los falsos cuando hay >= minPoolSize reales","status":"passed","title":"debería remover todos los falsos cuando hay >= minPoolSize reales","duration":0.22303100000002019,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Pool balanceado"],"fullName":"PoolBalancer balance() - Pool balanceado no debería hacer cambios si pool está balanceado","status":"passed","title":"no debería hacer cambios si pool está balanceado","duration":0.23480299999999943,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Pool balanceado"],"fullName":"PoolBalancer balance() - Pool balanceado no debería hacer cambios si hay solo reales >= minPoolSize","status":"passed","title":"no debería hacer cambios si hay solo reales >= minPoolSize","duration":0.16186300000001097,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() debería inyectar cantidad específica de falsos","status":"passed","title":"debería inyectar cantidad específica de falsos","duration":0.24342199999998115,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() no debería hacer nada si count es 0","status":"passed","title":"no debería hacer nada si count es 0","duration":0.1409609999999759,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() no debería hacer nada si count es negativo","status":"passed","title":"no debería hacer nada si count es negativo","duration":0.12297699999999168,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() debería usar el generador de falsos","status":"passed","title":"debería usar el generador de falsos","duration":0.17260400000000686,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","getPoolStats()"],"fullName":"PoolBalancer getPoolStats() debería retornar estadísticas del pool","status":"passed","title":"debería retornar estadísticas del pool","duration":0.20958799999999655,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","getConfig() y updateConfig()"],"fullName":"PoolBalancer getConfig() y updateConfig() getConfig debería retornar copia de la configuración","status":"passed","title":"getConfig debería retornar copia de la configuración","duration":0.13346599999999853,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","getConfig() y updateConfig()"],"fullName":"PoolBalancer getConfig() y updateConfig() updateConfig debería actualizar configuración","status":"passed","title":"updateConfig debería actualizar configuración","duration":0.12330199999999536,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","getConfig() y updateConfig()"],"fullName":"PoolBalancer getConfig() y updateConfig() updateConfig debería mantener otros valores no actualizados","status":"passed","title":"updateConfig debería mantener otros valores no actualizados","duration":0.10619199999999296,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","Integración - Escenarios reales"],"fullName":"PoolBalancer Integración - Escenarios reales debería manejar sesión que crece de 0 a 15 estudiantes","status":"passed","title":"debería manejar sesión que crece de 0 a 15 estudiantes","duration":0.19641599999999926,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","Integración - Escenarios reales"],"fullName":"PoolBalancer Integración - Escenarios reales debería manejar configuración dinámica durante operación","status":"passed","title":"debería manejar configuración dinámica durante operación","duration":0.14917500000001382,"failureMessages":[],"meta":{}}],"startTime":1766117612840,"endTime":1766117612849.1965,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/qr-projection/application/services/__tests__/pool-balancer.service.test.ts"},{"assertionResults":[{"ancestorTitles":["PayloadBuilder","generateNonce()"],"fullName":"PayloadBuilder generateNonce() debería generar nonce de 32 caracteres hex (16 bytes)","status":"passed","title":"debería generar nonce de 32 caracteres hex (16 bytes)","duration":1.7466849999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","generateNonce()"],"fullName":"PayloadBuilder generateNonce() debería generar nonces diferentes en cada llamada","status":"passed","title":"debería generar nonces diferentes en cada llamada","duration":0.3079409999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildStudentPayload()"],"fullName":"PayloadBuilder buildStudentPayload() debería construir payload con todos los campos","status":"passed","title":"debería construir payload con todos los campos","duration":0.2075710000000015,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildStudentPayload()"],"fullName":"PayloadBuilder buildStudentPayload() debería generar timestamp automático si no se provee","status":"passed","title":"debería generar timestamp automático si no se provee","duration":0.2709949999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildStudentPayload()"],"fullName":"PayloadBuilder buildStudentPayload() debería generar nonce automático si no se provee","status":"passed","title":"debería generar nonce automático si no se provee","duration":0.18919700000000716,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildStudentPayload()"],"fullName":"PayloadBuilder buildStudentPayload() debería usar nonce personalizado si se provee","status":"passed","title":"debería usar nonce personalizado si se provee","duration":0.16518700000000308,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildStudentPayload()"],"fullName":"PayloadBuilder buildStudentPayload() debería soportar múltiples rounds","status":"passed","title":"debería soportar múltiples rounds","duration":0.1663209999999964,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildStudentPayload()"],"fullName":"PayloadBuilder buildStudentPayload() debería soportar userId grande","status":"passed","title":"debería soportar userId grande","duration":0.13184500000001265,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildFakePayload()"],"fullName":"PayloadBuilder buildFakePayload() debería construir payload con uid=0 (honeypot)","status":"passed","title":"debería construir payload con uid=0 (honeypot)","duration":0.212853999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildFakePayload()"],"fullName":"PayloadBuilder buildFakePayload() debería generar timestamp y nonce automáticos","status":"passed","title":"debería generar timestamp y nonce automáticos","duration":0.4895450000000068,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildFakePayload()"],"fullName":"PayloadBuilder buildFakePayload() debería usar timestamp personalizado","status":"passed","title":"debería usar timestamp personalizado","duration":0.14154200000000117,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildFakePayload()"],"fullName":"PayloadBuilder buildFakePayload() debería usar nonce personalizado","status":"passed","title":"debería usar nonce personalizado","duration":0.18151100000000042,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería validar payload correcto","status":"passed","title":"debería validar payload correcto","duration":0.18243699999999308,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería rechazar payload sin versión","status":"passed","title":"debería rechazar payload sin versión","duration":0.12753800000000126,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería rechazar payload con versión incorrecta","status":"passed","title":"debería rechazar payload con versión incorrecta","duration":0.11987699999998824,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería rechazar payload sin sid","status":"passed","title":"debería rechazar payload sin sid","duration":0.15556000000000836,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería rechazar payload null","status":"passed","title":"debería rechazar payload null","duration":0.11744500000000357,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería rechazar payload undefined","status":"passed","title":"debería rechazar payload undefined","duration":0.12363399999999558,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería rechazar payload con tipo incorrecto","status":"passed","title":"debería rechazar payload con tipo incorrecto","duration":0.11043200000000297,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","toJsonString()"],"fullName":"PayloadBuilder toJsonString() debería serializar payload a JSON string","status":"passed","title":"debería serializar payload a JSON string","duration":0.12976000000000454,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","toJsonString()"],"fullName":"PayloadBuilder toJsonString() debería serializar payload fake (uid=0)","status":"passed","title":"debería serializar payload fake (uid=0)","duration":0.15670899999999222,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","fromJsonString()"],"fullName":"PayloadBuilder fromJsonString() debería deserializar JSON string válido","status":"passed","title":"debería deserializar JSON string válido","duration":0.17286400000000413,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","fromJsonString()"],"fullName":"PayloadBuilder fromJsonString() debería retornar null si JSON inválido","status":"passed","title":"debería retornar null si JSON inválido","duration":0.14635099999999568,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","fromJsonString()"],"fullName":"PayloadBuilder fromJsonString() debería retornar null si estructura incorrecta","status":"passed","title":"debería retornar null si estructura incorrecta","duration":0.12452000000000396,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","fromJsonString()"],"fullName":"PayloadBuilder fromJsonString() debería retornar null si falta campo requerido","status":"passed","title":"debería retornar null si falta campo requerido","duration":0.1135709999999932,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","fromJsonString()"],"fullName":"PayloadBuilder fromJsonString() debería manejar whitespace en JSON","status":"passed","title":"debería manejar whitespace en JSON","duration":0.13754500000000291,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","Integración buildStudentPayload() + toJsonString() + fromJsonString()"],"fullName":"PayloadBuilder Integración buildStudentPayload() + toJsonString() + fromJsonString() debería serializar y deserializar correctamente","status":"passed","title":"debería serializar y deserializar correctamente","duration":0.18986800000000414,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","Integración buildFakePayload() + serialización"],"fullName":"PayloadBuilder Integración buildFakePayload() + serialización debería mantener uid=0 después de serialización","status":"passed","title":"debería mantener uid=0 después de serialización","duration":0.7980710000000073,"failureMessages":[],"meta":{}}],"startTime":1766117613699,"endTime":1766117613706.798,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/qr-projection/domain/services/__tests__/payload-builder.service.test.ts"},{"assertionResults":[{"ancestorTitles":["RestrictionService","checkRestrictions() - STUB Implementation"],"fullName":"RestrictionService checkRestrictions() - STUB Implementation debería retornar blocked=false para cualquier usuario (stub)","status":"passed","title":"debería retornar blocked=false para cualquier usuario (stub)","duration":0.9099550000000107,"failureMessages":[],"meta":{}},{"ancestorTitles":["RestrictionService","checkRestrictions() - STUB Implementation"],"fullName":"RestrictionService checkRestrictions() - STUB Implementation debería retornar blocked=false para múltiples usuarios","status":"passed","title":"debería retornar blocked=false para múltiples usuarios","duration":0.20503800000000183,"failureMessages":[],"meta":{}},{"ancestorTitles":["RestrictionService","checkRestrictions() - STUB Implementation"],"fullName":"RestrictionService checkRestrictions() - STUB Implementation debería ser idempotente","status":"passed","title":"debería ser idempotente","duration":0.5047950000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["RestrictionService","checkRestrictions() - STUB Implementation"],"fullName":"RestrictionService checkRestrictions() - STUB Implementation debería manejar userId 0","status":"passed","title":"debería manejar userId 0","duration":0.12351699999999255,"failureMessages":[],"meta":{}},{"ancestorTitles":["RestrictionService","checkRestrictions() - STUB Implementation"],"fullName":"RestrictionService checkRestrictions() - STUB Implementation debería manejar userId negativo","status":"passed","title":"debería manejar userId negativo","duration":0.11433599999999444,"failureMessages":[],"meta":{}},{"ancestorTitles":["RestrictionService","checkRestrictions() - STUB Implementation"],"fullName":"RestrictionService checkRestrictions() - STUB Implementation debería manejar userId muy grande","status":"passed","title":"debería manejar userId muy grande","duration":0.11734500000000025,"failureMessages":[],"meta":{}},{"ancestorTitles":["RestrictionService","Interface IRestrictionService"],"fullName":"RestrictionService Interface IRestrictionService debería implementar la interfaz IRestrictionService","status":"passed","title":"debería implementar la interfaz IRestrictionService","duration":0.15243800000000363,"failureMessages":[],"meta":{}}],"startTime":1766117618404,"endTime":1766117618406.1523,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/restriction/application/services/__tests__/restriction.service.test.ts"},{"assertionResults":[{"ancestorTitles":["LoginEcdhUseCase","Casos de error"],"fullName":"LoginEcdhUseCase Casos de error debe lanzar error DEVICE_NOT_FOUND si dispositivo no existe","status":"passed","title":"debe lanzar error DEVICE_NOT_FOUND si dispositivo no existe","duration":2.034881999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Casos de error"],"fullName":"LoginEcdhUseCase Casos de error debe lanzar error DEVICE_NOT_OWNED si dispositivo pertenece a otro usuario","status":"passed","title":"debe lanzar error DEVICE_NOT_OWNED si dispositivo pertenece a otro usuario","duration":0.434543000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Casos de error"],"fullName":"LoginEcdhUseCase Casos de error debe manejar correctamente comparación de userId cuando device.userId es string","status":"passed","title":"debe manejar correctamente comparación de userId cuando device.userId es string","duration":0.42229900000000953,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Casos de error"],"fullName":"LoginEcdhUseCase Casos de error debe lanzar error SESSION_NOT_ALLOWED si dispositivo está revocado","status":"passed","title":"debe lanzar error SESSION_NOT_ALLOWED si dispositivo está revocado","duration":0.31764499999999884,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Casos de error"],"fullName":"LoginEcdhUseCase Casos de error debe lanzar error SESSION_NOT_ALLOWED si dispositivo está pending","status":"passed","title":"debe lanzar error SESSION_NOT_ALLOWED si dispositivo está pending","duration":0.2797529999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Flujo exitoso"],"fullName":"LoginEcdhUseCase Flujo exitoso debe derivar session_key con HKDF incluyendo credentialId","status":"passed","title":"debe derivar session_key con HKDF incluyendo credentialId","duration":1.7485120000000052,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Flujo exitoso"],"fullName":"LoginEcdhUseCase Flujo exitoso debe guardar session_key en Valkey con TTL de 7200 segundos (2 horas)","status":"passed","title":"debe guardar session_key en Valkey con TTL de 7200 segundos (2 horas)","duration":0.7844559999999916,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Flujo exitoso"],"fullName":"LoginEcdhUseCase Flujo exitoso debe generar TOTPu con handshake_secret del dispositivo","status":"passed","title":"debe generar TOTPu con handshake_secret del dispositivo","duration":0.2971509999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Flujo exitoso"],"fullName":"LoginEcdhUseCase Flujo exitoso debe actualizar last_used_at del dispositivo","status":"passed","title":"debe actualizar last_used_at del dispositivo","duration":0.3262100000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Flujo exitoso"],"fullName":"LoginEcdhUseCase Flujo exitoso debe retornar serverPublicKey, TOTPu y deviceId","status":"passed","title":"debe retornar serverPublicKey, TOTPu y deviceId","duration":0.3096270000000061,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Flujo exitoso"],"fullName":"LoginEcdhUseCase Flujo exitoso debe vincular session_key al dispositivo específico (1:1)","status":"passed","title":"debe vincular session_key al dispositivo específico (1:1)","duration":0.25697499999999707,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Integracion ECDH + HKDF"],"fullName":"LoginEcdhUseCase Integracion ECDH + HKDF debe usar sharedSecret de ECDH como input para HKDF","status":"passed","title":"debe usar sharedSecret de ECDH como input para HKDF","duration":0.6373329999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Integracion ECDH + HKDF"],"fullName":"LoginEcdhUseCase Integracion ECDH + HKDF debe derivar session_keys diferentes para diferentes credentialId (binding)","status":"passed","title":"debe derivar session_keys diferentes para diferentes credentialId (binding)","duration":0.42570500000000777,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Validacion de estado del dispositivo"],"fullName":"LoginEcdhUseCase Validacion de estado del dispositivo debe permitir login solo si dispositivo está enrolled","status":"passed","title":"debe permitir login solo si dispositivo está enrolled","duration":0.264246,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Validacion de estado del dispositivo"],"fullName":"LoginEcdhUseCase Validacion de estado del dispositivo debe rechazar login si dispositivo no está en estado válido","status":"passed","title":"debe rechazar login si dispositivo no está en estado válido","duration":0.4928429999999935,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Manejo de timestamps"],"fullName":"LoginEcdhUseCase Manejo de timestamps debe incluir createdAt en session_key guardada","status":"passed","title":"debe incluir createdAt en session_key guardada","duration":0.32670399999999233,"failureMessages":[],"meta":{}}],"startTime":1766117615678,"endTime":1766117615688.3267,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/session/application/use-cases/__tests__/login-ecdh.use-case.test.ts"},{"assertionResults":[{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","save() - Guardar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia save() - Guardar session_key Debe guardar session_key en Valkey con TTL por defecto (7200s)","status":"passed","title":"Debe guardar session_key en Valkey con TTL por defecto (7200s)","duration":2.5934110000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","save() - Guardar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia save() - Guardar session_key Debe guardar session_key con TTL personalizado","status":"passed","title":"Debe guardar session_key con TTL personalizado","duration":0.35981599999999503,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","save() - Guardar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia save() - Guardar session_key Debe serializar Buffer sessionKey como base64","status":"passed","title":"Debe serializar Buffer sessionKey como base64","duration":0.2714909999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","save() - Guardar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia save() - Guardar session_key Debe sobrescribir session_key existente (re-login)","status":"passed","title":"Debe sobrescribir session_key existente (re-login)","duration":0.30978600000000256,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","findByUserId() - Buscar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia findByUserId() - Buscar session_key Debe retornar session_key cuando existe","status":"passed","title":"Debe retornar session_key cuando existe","duration":0.4680039999999934,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","findByUserId() - Buscar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia findByUserId() - Buscar session_key Debe retornar null cuando no existe session_key","status":"passed","title":"Debe retornar null cuando no existe session_key","duration":0.23326299999999378,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","findByUserId() - Buscar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia findByUserId() - Buscar session_key Debe deserializar correctamente números desde strings","status":"passed","title":"Debe deserializar correctamente números desde strings","duration":0.36491900000000044,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","findByUserId() - Buscar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia findByUserId() - Buscar session_key Debe reconstruir Buffer desde base64 correctamente","status":"passed","title":"Debe reconstruir Buffer desde base64 correctamente","duration":0.30404900000000623,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","delete() - Eliminar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia delete() - Eliminar session_key Debe eliminar session_key de Valkey","status":"passed","title":"Debe eliminar session_key de Valkey","duration":0.2815619999999939,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","delete() - Eliminar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia delete() - Eliminar session_key Debe manejar eliminación de key inexistente sin error","status":"passed","title":"Debe manejar eliminación de key inexistente sin error","duration":0.6984250000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","buildKey() - Construcción de keys"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia buildKey() - Construcción de keys Debe construir key con formato correcto","status":"passed","title":"Debe construir key con formato correcto","duration":0.2919989999999899,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","buildKey() - Construcción de keys"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia buildKey() - Construcción de keys Debe generar keys únicas para diferentes usuarios","status":"passed","title":"Debe generar keys únicas para diferentes usuarios","duration":0.3803620000000052,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","Flujo completo: save -> find -> delete"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia Flujo completo: save -> find -> delete Debe completar ciclo de vida de session_key","status":"passed","title":"Debe completar ciclo de vida de session_key","duration":0.35747100000000387,"failureMessages":[],"meta":{}}],"startTime":1766117613129,"endTime":1766117613136.3804,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/session/infrastructure/repositories/__tests__/session-key.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["DecryptStage","Desencriptación con session_key del estudiante"],"fullName":"DecryptStage Desencriptación con session_key del estudiante usa session_key real cuando existe en Valkey","status":"passed","title":"usa session_key real cuando existe en Valkey","duration":2.874592000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Desencriptación con session_key del estudiante"],"fullName":"DecryptStage Desencriptación con session_key del estudiante desencripta correctamente StudentResponse con session_key real","status":"passed","title":"desencripta correctamente StudentResponse con session_key real","duration":0.44608399999999904,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Fallback a mock key cuando no existe session_key"],"fullName":"DecryptStage Fallback a mock key cuando no existe session_key usa fallbackAesGcmService cuando no hay session_key en Valkey","status":"passed","title":"usa fallbackAesGcmService cuando no hay session_key en Valkey","duration":0.36670099999999195,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Fallback a mock key cuando no existe session_key"],"fullName":"DecryptStage Fallback a mock key cuando no existe session_key desencripta correctamente con fallback en modo desarrollo","status":"passed","title":"desencripta correctamente con fallback en modo desarrollo","duration":0.3296320000000037,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Manejo de errores de formato y desencriptación"],"fullName":"DecryptStage Manejo de errores de formato y desencriptación retorna error INVALID_FORMAT si el payload no es válido","status":"passed","title":"retorna error INVALID_FORMAT si el payload no es válido","duration":0.3434120000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Manejo de errores de formato y desencriptación"],"fullName":"DecryptStage Manejo de errores de formato y desencriptación retorna error DECRYPTION_FAILED si no puede desencriptar","status":"passed","title":"retorna error DECRYPTION_FAILED si no puede desencriptar","duration":0.3811359999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Manejo de errores de formato y desencriptación"],"fullName":"DecryptStage Manejo de errores de formato y desencriptación retorna error DECRYPTION_FAILED si el JSON no es parseable","status":"passed","title":"retorna error DECRYPTION_FAILED si el JSON no es parseable","duration":0.3227110000000124,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","STUB_MODE: conversión de QRPayloadV1 a StudentResponse"],"fullName":"DecryptStage STUB_MODE: conversión de QRPayloadV1 a StudentResponse convierte QRPayloadV1 del servidor a StudentResponse en STUB_MODE","status":"passed","title":"convierte QRPayloadV1 del servidor a StudentResponse en STUB_MODE","duration":0.3141999999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","STUB_MODE: conversión de QRPayloadV1 a StudentResponse"],"fullName":"DecryptStage STUB_MODE: conversión de QRPayloadV1 a StudentResponse procesa StudentResponse normal en STUB_MODE sin conversión","status":"passed","title":"procesa StudentResponse normal en STUB_MODE sin conversión","duration":0.3139600000000087,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","STUB_MODE: conversión de QRPayloadV1 a StudentResponse"],"fullName":"DecryptStage STUB_MODE: conversión de QRPayloadV1 a StudentResponse solo convierte a StudentResponse si el payload es QRPayloadV1 válido","status":"passed","title":"solo convierte a StudentResponse si el payload es QRPayloadV1 válido","duration":0.34166799999999853,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Integración con SessionKeyQuery"],"fullName":"DecryptStage Integración con SessionKeyQuery llama findByUserId con el studentId correcto","status":"passed","title":"llama findByUserId con el studentId correcto","duration":0.3276869999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Integración con SessionKeyQuery"],"fullName":"DecryptStage Integración con SessionKeyQuery crea nueva instancia de AesGcmService con session_key específica","status":"passed","title":"crea nueva instancia de AesGcmService con session_key específica","duration":0.35310900000001766,"failureMessages":[],"meta":{}}],"startTime":1766117612209,"endTime":1766117612216.353,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/domain/validation-pipeline/stages/__tests__/decrypt.stage.test.ts"}]}
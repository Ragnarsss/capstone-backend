{"numTotalTestSuites":352,"numPassedTestSuites":352,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":729,"numPassedTests":727,"numFailedTests":0,"numPendingTests":2,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1766116807553,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso PASO 1: Debe iniciar enrollment y retornar challenge WebAuthn","status":"passed","title":"PASO 1: Debe iniciar enrollment y retornar challenge WebAuthn","duration":3.7732230000000015,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso PASO 2: Debe finalizar enrollment y registrar dispositivo","status":"passed","title":"PASO 2: Debe finalizar enrollment y registrar dispositivo","duration":1.140355999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso PASO 3: Debe generar session_key único durante enrollment","status":"passed","title":"PASO 3: Debe generar session_key único durante enrollment","duration":0.8382260000000201,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso ERROR: Debe lanzar error cuando falla la verificación de WebAuthn (catch block)","status":"passed","title":"ERROR: Debe lanzar error cuando falla la verificación de WebAuthn (catch block)","duration":2.6626449999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso ERROR: Debe lanzar error cuando verified=false","status":"passed","title":"ERROR: Debe lanzar error cuando verified=false","duration":0.5623960000000068,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso ERROR: Debe lanzar CHALLENGE_NOT_FOUND cuando no existe challenge","status":"passed","title":"ERROR: Debe lanzar CHALLENGE_NOT_FOUND cuando no existe challenge","duration":0.5146109999999737,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso ERROR: Debe lanzar CHALLENGE_EXPIRED cuando el challenge ha expirado","status":"passed","title":"ERROR: Debe lanzar CHALLENGE_EXPIRED cuando el challenge ha expirado","duration":0.5974520000000041,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso ERROR: Debe manejar error sin message (Unknown error)","status":"passed","title":"ERROR: Debe manejar error sin message (Unknown error)","duration":0.5440250000000049,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Enrollment Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Enrollment Exitoso ERROR: Debe lanzar error cuando AAGUID no está autorizado","status":"passed","title":"ERROR: Debe lanzar error cuando AAGUID no está autorizado","duration":0.5622889999999927,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Login ECDH Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Login ECDH Exitoso PASO 1: Debe establecer sesión con ECDH key exchange","status":"passed","title":"PASO 1: Debe establecer sesión con ECDH key exchange","duration":0.8252310000000023,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Login ECDH Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Login ECDH Exitoso PASO 2: Debe guardar nueva session_key en cada login","status":"passed","title":"PASO 2: Debe guardar nueva session_key en cada login","duration":0.586748,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Login ECDH Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Login ECDH Exitoso PASO 3: Debe generar diferentes session_keys en logins consecutivos","status":"passed","title":"PASO 3: Debe generar diferentes session_keys en logins consecutivos","duration":0.8840710000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Login ECDH Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Login ECDH Exitoso PASO 4: Debe fallar login con credentialId incorrecto","status":"passed","title":"PASO 4: Debe fallar login con credentialId incorrecto","duration":0.7755280000000084,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Flujo de Login ECDH Exitoso"],"fullName":"Flujo Completo: Enrollment + Login Flujo de Login ECDH Exitoso PASO 5: Debe fallar login si el dispositivo fue revocado","status":"passed","title":"PASO 5: Debe fallar login si el dispositivo fue revocado","duration":2.030635999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Validaciones de Seguridad"],"fullName":"Flujo Completo: Enrollment + Login Validaciones de Seguridad Debe rechazar login de dispositivo de otro usuario","status":"passed","title":"Debe rechazar login de dispositivo de otro usuario","duration":0.5392989999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Validaciones de Seguridad"],"fullName":"Flujo Completo: Enrollment + Login Validaciones de Seguridad Debe manejar correctamente userId como string (BUG-002)","status":"passed","title":"Debe manejar correctamente userId como string (BUG-002)","duration":0.5314589999999839,"failureMessages":[],"meta":{}},{"ancestorTitles":["Flujo Completo: Enrollment + Login","Start Enrollment con dispositivos existentes (excludeCredentials)"],"fullName":"Flujo Completo: Enrollment + Login Start Enrollment con dispositivos existentes (excludeCredentials) Debe incluir dispositivos existentes en excludeCredentials para evitar re-registro","status":"passed","title":"Debe incluir dispositivos existentes en excludeCredentials para evitar re-registro","duration":1.0203799999999887,"failureMessages":[],"meta":{}}],"startTime":1766116807749,"endTime":1766116807767.0203,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/__tests__/enrollment-login-flow.integration.test.ts"},{"assertionResults":[{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState returns BLOCKED when user has active restrictions","status":"passed","title":"returns BLOCKED when user has active restrictions","duration":2.41198,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState returns NOT_ENROLLED when user has no active device (REQUIRES_ENROLLMENT)","status":"passed","title":"returns NOT_ENROLLED when user has no active device (REQUIRES_ENROLLMENT)","duration":0.5027429999999953,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState returns NOT_ENROLLED with message when user violates 1:1 policy (REQUIRES_REENROLLMENT)","status":"passed","title":"returns NOT_ENROLLED with message when user violates 1:1 policy (REQUIRES_REENROLLMENT)","duration":0.5436570000000103,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState returns ENROLLED_NO_SESSION when user has device but no session (ACCESS_GRANTED)","status":"passed","title":"returns ENROLLED_NO_SESSION when user has device but no session (ACCESS_GRANTED)","duration":0.48275700000000654,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState returns READY when user has active session (ACCESS_GRANTED + session)","status":"passed","title":"returns READY when user has active session (ACCESS_GRANTED + session)","duration":0.3968070000000097,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState passes deviceFingerprint to orchestrator for 1:1 validation","status":"passed","title":"passes deviceFingerprint to orchestrator for 1:1 validation","duration":0.22361999999999682,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState includes device info when ACCESS_GRANTED","status":"passed","title":"includes device info when ACCESS_GRANTED","duration":0.25754499999999325,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","getState"],"fullName":"AccessGatewayService getState does not include message when state is not BLOCKED","status":"passed","title":"does not include message when state is not BLOCKED","duration":0.1840480000000042,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessGatewayService","idempotence"],"fullName":"AccessGatewayService idempotence returns same result for same user state","status":"passed","title":"returns same result for same user state","duration":0.23850900000000763,"failureMessages":[],"meta":{}}],"startTime":1766116812300,"endTime":1766116812305.2576,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/access/__tests__/access-gateway.service.test.ts"},{"assertionResults":[{"ancestorTitles":["AccessStateController","Validaciones de entrada"],"fullName":"AccessStateController Validaciones de entrada debería retornar 401 si no hay usuario autenticado","status":"passed","title":"debería retornar 401 si no hay usuario autenticado","duration":2.4369219999999956,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Validaciones de entrada"],"fullName":"AccessStateController Validaciones de entrada debería retornar 400 si falta deviceFingerprint","status":"passed","title":"debería retornar 400 si falta deviceFingerprint","duration":0.31651899999999955,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Validaciones de entrada"],"fullName":"AccessStateController Validaciones de entrada debería retornar 400 si deviceFingerprint es undefined","status":"passed","title":"debería retornar 400 si deviceFingerprint es undefined","duration":0.26974400000000287,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Casos de éxito - estados del sistema"],"fullName":"AccessStateController Casos de éxito - estados del sistema debería retornar estado BLOCKED si usuario está bloqueado","status":"passed","title":"debería retornar estado BLOCKED si usuario está bloqueado","duration":0.41212699999999813,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Casos de éxito - estados del sistema"],"fullName":"AccessStateController Casos de éxito - estados del sistema debería retornar estado NOT_ENROLLED con action=enroll","status":"passed","title":"debería retornar estado NOT_ENROLLED con action=enroll","duration":0.2756080000000054,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Casos de éxito - estados del sistema"],"fullName":"AccessStateController Casos de éxito - estados del sistema debería retornar estado ENROLLED_NO_SESSION con action=login y device","status":"passed","title":"debería retornar estado ENROLLED_NO_SESSION con action=login y device","duration":0.28773200000000543,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Casos de éxito - estados del sistema"],"fullName":"AccessStateController Casos de éxito - estados del sistema debería retornar estado READY con action=scan y device","status":"passed","title":"debería retornar estado READY con action=scan y device","duration":0.2646879999999925,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Casos de éxito - estados del sistema"],"fullName":"AccessStateController Casos de éxito - estados del sistema debería retornar estado NOT_ENROLLED con mensaje de re-enrollment","status":"passed","title":"debería retornar estado NOT_ENROLLED con mensaje de re-enrollment","duration":0.24692799999999693,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Manejo de errores internos"],"fullName":"AccessStateController Manejo de errores internos debería retornar 500 si el servicio lanza error","status":"passed","title":"debería retornar 500 si el servicio lanza error","duration":2.9151290000000074,"failureMessages":[],"meta":{}},{"ancestorTitles":["AccessStateController","Manejo de errores internos"],"fullName":"AccessStateController Manejo de errores internos debería retornar 500 si el servicio lanza error genérico","status":"passed","title":"debería retornar 500 si el servicio lanza error genérico","duration":0.5072790000000111,"failureMessages":[],"meta":{}}],"startTime":1766116813348,"endTime":1766116813356.5073,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/access/__tests__/access-state.controller.test.ts"},{"assertionResults":[{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt()"],"fullName":"AttendancePersistenceService saveValidationAttempt() debería crear y completar una nueva validación","status":"passed","title":"debería crear y completar una nueva validación","duration":3.0074710000000096,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt()"],"fullName":"AttendancePersistenceService saveValidationAttempt() debería completar una validación existente (sin crear nueva)","status":"passed","title":"debería completar una validación existente (sin crear nueva)","duration":0.5582720000000023,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt()"],"fullName":"AttendancePersistenceService saveValidationAttempt() NO debería fallar si sessionId no es numérico","status":"passed","title":"NO debería fallar si sessionId no es numérico","duration":1.2867859999999922,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt()"],"fullName":"AttendancePersistenceService saveValidationAttempt() NO debería fallar si no existe registración","status":"passed","title":"NO debería fallar si no existe registración","duration":0.41882900000000234,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult()"],"fullName":"AttendancePersistenceService saveAttendanceResult() debería guardar resultado PRESENT con certeza alta","status":"passed","title":"debería guardar resultado PRESENT con certeza alta","duration":0.4610500000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult()"],"fullName":"AttendancePersistenceService saveAttendanceResult() debería guardar resultado DOUBTFUL con certeza media","status":"passed","title":"debería guardar resultado DOUBTFUL con certeza media","duration":0.36595699999999454,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult()"],"fullName":"AttendancePersistenceService saveAttendanceResult() debería guardar resultado ABSENT con certeza baja","status":"passed","title":"debería guardar resultado ABSENT con certeza baja","duration":0.33510600000001034,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult()"],"fullName":"AttendancePersistenceService saveAttendanceResult() NO debería duplicar resultado si ya existe (idempotencia)","status":"passed","title":"NO debería duplicar resultado si ya existe (idempotencia)","duration":0.29480599999999413,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult()"],"fullName":"AttendancePersistenceService saveAttendanceResult() debería usar estadísticas reales desde validation_attempts","status":"passed","title":"debería usar estadísticas reales desde validation_attempts","duration":0.35088900000000933,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","markRegistrationComplete()"],"fullName":"AttendancePersistenceService markRegistrationComplete() debería marcar registración como completada","status":"passed","title":"debería marcar registración como completada","duration":0.48699200000000076,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","markRegistrationComplete()"],"fullName":"AttendancePersistenceService markRegistrationComplete() NO debería fallar si no existe registración","status":"passed","title":"NO debería fallar si no existe registración","duration":0.34735299999999825,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveCompleteAttendance() - operación atómica"],"fullName":"AttendancePersistenceService saveCompleteAttendance() - operación atómica debería guardar validación + resultado + marcar completado","status":"passed","title":"debería guardar validación + resultado + marcar completado","duration":1.1978579999999965,"failureMessages":[],"meta":{}}],"startTime":1766116809798,"endTime":1766116809807.1978,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/attendance-persistence.service.test.ts"},{"assertionResults":[{"ancestorTitles":["CompleteScanUseCase","execute() - Validación fallida"],"fullName":"CompleteScanUseCase execute() - Validación fallida debería retornar error si la validación falla por QR_NOT_FOUND","status":"passed","title":"debería retornar error si la validación falla por QR_NOT_FOUND","duration":1.622747000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Validación fallida"],"fullName":"CompleteScanUseCase execute() - Validación fallida debería retornar error si el QR ya fue consumido","status":"passed","title":"debería retornar error si el QR ya fue consumido","duration":0.3780139999999932,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Validación fallida"],"fullName":"CompleteScanUseCase execute() - Validación fallida debería retornar error si el usuario no coincide (USER_MISMATCH)","status":"passed","title":"debería retornar error si el usuario no coincide (USER_MISMATCH)","duration":0.37372799999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Validación exitosa pero falla markQRConsumed"],"fullName":"CompleteScanUseCase execute() - Validación exitosa pero falla markQRConsumed debería retornar error si markQRConsumed falla","status":"passed","title":"debería retornar error si markQRConsumed falla","duration":0.36662299999998993,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Validación exitosa pero falla markQRConsumed"],"fullName":"CompleteScanUseCase execute() - Validación exitosa pero falla markQRConsumed debería retornar error si markQRConsumed lanza excepción","status":"passed","title":"debería retornar error si markQRConsumed lanza excepción","duration":3.8262189999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Validación exitosa pero falla completeRound"],"fullName":"CompleteScanUseCase execute() - Validación exitosa pero falla completeRound debería retornar error si completeRound falla","status":"passed","title":"debería retornar error si completeRound falla","duration":0.6475240000000042,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Round parcial (no completó todos)"],"fullName":"CompleteScanUseCase execute() - Round parcial (no completó todos) debería retornar nextRound si completó round 1 de 3","status":"passed","title":"debería retornar nextRound si completó round 1 de 3","duration":2.1881060000000048,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Round parcial (no completó todos)"],"fullName":"CompleteScanUseCase execute() - Round parcial (no completó todos) debería retornar error parcial si falla generateAndPublish","status":"passed","title":"debería retornar error parcial si falla generateAndPublish","duration":0.4456830000000025,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","execute() - Asistencia completada (todos los rounds)"],"fullName":"CompleteScanUseCase execute() - Asistencia completada (todos los rounds) debería calcular stats y retornar isComplete=true","status":"passed","title":"debería calcular stats y retornar isComplete=true","duration":0.5053840000000207,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase","Persistencia opcional"],"fullName":"CompleteScanUseCase Persistencia opcional NO debería fallar si persistenceService no está configurado","status":"passed","title":"NO debería fallar si persistenceService no está configurado","duration":0.2655199999999809,"failureMessages":[],"meta":{}}],"startTime":1766116810373,"endTime":1766116810384.2656,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/complete-scan.usecase.test.ts"},{"assertionResults":[{"ancestorTitles":["RegistrationRepository","create()"],"fullName":"RegistrationRepository create() debería crear una registración con queue_position auto-calculado (primer estudiante)","status":"passed","title":"debería crear una registración con queue_position auto-calculado (primer estudiante)","duration":2.987099000000015,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","create()"],"fullName":"RegistrationRepository create() debería crear una registración con queue_position auto-calculado (segundo estudiante)","status":"passed","title":"debería crear una registración con queue_position auto-calculado (segundo estudiante)","duration":0.2136380000000031,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","create()"],"fullName":"RegistrationRepository create() debería crear registración con queue_position 5 cuando hay 4 estudiantes","status":"passed","title":"debería crear registración con queue_position 5 cuando hay 4 estudiantes","duration":0.16978300000002378,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","getById()"],"fullName":"RegistrationRepository getById() debería retornar una registración por ID","status":"passed","title":"debería retornar una registración por ID","duration":0.4346170000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","getById()"],"fullName":"RegistrationRepository getById() debería retornar null si no existe la registración","status":"passed","title":"debería retornar null si no existe la registración","duration":0.17092299999998772,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","getBySessionAndUser()"],"fullName":"RegistrationRepository getBySessionAndUser() debería retornar registración por sessionId y userId","status":"passed","title":"debería retornar registración por sessionId y userId","duration":0.32386900000000196,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","getBySessionAndUser()"],"fullName":"RegistrationRepository getBySessionAndUser() debería retornar null si no existe registración para esa combinación","status":"passed","title":"debería retornar null si no existe registración para esa combinación","duration":0.16667599999999538,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","updateStatus()"],"fullName":"RegistrationRepository updateStatus() debería actualizar el status a \"completed\"","status":"passed","title":"debería actualizar el status a \"completed\"","duration":0.2980620000000158,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","updateStatus()"],"fullName":"RegistrationRepository updateStatus() debería actualizar el status a \"cancelled\"","status":"passed","title":"debería actualizar el status a \"cancelled\"","duration":0.16437700000000177,"failureMessages":[],"meta":{}},{"ancestorTitles":["RegistrationRepository","updateStatus()"],"fullName":"RegistrationRepository updateStatus() debería retornar null si la registración no existe","status":"passed","title":"debería retornar null si la registración no existe","duration":0.14624699999998825,"failureMessages":[],"meta":{}}],"startTime":1766116812888,"endTime":1766116812894.1643,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/registration.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["ResultRepository","create()"],"fullName":"ResultRepository create() debería crear un resultado PRESENT con todas las métricas","status":"passed","title":"debería crear un resultado PRESENT con todas las métricas","duration":2.7401769999999885,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","create()"],"fullName":"ResultRepository create() debería crear un resultado DOUBTFUL con métricas parciales","status":"passed","title":"debería crear un resultado DOUBTFUL con métricas parciales","duration":0.26026099999998564,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","create()"],"fullName":"ResultRepository create() debería crear un resultado ABSENT","status":"passed","title":"debería crear un resultado ABSENT","duration":0.20544900000001576,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","create()"],"fullName":"ResultRepository create() debería crear un resultado ERROR","status":"passed","title":"debería crear un resultado ERROR","duration":0.18492599999999015,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","getByRegistration()"],"fullName":"ResultRepository getByRegistration() debería obtener resultado por registrationId","status":"passed","title":"debería obtener resultado por registrationId","duration":0.3241510000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","getByRegistration()"],"fullName":"ResultRepository getByRegistration() debería retornar null si no existe resultado","status":"passed","title":"debería retornar null si no existe resultado","duration":0.1253059999999948,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","listBySession()"],"fullName":"ResultRepository listBySession() debería listar todos los resultados de una sesión","status":"passed","title":"debería listar todos los resultados de una sesión","duration":0.5832929999999976,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","listBySession()"],"fullName":"ResultRepository listBySession() debería retornar array vacío si no hay resultados","status":"passed","title":"debería retornar array vacío si no hay resultados","duration":0.1515060000000119,"failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","countByStatus()"],"fullName":"ResultRepository countByStatus() debería contar resultados por estado final","status":"skipped","title":"debería contar resultados por estado final","failureMessages":[],"meta":{}},{"ancestorTitles":["ResultRepository","countByStatus()"],"fullName":"ResultRepository countByStatus() debería retornar contadores en 0 si no hay resultados","status":"skipped","title":"debería retornar contadores en 0 si no hay resultados","failureMessages":[],"meta":{}}],"startTime":1766116810532,"endTime":1766116810537.1516,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/result.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["SessionRepository","create()"],"fullName":"SessionRepository create() debería crear una sesión con maxRounds default 3","status":"passed","title":"debería crear una sesión con maxRounds default 3","duration":2.892713999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","create()"],"fullName":"SessionRepository create() debería crear una sesión con maxRounds personalizado","status":"passed","title":"debería crear una sesión con maxRounds personalizado","duration":0.44362700000000643,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","getById()"],"fullName":"SessionRepository getById() debería retornar una sesión por ID","status":"passed","title":"debería retornar una sesión por ID","duration":0.4082209999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","getById()"],"fullName":"SessionRepository getById() debería retornar null si no existe la sesión","status":"passed","title":"debería retornar null si no existe la sesión","duration":0.17854499999999973,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","getActiveByProfessor()"],"fullName":"SessionRepository getActiveByProfessor() debería retornar sesiones activas del profesor","status":"passed","title":"debería retornar sesiones activas del profesor","duration":0.3526039999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","getActiveByProfessor()"],"fullName":"SessionRepository getActiveByProfessor() debería retornar null si no hay sesiones activas","status":"passed","title":"debería retornar null si no hay sesiones activas","duration":0.16948999999999614,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","getActiveByRoom()"],"fullName":"SessionRepository getActiveByRoom() debería retornar sesiones activas en una sala","status":"passed","title":"debería retornar sesiones activas en una sala","duration":0.325255999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","getActiveByRoom()"],"fullName":"SessionRepository getActiveByRoom() debería retornar null si no hay sesiones en la sala","status":"passed","title":"debería retornar null si no hay sesiones en la sala","duration":0.17079500000002668,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","update()"],"fullName":"SessionRepository update() debería actualizar el status de una sesión","status":"passed","title":"debería actualizar el status de una sesión","duration":0.33680900000001657,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionRepository","update()"],"fullName":"SessionRepository update() debería retornar null si la sesión no existe","status":"passed","title":"debería retornar null si la sesión no existe","duration":0.1798780000000022,"failureMessages":[],"meta":{}}],"startTime":1766116812610,"endTime":1766116812616.337,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/session.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["validateStructureStage"],"fullName":"validateStructureStage debe pasar con estructura valida","status":"passed","title":"debe pasar con estructura valida","duration":0.8489920000000097,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStructureStage"],"fullName":"validateStructureStage debe fallar sin response","status":"passed","title":"debe fallar sin response","duration":0.11534700000001408,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStructureStage"],"fullName":"validateStructureStage debe fallar con version incorrecta","status":"passed","title":"debe fallar con version incorrecta","duration":0.08832400000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStructureStage"],"fullName":"validateStructureStage debe fallar con nonce de longitud incorrecta","status":"passed","title":"debe fallar con nonce de longitud incorrecta","duration":0.06780200000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateOwnershipStage"],"fullName":"validateOwnershipStage debe pasar cuando studentId coincide","status":"passed","title":"debe pasar cuando studentId coincide","duration":0.10852599999998347,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateOwnershipStage"],"fullName":"validateOwnershipStage debe fallar cuando studentId no coincide","status":"passed","title":"debe fallar cuando studentId no coincide","duration":0.10797099999999205,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateQRNotExpiredStage"],"fullName":"validateQRNotExpiredStage debe pasar con QR existente","status":"passed","title":"debe pasar con QR existente","duration":0.08280400000001009,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateQRNotExpiredStage"],"fullName":"validateQRNotExpiredStage debe fallar con QR inexistente","status":"passed","title":"debe fallar con QR inexistente","duration":0.08334400000001096,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateQRNotConsumedStage"],"fullName":"validateQRNotConsumedStage debe pasar con QR no consumido","status":"passed","title":"debe pasar con QR no consumido","duration":0.09522499999999923,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateQRNotConsumedStage"],"fullName":"validateQRNotConsumedStage debe fallar con QR consumido","status":"passed","title":"debe fallar con QR consumido","duration":0.09214099999999803,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentRegisteredStage"],"fullName":"validateStudentRegisteredStage debe pasar con estudiante registrado","status":"passed","title":"debe pasar con estudiante registrado","duration":0.08118299999998158,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentRegisteredStage"],"fullName":"validateStudentRegisteredStage debe fallar con estudiante no registrado","status":"passed","title":"debe fallar con estudiante no registrado","duration":0.07457600000000753,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentActiveStage"],"fullName":"validateStudentActiveStage debe pasar con status active","status":"passed","title":"debe pasar con status active","duration":0.08047300000001201,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentActiveStage"],"fullName":"validateStudentActiveStage debe fallar con status completed","status":"passed","title":"debe fallar con status completed","duration":0.08014400000001842,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentActiveStage"],"fullName":"validateStudentActiveStage debe fallar con status failed","status":"passed","title":"debe fallar con status failed","duration":0.11088499999999613,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentOwnsQRStage"],"fullName":"validateStudentOwnsQRStage debe pasar cuando nonce coincide","status":"passed","title":"debe pasar cuando nonce coincide","duration":0.08416299999998955,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateStudentOwnsQRStage"],"fullName":"validateStudentOwnsQRStage debe fallar cuando nonce no coincide","status":"passed","title":"debe fallar cuando nonce no coincide","duration":0.08177700000001664,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateRoundMatchStage"],"fullName":"validateRoundMatchStage debe pasar cuando round coincide","status":"passed","title":"debe pasar cuando round coincide","duration":0.10394700000000512,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateRoundMatchStage"],"fullName":"validateRoundMatchStage debe fallar cuando round ya fue completado","status":"passed","title":"debe fallar cuando round ya fue completado","duration":0.08216199999998253,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateRoundMatchStage"],"fullName":"validateRoundMatchStage debe fallar cuando round no ha sido alcanzado","status":"passed","title":"debe fallar cuando round no ha sido alcanzado","duration":0.07558299999999463,"failureMessages":[],"meta":{}}],"startTime":1766116813948,"endTime":1766116813950.1108,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/stages.test.ts"},{"assertionResults":[{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe pasar con TOTPu valido","status":"passed","title":"debe pasar con TOTPu valido","duration":2.7714459999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe fallar sin response desencriptada","status":"passed","title":"debe fallar sin response desencriptada","duration":0.19668799999999464,"failureMessages":[],"meta":{}},{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe fallar cuando falta TOTPu en el payload","status":"passed","title":"debe fallar cuando falta TOTPu en el payload","duration":0.1706530000000015,"failureMessages":[],"meta":{}},{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe fallar cuando session_key no existe en Valkey","status":"passed","title":"debe fallar cuando session_key no existe en Valkey","duration":0.16685300000000325,"failureMessages":[],"meta":{}},{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe fallar con TOTPu incorrecto","status":"passed","title":"debe fallar con TOTPu incorrecto","duration":0.3715800000000087,"failureMessages":[],"meta":{}},{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe validarse correctamente con diferentes session_keys","status":"passed","title":"debe validarse correctamente con diferentes session_keys","duration":0.5145120000000105,"failureMessages":[],"meta":{}},{"ancestorTitles":["TOTPValidationStage"],"fullName":"TOTPValidationStage debe rechazar TOTPu de otra sesion_key","status":"passed","title":"debe rechazar TOTPu de otra sesion_key","duration":0.27610200000000873,"failureMessages":[],"meta":{}}],"startTime":1766116813643,"endTime":1766116813647.5144,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/totp-validation.stage.test.ts"},{"assertionResults":[{"ancestorTitles":["ValidationRepository","create()"],"fullName":"ValidationRepository create() debería crear una validación con QR generado (estado inicial)","status":"passed","title":"debería crear una validación con QR generado (estado inicial)","duration":2.7778089999999906,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","create()"],"fullName":"ValidationRepository create() debería crear validaciones para múltiples rounds","status":"passed","title":"debería crear validaciones para múltiples rounds","duration":0.2886660000000063,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","complete()"],"fullName":"ValidationRepository complete() debería completar una validación exitosa","status":"passed","title":"debería completar una validación exitosa","duration":0.5749820000000057,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","complete()"],"fullName":"ValidationRepository complete() debería completar una validación fallida","status":"passed","title":"debería completar una validación fallida","duration":0.1881580000000156,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","complete()"],"fullName":"ValidationRepository complete() debería completar una validación con timeout","status":"passed","title":"debería completar una validación con timeout","duration":0.1406859999999881,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","complete()"],"fullName":"ValidationRepository complete() debería retornar null si no existe la validación","status":"passed","title":"debería retornar null si no existe la validación","duration":0.1482650000000092,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","incrementFailedAttempts()"],"fullName":"ValidationRepository incrementFailedAttempts() debería incrementar contador de intentos fallidos","status":"passed","title":"debería incrementar contador de intentos fallidos","duration":0.23531900000000405,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","incrementFailedAttempts()"],"fullName":"ValidationRepository incrementFailedAttempts() debería retornar 0 si no existe la validación","status":"passed","title":"debería retornar 0 si no existe la validación","duration":0.2772940000000119,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","incrementFailedAttempts()"],"fullName":"ValidationRepository incrementFailedAttempts() debería incrementar múltiples veces","status":"passed","title":"debería incrementar múltiples veces","duration":0.2017359999999826,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","getByRound()"],"fullName":"ValidationRepository getByRound() debería obtener una validación por registrationId y round","status":"passed","title":"debería obtener una validación por registrationId y round","duration":0.2654070000000104,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","getByRound()"],"fullName":"ValidationRepository getByRound() debería retornar null si no existe la validación","status":"passed","title":"debería retornar null si no existe la validación","duration":0.12316500000000019,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","getResponseTimeStats()"],"fullName":"ValidationRepository getResponseTimeStats() debería calcular estadísticas de tiempo de respuesta","status":"passed","title":"debería calcular estadísticas de tiempo de respuesta","duration":0.22956700000000296,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","getResponseTimeStats()"],"fullName":"ValidationRepository getResponseTimeStats() debería retornar valores null si no hay validaciones exitosas","status":"passed","title":"debería retornar valores null si no hay validaciones exitosas","duration":0.13968599999998332,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","countSuccessful()"],"fullName":"ValidationRepository countSuccessful() debería contar validaciones exitosas","status":"passed","title":"debería contar validaciones exitosas","duration":0.20506299999999555,"failureMessages":[],"meta":{}},{"ancestorTitles":["ValidationRepository","countSuccessful()"],"fullName":"ValidationRepository countSuccessful() debería retornar 0 si no hay validaciones exitosas","status":"passed","title":"debería retornar 0 si no hay validaciones exitosas","duration":0.14278699999999844,"failureMessages":[],"meta":{}}],"startTime":1766116809190,"endTime":1766116809196.2295,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/__tests__/validation.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe autenticar correctamente con header válido","status":"passed","title":"debe autenticar correctamente con header válido","duration":2.970376999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe autenticar estudiante correctamente","status":"passed","title":"debe autenticar estudiante correctamente","duration":0.40853100000001064,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe fallar sin header Authorization","status":"passed","title":"debe fallar sin header Authorization","duration":0.5578919999999812,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe fallar con header malformado","status":"passed","title":"debe fallar con header malformado","duration":0.13346500000000106,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe fallar con token inválido","status":"passed","title":"debe fallar con token inválido","duration":0.18349699999998847,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe fallar con token expirado","status":"passed","title":"debe fallar con token expirado","duration":0.30607899999998267,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe crear UserId válido desde payload","status":"passed","title":"debe crear UserId válido desde payload","duration":0.5474760000000174,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","authenticateFromHeader"],"fullName":"AuthService authenticateFromHeader debe preservar caracteres especiales en nombreCompleto","status":"passed","title":"debe preservar caracteres especiales en nombreCompleto","duration":0.25361600000002227,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","verifyToken"],"fullName":"AuthService verifyToken debe verificar token válido directamente","status":"passed","title":"debe verificar token válido directamente","duration":0.27361700000000155,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","verifyToken"],"fullName":"AuthService verifyToken debe fallar con token inválido","status":"passed","title":"debe fallar con token inválido","duration":0.2105060000000094,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","verifyToken"],"fullName":"AuthService verifyToken debe fallar con token expirado","status":"passed","title":"debe fallar con token expirado","duration":0.29977800000000343,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","verifyToken"],"fullName":"AuthService verifyToken debe fallar con token firmado con otra secret","status":"passed","title":"debe fallar con token firmado con otra secret","duration":0.2504500000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","mapToAuthenticatedUser"],"fullName":"AuthService mapToAuthenticatedUser debe mapear payload completo correctamente","status":"passed","title":"debe mapear payload completo correctamente","duration":0.3248659999999859,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","mapToAuthenticatedUser"],"fullName":"AuthService mapToAuthenticatedUser debe crear UserId como Value Object","status":"passed","title":"debe crear UserId como Value Object","duration":0.25900500000000193,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","integración authenticateFromHeader vs verifyToken"],"fullName":"AuthService integración authenticateFromHeader vs verifyToken debe producir mismo resultado con ambos métodos","status":"passed","title":"debe producir mismo resultado con ambos métodos","duration":0.3154630000000225,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","edge cases"],"fullName":"AuthService edge cases debe manejar userId = 1 correctamente","status":"passed","title":"debe manejar userId = 1 correctamente","duration":0.21918199999998933,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","edge cases"],"fullName":"AuthService edge cases debe manejar números grandes en userId","status":"passed","title":"debe manejar números grandes en userId","duration":0.19841700000000628,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","edge cases"],"fullName":"AuthService edge cases debe manejar username con caracteres especiales","status":"passed","title":"debe manejar username con caracteres especiales","duration":0.18993399999999383,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","edge cases"],"fullName":"AuthService edge cases debe manejar todos los roles válidos","status":"passed","title":"debe manejar todos los roles válidos","duration":0.3842679999999916,"failureMessages":[],"meta":{}},{"ancestorTitles":["AuthService","edge cases"],"fullName":"AuthService edge cases debe preservar espacios múltiples en nombreCompleto","status":"passed","title":"debe preservar espacios múltiples en nombreCompleto","duration":0.18464800000000992,"failureMessages":[],"meta":{}}],"startTime":1766116810845,"endTime":1766116810854.1846,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/auth/__tests__/auth.service.test.ts"},{"assertionResults":[{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe verificar JWT válido correctamente","status":"passed","title":"debe verificar JWT válido correctamente","duration":2.9338349999999878,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con token expirado","status":"passed","title":"debe fallar con token expirado","duration":0.895797999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con secret incorrecta","status":"passed","title":"debe fallar con secret incorrecta","duration":0.31310199999998645,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con issuer incorrecto","status":"passed","title":"debe fallar con issuer incorrecto","duration":0.29042100000000914,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con audience incorrecta","status":"passed","title":"debe fallar con audience incorrecta","duration":0.2685149999999794,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con payload sin userId","status":"passed","title":"debe fallar con payload sin userId","duration":0.2625150000000076,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con payload sin username","status":"passed","title":"debe fallar con payload sin username","duration":0.2897800000000075,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con token malformado","status":"passed","title":"debe fallar con token malformado","duration":0.19470799999999144,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe fallar con string vacío","status":"passed","title":"debe fallar con string vacío","duration":0.15360600000002478,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","verify"],"fullName":"JWTUtils verify debe verificar token con campos opcionales","status":"passed","title":"debe verificar token con campos opcionales","duration":0.30208899999999517,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe extraer token de header válido","status":"passed","title":"debe extraer token de header válido","duration":0.1381590000000017,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe fallar sin header Authorization","status":"passed","title":"debe fallar sin header Authorization","duration":0.1507259999999917,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe fallar con header vacío","status":"passed","title":"debe fallar con header vacío","duration":0.1287279999999953,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe fallar sin esquema Bearer","status":"passed","title":"debe fallar sin esquema Bearer","duration":0.3331269999999904,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe fallar con esquema incorrecto","status":"passed","title":"debe fallar con esquema incorrecto","duration":0.17440799999999967,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe fallar con múltiples espacios","status":"passed","title":"debe fallar con múltiples espacios","duration":0.11755400000001259,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe fallar con solo \"Bearer\" sin token","status":"passed","title":"debe fallar con solo \"Bearer\" sin token","duration":0.11684199999999123,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe extraer token largo correctamente","status":"passed","title":"debe extraer token largo correctamente","duration":0.09387000000000967,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","extractFromHeader"],"fullName":"JWTUtils extractFromHeader debe manejar token con puntos (formato JWT real)","status":"passed","title":"debe manejar token con puntos (formato JWT real)","duration":0.06918300000000954,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","integración verify + extractFromHeader"],"fullName":"JWTUtils integración verify + extractFromHeader debe extraer y verificar token de header completo","status":"passed","title":"debe extraer y verificar token de header completo","duration":0.2615570000000105,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","edge cases"],"fullName":"JWTUtils edge cases debe manejar token con caracteres especiales en payload","status":"passed","title":"debe manejar token con caracteres especiales en payload","duration":0.23964099999997757,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","edge cases"],"fullName":"JWTUtils edge cases debe manejar userId = 1","status":"passed","title":"debe manejar userId = 1","duration":0.20222900000001687,"failureMessages":[],"meta":{}},{"ancestorTitles":["JWTUtils","edge cases"],"fullName":"JWTUtils edge cases debe manejar números grandes en userId","status":"passed","title":"debe manejar números grandes en userId","duration":0.18591299999999933,"failureMessages":[],"meta":{}}],"startTime":1766116810687,"endTime":1766116810696.1858,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/auth/__tests__/jwt-utils.test.ts"},{"assertionResults":[{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe crear UserId válido con número positivo","status":"passed","title":"debe crear UserId válido con número positivo","duration":0.7236499999999921,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe crear UserId con número 1","status":"passed","title":"debe crear UserId con número 1","duration":0.13558000000000447,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe fallar con número 0","status":"passed","title":"debe fallar con número 0","duration":0.5453040000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe fallar con número negativo","status":"passed","title":"debe fallar con número negativo","duration":0.1602269999999919,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe fallar con número decimal","status":"passed","title":"debe fallar con número decimal","duration":0.19097099999999045,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe fallar con NaN","status":"passed","title":"debe fallar con NaN","duration":0.14754399999999634,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","create"],"fullName":"UserId create debe fallar con Infinity","status":"passed","title":"debe fallar con Infinity","duration":0.14315999999999462,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","toNumber"],"fullName":"UserId toNumber debe retornar el valor numérico","status":"passed","title":"debe retornar el valor numérico","duration":0.1295989999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","toString"],"fullName":"UserId toString debe retornar el valor como string","status":"passed","title":"debe retornar el valor como string","duration":0.1283549999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","equals"],"fullName":"UserId equals debe retornar true para UserIds con mismo valor","status":"passed","title":"debe retornar true para UserIds con mismo valor","duration":0.11789900000000841,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","equals"],"fullName":"UserId equals debe retornar false para UserIds con valores diferentes","status":"passed","title":"debe retornar false para UserIds con valores diferentes","duration":0.16254800000000103,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","equals"],"fullName":"UserId equals debe comparar correctamente números grandes","status":"passed","title":"debe comparar correctamente números grandes","duration":0.12367199999999912,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","inmutabilidad"],"fullName":"UserId inmutabilidad no debe permitir modificar el valor después de creación","status":"passed","title":"no debe permitir modificar el valor después de creación","duration":0.11524800000000823,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","identidad"],"fullName":"UserId identidad dos instancias con mismo valor NO deben ser iguales por referencia","status":"passed","title":"dos instancias con mismo valor NO deben ser iguales por referencia","duration":0.17457999999999174,"failureMessages":[],"meta":{}},{"ancestorTitles":["UserId","identidad"],"fullName":"UserId identidad misma instancia debe ser igual a sí misma","status":"passed","title":"misma instancia debe ser igual a sí misma","duration":0.12476900000000057,"failureMessages":[],"meta":{}}],"startTime":1766116814347,"endTime":1766116814350.1746,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/auth/__tests__/user-id.test.ts"},{"assertionResults":[{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular que se necesitan 10 falsos si no hay estudiantes reales","status":"passed","title":"debería calcular que se necesitan 10 falsos si no hay estudiantes reales","duration":1.203237999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular que se necesitan 5 falsos si hay 5 estudiantes","status":"passed","title":"debería calcular que se necesitan 5 falsos si hay 5 estudiantes","duration":0.17851699999999937,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular que NO se necesitan falsos si hay 10 estudiantes","status":"passed","title":"debería calcular que NO se necesitan falsos si hay 10 estudiantes","duration":0.12786700000000906,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular que NO se necesitan falsos si hay más de 10 estudiantes","status":"passed","title":"debería calcular que NO se necesitan falsos si hay más de 10 estudiantes","duration":0.11430899999999156,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - agregar falsos"],"fullName":"PoolBalancer balance() - agregar falsos debería agregar 10 falsos si el pool está vacío","status":"passed","title":"debería agregar 10 falsos si el pool está vacío","duration":1.665976999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - agregar falsos"],"fullName":"PoolBalancer balance() - agregar falsos debería agregar 5 falsos si hay 5 estudiantes","status":"passed","title":"debería agregar 5 falsos si hay 5 estudiantes","duration":0.2044700000000148,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - agregar falsos"],"fullName":"PoolBalancer balance() - agregar falsos debería agregar 3 falsos si hay 7 estudiantes y 0 falsos","status":"passed","title":"debería agregar 3 falsos si hay 7 estudiantes y 0 falsos","duration":0.15331699999998705,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - remover falsos"],"fullName":"PoolBalancer balance() - remover falsos debería remover 5 falsos si hay 15 estudiantes y 5 falsos","status":"passed","title":"debería remover 5 falsos si hay 15 estudiantes y 5 falsos","duration":0.2544759999999826,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - remover falsos"],"fullName":"PoolBalancer balance() - remover falsos debería remover 10 falsos si hay 12 estudiantes y 10 falsos","status":"passed","title":"debería remover 10 falsos si hay 12 estudiantes y 10 falsos","duration":0.1953619999999887,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - sin cambios"],"fullName":"PoolBalancer balance() - sin cambios NO debería hacer nada si el pool ya está balanceado (10 estudiantes, 0 falsos)","status":"passed","title":"NO debería hacer nada si el pool ya está balanceado (10 estudiantes, 0 falsos)","duration":0.21950200000000564,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - sin cambios"],"fullName":"PoolBalancer balance() - sin cambios NO debería hacer nada si hay 5 estudiantes y 5 falsos","status":"passed","title":"NO debería hacer nada si hay 5 estudiantes y 5 falsos","duration":0.16737799999998515,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() debería inyectar 15 QRs falsos manualmente","status":"passed","title":"debería inyectar 15 QRs falsos manualmente","duration":0.3282600000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() NO debería inyectar si count es 0","status":"passed","title":"NO debería inyectar si count es 0","duration":0.2772369999999853,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() NO debería inyectar si count es negativo","status":"passed","title":"NO debería inyectar si count es negativo","duration":0.1364810000000034,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","getPoolStats()"],"fullName":"PoolBalancer getPoolStats() debería retornar estadísticas del pool","status":"passed","title":"debería retornar estadísticas del pool","duration":0.2354660000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","getConfig()"],"fullName":"PoolBalancer getConfig() debería retornar la configuración actual","status":"passed","title":"debería retornar la configuración actual","duration":0.1484530000000177,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","updateConfig()"],"fullName":"PoolBalancer updateConfig() debería actualizar minPoolSize en runtime","status":"passed","title":"debería actualizar minPoolSize en runtime","duration":0.2167140000000245,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","updateConfig()"],"fullName":"PoolBalancer updateConfig() debería recalcular falsos necesarios con nueva configuración","status":"passed","title":"debería recalcular falsos necesarios con nueva configuración","duration":0.1318600000000174,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","updateConfig()"],"fullName":"PoolBalancer updateConfig() debería mantener configuración anterior si no se provee","status":"passed","title":"debería mantener configuración anterior si no se provee","duration":0.1185480000000041,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","generateFakeEncrypted() - generación de QRs falsos"],"fullName":"PoolBalancer generateFakeEncrypted() - generación de QRs falsos debería generar QRs falsos con formato válido","status":"passed","title":"debería generar QRs falsos con formato válido","duration":0.456261000000012,"failureMessages":[],"meta":{}}],"startTime":1766116812466,"endTime":1766116812473.4563,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/qr-projection/__tests__/pool-balancer.service.test.ts"},{"assertionResults":[{"ancestorTitles":["PoolFeeder","feedStudentQR()"],"fullName":"PoolFeeder feedStudentQR() debería alimentar un QR de estudiante al pool con session_key real","status":"passed","title":"debería alimentar un QR de estudiante al pool con session_key real","duration":3.4224849999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedStudentQR()"],"fullName":"PoolFeeder feedStudentQR() debería usar fallback AES service si no hay session_key","status":"passed","title":"debería usar fallback AES service si no hay session_key","duration":0.685514000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedStudentQR()"],"fullName":"PoolFeeder feedStudentQR() debería usar TTL por defecto (60s) si no se especifica","status":"passed","title":"debería usar TTL por defecto (60s) si no se especifica","duration":0.3307920000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedStudentQR()"],"fullName":"PoolFeeder feedStudentQR() debería usar TTL personalizado","status":"passed","title":"debería usar TTL personalizado","duration":0.24713700000000927,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedStudentQR()"],"fullName":"PoolFeeder feedStudentQR() debería retornar error si falla el almacenamiento","status":"passed","title":"debería retornar error si falla el almacenamiento","duration":0.36874400000002083,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedStudentQR()"],"fullName":"PoolFeeder feedStudentQR() debería construir payload con los datos correctos","status":"passed","title":"debería construir payload con los datos correctos","duration":0.8038200000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedMultiple()"],"fullName":"PoolFeeder feedMultiple() debería alimentar múltiples QRs al pool","status":"passed","title":"debería alimentar múltiples QRs al pool","duration":0.6832540000000051,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","feedMultiple()"],"fullName":"PoolFeeder feedMultiple() debería retornar resultados mixtos (éxito + error)","status":"passed","title":"debería retornar resultados mixtos (éxito + error)","duration":0.38871300000002407,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolFeeder","getNonce()"],"fullName":"PoolFeeder getNonce() debería extraer el nonce del payload","status":"passed","title":"debería extraer el nonce del payload","duration":0.21946099999999547,"failureMessages":[],"meta":{}}],"startTime":1766116813057,"endTime":1766116813064.3887,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/qr-projection/__tests__/pool-feeder.service.test.ts"},{"assertionResults":[{"ancestorTitles":["LoginEcdhController","Validaciones de entrada"],"fullName":"LoginEcdhController Validaciones de entrada debería retornar 401 si no hay usuario autenticado","status":"passed","title":"debería retornar 401 si no hay usuario autenticado","duration":2.2404650000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Validaciones de entrada"],"fullName":"LoginEcdhController Validaciones de entrada debería retornar 400 si falta credentialId","status":"passed","title":"debería retornar 400 si falta credentialId","duration":0.3701949999999954,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Validaciones de entrada"],"fullName":"LoginEcdhController Validaciones de entrada debería retornar 400 si falta clientPublicKey","status":"passed","title":"debería retornar 400 si falta clientPublicKey","duration":0.27339299999999866,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Validaciones de entrada"],"fullName":"LoginEcdhController Validaciones de entrada debería retornar 400 si ambos campos faltan","status":"passed","title":"debería retornar 400 si ambos campos faltan","duration":0.27914099999999564,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Manejo de errores del UseCase"],"fullName":"LoginEcdhController Manejo de errores del UseCase debería retornar 404 si el dispositivo no existe (DEVICE_NOT_FOUND)","status":"passed","title":"debería retornar 404 si el dispositivo no existe (DEVICE_NOT_FOUND)","duration":0.363355999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Manejo de errores del UseCase"],"fullName":"LoginEcdhController Manejo de errores del UseCase debería retornar 403 si el dispositivo no pertenece al usuario (DEVICE_NOT_OWNED)","status":"passed","title":"debería retornar 403 si el dispositivo no pertenece al usuario (DEVICE_NOT_OWNED)","duration":0.2836899999999929,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Manejo de errores del UseCase"],"fullName":"LoginEcdhController Manejo de errores del UseCase debería retornar 403 si el dispositivo está revocado (DEVICE_REVOKED)","status":"passed","title":"debería retornar 403 si el dispositivo está revocado (DEVICE_REVOKED)","duration":0.27347800000001143,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Manejo de errores del UseCase"],"fullName":"LoginEcdhController Manejo de errores del UseCase debería retornar 500 para errores genéricos sin código","status":"passed","title":"debería retornar 500 para errores genéricos sin código","duration":2.7874920000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhController","Caso de éxito"],"fullName":"LoginEcdhController Caso de éxito debería retornar 200 con serverPublicKey, totpu y deviceId","status":"passed","title":"debería retornar 200 con serverPublicKey, totpu y deviceId","duration":0.4840159999999969,"failureMessages":[],"meta":{}}],"startTime":1766116814074,"endTime":1766116814081.4841,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/session/__tests__/login-ecdh.controller.test.ts"},{"assertionResults":[{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","caso exitoso"],"fullName":"CompleteScanUseCase (EJEMPLO) caso exitoso debe completar el escaneo correctamente","status":"passed","title":"debe completar el escaneo correctamente","duration":1.194232999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","casos de error"],"fullName":"CompleteScanUseCase (EJEMPLO) casos de error debe fallar si el estudiante no está registrado","status":"passed","title":"debe fallar si el estudiante no está registrado","duration":0.25818100000000754,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","casos de error"],"fullName":"CompleteScanUseCase (EJEMPLO) casos de error debe fallar si el QR ya fue consumido","status":"passed","title":"debe fallar si el QR ya fue consumido","duration":0.20177400000000034,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","casos de error"],"fullName":"CompleteScanUseCase (EJEMPLO) casos de error debe fallar si el TOTP es inválido","status":"passed","title":"debe fallar si el TOTP es inválido","duration":0.24231800000001158,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","límites y edge cases"],"fullName":"CompleteScanUseCase (EJEMPLO) límites y edge cases debe avanzar al siguiente round después de completar uno","status":"passed","title":"debe avanzar al siguiente round después de completar uno","duration":0.24554799999998522,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","límites y edge cases"],"fullName":"CompleteScanUseCase (EJEMPLO) límites y edge cases debe completar el proceso después del último round","status":"passed","title":"debe completar el proceso después del último round","duration":0.230275000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","límites y edge cases"],"fullName":"CompleteScanUseCase (EJEMPLO) límites y edge cases debe reiniciar intentos al pasar de round","status":"passed","title":"debe reiniciar intentos al pasar de round","duration":0.222518000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","manejo de timestamps"],"fullName":"CompleteScanUseCase (EJEMPLO) manejo de timestamps debe rechazar QR muy antiguo","status":"passed","title":"debe rechazar QR muy antiguo","duration":0.23858699999999544,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","manejo de timestamps"],"fullName":"CompleteScanUseCase (EJEMPLO) manejo de timestamps debe aceptar QR reciente","status":"passed","title":"debe aceptar QR reciente","duration":0.30577699999997776,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","concurrencia y race conditions"],"fullName":"CompleteScanUseCase (EJEMPLO) concurrencia y race conditions debe manejar múltiples escaneos simultáneos del mismo estudiante","status":"passed","title":"debe manejar múltiples escaneos simultáneos del mismo estudiante","duration":0.22235400000002414,"failureMessages":[],"meta":{}},{"ancestorTitles":["CompleteScanUseCase (EJEMPLO)","limpieza de mocks"],"fullName":"CompleteScanUseCase (EJEMPLO) limpieza de mocks debe resetear correctamente todos los mocks","status":"passed","title":"debe resetear correctamente todos los mocks","duration":0.8228030000000217,"failureMessages":[],"meta":{}}],"startTime":1766116811012,"endTime":1766116811016.8228,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/shared/__tests__/example-usecase.test.ts"},{"assertionResults":[{"ancestorTitles":["ParticipationService","registerParticipation()"],"fullName":"ParticipationService registerParticipation() debería registrar nuevo estudiante y generar QR","status":"passed","title":"debería registrar nuevo estudiante y generar QR","duration":2.7848619999999897,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","registerParticipation()"],"fullName":"ParticipationService registerParticipation() debería rechazar si estudiante ya completó","status":"passed","title":"debería rechazar si estudiante ya completó","duration":0.4885150000000067,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","registerParticipation()"],"fullName":"ParticipationService registerParticipation() debería rechazar si estudiante está failed","status":"passed","title":"debería rechazar si estudiante está failed","duration":0.30580400000000907,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","registerParticipation()"],"fullName":"ParticipationService registerParticipation() debería retornar error si generateAndProject falla","status":"passed","title":"debería retornar error si generateAndProject falla","duration":4.422526999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería retornar error si estudiante no está registrado","status":"passed","title":"debería retornar error si estudiante no está registrado","duration":0.3728200000000186,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería rechazar si estudiante completó","status":"passed","title":"debería rechazar si estudiante completó","duration":0.26995099999999184,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería rechazar si estudiante está failed","status":"passed","title":"debería rechazar si estudiante está failed","duration":0.2704599999999857,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería retornar QR existente si sigue válido","status":"passed","title":"debería retornar QR existente si sigue válido","duration":1.5976,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería generar nuevo QR si el anterior expiró","status":"passed","title":"debería generar nuevo QR si el anterior expiró","duration":0.3814439999999877,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería rechazar si QR expiró y no quedan intentos","status":"passed","title":"debería rechazar si QR expiró y no quedan intentos","duration":0.22321300000001543,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","requestNewQR()"],"fullName":"ParticipationService requestNewQR() debería manejar errores internos","status":"passed","title":"debería manejar errores internos","duration":0.34593900000001554,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","getStatus()"],"fullName":"ParticipationService getStatus() debería retornar registered=false si estudiante no existe","status":"passed","title":"debería retornar registered=false si estudiante no existe","duration":0.2586510000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","getStatus()"],"fullName":"ParticipationService getStatus() debería retornar estado completo con QR activo","status":"passed","title":"debería retornar estado completo con QR activo","duration":0.3514989999999898,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","getStatus()"],"fullName":"ParticipationService getStatus() debería retornar estado sin QR si no hay activo","status":"passed","title":"debería retornar estado sin QR si no hay activo","duration":0.21746899999999414,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","getStatus()"],"fullName":"ParticipationService getStatus() debería retornar estado completed","status":"passed","title":"debería retornar estado completed","duration":0.24140300000001957,"failureMessages":[],"meta":{}},{"ancestorTitles":["ParticipationService","getStatus()"],"fullName":"ParticipationService getStatus() debería ignorar QR consumido","status":"passed","title":"debería ignorar QR consumido","duration":0.1995499999999879,"failureMessages":[],"meta":{}}],"startTime":1766116808298,"endTime":1766116808311.2415,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/application/__tests__/participation.service.test.ts"},{"assertionResults":[{"ancestorTitles":["StudentSessionRepository","registerStudent()"],"fullName":"StudentSessionRepository registerStudent() debería crear estado inicial para nuevo estudiante","status":"passed","title":"debería crear estado inicial para nuevo estudiante","duration":3.140367999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","registerStudent()"],"fullName":"StudentSessionRepository registerStudent() debería retornar estado existente si estudiante ya está registrado","status":"passed","title":"debería retornar estado existente si estudiante ya está registrado","duration":0.3371840000000077,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","registerStudent()"],"fullName":"StudentSessionRepository registerStudent() debería usar configuración personalizada","status":"passed","title":"debería usar configuración personalizada","duration":0.1950390000000084,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getState()"],"fullName":"StudentSessionRepository getState() debería retornar estado del estudiante","status":"passed","title":"debería retornar estado del estudiante","duration":0.3046720000000107,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getState()"],"fullName":"StudentSessionRepository getState() debería retornar null si no existe estado","status":"passed","title":"debería retornar null si no existe estado","duration":0.19219699999999307,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getState()"],"fullName":"StudentSessionRepository getState() debería retornar null si hay error de parsing","status":"passed","title":"debería retornar null si hay error de parsing","duration":5.289640999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","saveState()"],"fullName":"StudentSessionRepository saveState() debería guardar estado con TTL y actualizar timestamp","status":"passed","title":"debería guardar estado con TTL y actualizar timestamp","duration":0.3222370000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","setActiveQR()"],"fullName":"StudentSessionRepository setActiveQR() debería actualizar QR activo y renovar TTL","status":"passed","title":"debería actualizar QR activo y renovar TTL","duration":0.3299340000000086,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","setActiveQR()"],"fullName":"StudentSessionRepository setActiveQR() debería retornar null si no existe estado","status":"passed","title":"debería retornar null si no existe estado","duration":0.185292000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","completeRound()"],"fullName":"StudentSessionRepository completeRound() debería completar round y avanzar al siguiente","status":"passed","title":"debería completar round y avanzar al siguiente","duration":0.6619890000000055,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","completeRound()"],"fullName":"StudentSessionRepository completeRound() debería marcar como completado al terminar todos los rounds","status":"passed","title":"debería marcar como completado al terminar todos los rounds","duration":0.29735399999998435,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","completeRound()"],"fullName":"StudentSessionRepository completeRound() debería lanzar error si no existe estado","status":"passed","title":"debería lanzar error si no existe estado","duration":0.8889520000000175,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","failRound()"],"fullName":"StudentSessionRepository failRound() debería incrementar intento fallido","status":"passed","title":"debería incrementar intento fallido","duration":0.317419000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","failRound()"],"fullName":"StudentSessionRepository failRound() debería marcar como fallido si no quedan intentos","status":"passed","title":"debería marcar como fallido si no quedan intentos","duration":0.19763000000000375,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","failRound()"],"fullName":"StudentSessionRepository failRound() debería lanzar error si no existe estado","status":"passed","title":"debería lanzar error si no existe estado","duration":0.2720170000000053,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","validateRoundMatch()"],"fullName":"StudentSessionRepository validateRoundMatch() debería validar round correcto con nonce coincidente","status":"passed","title":"debería validar round correcto con nonce coincidente","duration":0.25791699999999196,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","validateRoundMatch()"],"fullName":"StudentSessionRepository validateRoundMatch() debería rechazar si estudiante no está registrado","status":"passed","title":"debería rechazar si estudiante no está registrado","duration":0.1584229999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","validateRoundMatch()"],"fullName":"StudentSessionRepository validateRoundMatch() debería rechazar si estudiante está completed","status":"passed","title":"debería rechazar si estudiante está completed","duration":0.21916300000000888,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","validateRoundMatch()"],"fullName":"StudentSessionRepository validateRoundMatch() debería rechazar si nonce no coincide","status":"passed","title":"debería rechazar si nonce no coincide","duration":0.1776399999999967,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","validateRoundMatch()"],"fullName":"StudentSessionRepository validateRoundMatch() debería rechazar si round ya fue completado","status":"passed","title":"debería rechazar si round ya fue completado","duration":0.1818439999999839,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","validateRoundMatch()"],"fullName":"StudentSessionRepository validateRoundMatch() debería rechazar si round todavía no fue alcanzado","status":"passed","title":"debería rechazar si round todavía no fue alcanzado","duration":0.17609500000000367,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getActiveStudents()"],"fullName":"StudentSessionRepository getActiveStudents() debería retornar lista de estudiantes activos","status":"passed","title":"debería retornar lista de estudiantes activos","duration":0.19660100000001535,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getActiveStudents()"],"fullName":"StudentSessionRepository getActiveStudents() debería retornar array vacío si no hay estudiantes","status":"passed","title":"debería retornar array vacío si no hay estudiantes","duration":0.1488300000000038,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","countByStatus()"],"fullName":"StudentSessionRepository countByStatus() debería contar estudiantes por estado","status":"passed","title":"debería contar estudiantes por estado","duration":0.2728879999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getOrCreateSessionConfig()"],"fullName":"StudentSessionRepository getOrCreateSessionConfig() debería retornar config existente","status":"passed","title":"debería retornar config existente","duration":0.2081269999999904,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getOrCreateSessionConfig()"],"fullName":"StudentSessionRepository getOrCreateSessionConfig() debería crear nueva config con valores por defecto","status":"passed","title":"debería crear nueva config con valores por defecto","duration":0.34177199999999175,"failureMessages":[],"meta":{}},{"ancestorTitles":["StudentSessionRepository","getOrCreateSessionConfig()"],"fullName":"StudentSessionRepository getOrCreateSessionConfig() debería crear config con valores personalizados","status":"passed","title":"debería crear config con valores personalizados","duration":0.3190979999999968,"failureMessages":[],"meta":{}}],"startTime":1766116808138,"endTime":1766116808154.319,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/infrastructure/__tests__/student-session.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","save() - Guardar challenge de enrollment"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges save() - Guardar challenge de enrollment Debe guardar challenge en Valkey con TTL por defecto (300s)","status":"passed","title":"Debe guardar challenge en Valkey con TTL por defecto (300s)","duration":2.4098299999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","save() - Guardar challenge de enrollment"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges save() - Guardar challenge de enrollment Debe guardar challenge con TTL personalizado","status":"passed","title":"Debe guardar challenge con TTL personalizado","duration":0.33063299999999174,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","save() - Guardar challenge de enrollment"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges save() - Guardar challenge de enrollment Debe serializar todos los campos como strings","status":"passed","title":"Debe serializar todos los campos como strings","duration":0.28650799999999776,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","save() - Guardar challenge de enrollment"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges save() - Guardar challenge de enrollment Debe sobrescribir challenge existente (nuevo intento de enrollment)","status":"passed","title":"Debe sobrescribir challenge existente (nuevo intento de enrollment)","duration":0.4304599999999965,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","findByUserId() - Buscar challenge por userId"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges findByUserId() - Buscar challenge por userId Debe retornar challenge cuando existe","status":"passed","title":"Debe retornar challenge cuando existe","duration":0.4296499999999952,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","findByUserId() - Buscar challenge por userId"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges findByUserId() - Buscar challenge por userId Debe retornar null cuando no existe challenge","status":"passed","title":"Debe retornar null cuando no existe challenge","duration":0.42094500000000323,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","findByUserId() - Buscar challenge por userId"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges findByUserId() - Buscar challenge por userId Debe deserializar correctamente números desde strings","status":"passed","title":"Debe deserializar correctamente números desde strings","duration":0.41253399999999374,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","findByUserId() - Buscar challenge por userId"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges findByUserId() - Buscar challenge por userId Debe manejar challenge string correctamente (no es número)","status":"passed","title":"Debe manejar challenge string correctamente (no es número)","duration":0.2837030000000027,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","delete() - Eliminar challenge"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges delete() - Eliminar challenge Debe eliminar challenge de Valkey","status":"passed","title":"Debe eliminar challenge de Valkey","duration":0.23691800000001706,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","delete() - Eliminar challenge"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges delete() - Eliminar challenge Debe manejar eliminación de challenge inexistente sin error","status":"passed","title":"Debe manejar eliminación de challenge inexistente sin error","duration":0.6726030000000094,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","buildKey() - Construcción de keys"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges buildKey() - Construcción de keys Debe construir key con formato correcto","status":"passed","title":"Debe construir key con formato correcto","duration":0.2996559999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","buildKey() - Construcción de keys"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges buildKey() - Construcción de keys Debe generar keys únicas para diferentes usuarios","status":"passed","title":"Debe generar keys únicas para diferentes usuarios","duration":0.33510499999999865,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","Flujo completo: save -> find -> delete"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges Flujo completo: save -> find -> delete Debe completar ciclo de vida de challenge","status":"passed","title":"Debe completar ciclo de vida de challenge","duration":0.3439469999999858,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","Validación de TTL"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges Validación de TTL Debe usar TTL de 300s por defecto (5 minutos)","status":"passed","title":"Debe usar TTL de 300s por defecto (5 minutos)","duration":0.3049120000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentChallengeRepository - Tests de Persistencia de Challenges","Validación de TTL"],"fullName":"EnrollmentChallengeRepository - Tests de Persistencia de Challenges Validación de TTL Debe permitir TTL personalizado para casos especiales","status":"passed","title":"Debe permitir TTL personalizado para casos especiales","duration":0.31289300000000253,"failureMessages":[],"meta":{}}],"startTime":1766116809035,"endTime":1766116809043.313,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/infrastructure/__tests__/enrollment-challenge.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["QRGenerator","Generación de nonce"],"fullName":"QRGenerator Generación de nonce debe generar nonce de 32 caracteres hex","status":"passed","title":"debe generar nonce de 32 caracteres hex","duration":1.4286299999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Generación de nonce"],"fullName":"QRGenerator Generación de nonce debe generar nonces diferentes en cada llamada","status":"passed","title":"debe generar nonces diferentes en cada llamada","duration":0.6550950000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe construir payload con estructura correcta","status":"passed","title":"debe construir payload con estructura correcta","duration":0.36844500000000835,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe incluir version 1","status":"passed","title":"debe incluir version 1","duration":0.15997999999999024,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe incluir sessionId como string","status":"passed","title":"debe incluir sessionId como string","duration":0.16322999999999865,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe incluir userId","status":"passed","title":"debe incluir userId","duration":0.15917900000000884,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe incluir timestamp reciente","status":"passed","title":"debe incluir timestamp reciente","duration":0.25573599999999885,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe incluir nonce de 32 caracteres hex","status":"passed","title":"debe incluir nonce de 32 caracteres hex","duration":0.16693700000000433,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Construcción de payload V1"],"fullName":"QRGenerator Construcción de payload V1 debe incluir round number positivo","status":"passed","title":"debe incluir round number positivo","duration":0.1869219999999956,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Round counter"],"fullName":"QRGenerator Round counter debe iniciar en round 1","status":"passed","title":"debe iniciar en round 1","duration":0.18565399999999954,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Round counter"],"fullName":"QRGenerator Round counter debe incrementar round en cada llamada para misma sesión","status":"passed","title":"debe incrementar round en cada llamada para misma sesión","duration":0.1890279999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Round counter"],"fullName":"QRGenerator Round counter debe mantener contadores independientes por sesión","status":"passed","title":"debe mantener contadores independientes por sesión","duration":0.2338360000000108,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Round counter"],"fullName":"QRGenerator Round counter debe reiniciar contador tras resetRoundCounter","status":"passed","title":"debe reiniciar contador tras resetRoundCounter","duration":0.15737000000000023,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Conversión a string JSON"],"fullName":"QRGenerator Conversión a string JSON debe convertir payload a JSON válido","status":"passed","title":"debe convertir payload a JSON válido","duration":0.7147510000000068,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Conversión a string JSON"],"fullName":"QRGenerator Conversión a string JSON debe incluir todos los campos en el JSON","status":"passed","title":"debe incluir todos los campos en el JSON","duration":0.2619839999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Encriptación con AES-GCM"],"fullName":"QRGenerator Encriptación con AES-GCM debe encriptar payload generando string no vacío","status":"passed","title":"debe encriptar payload generando string no vacío","duration":0.5437950000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Encriptación con AES-GCM"],"fullName":"QRGenerator Encriptación con AES-GCM debe generar formato iv.ciphertext.authTag (partes separadas por punto)","status":"passed","title":"debe generar formato iv.ciphertext.authTag (partes separadas por punto)","duration":0.29003000000000156,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Encriptación con AES-GCM"],"fullName":"QRGenerator Encriptación con AES-GCM debe generar ciphertexts diferentes para payloads idénticos","status":"passed","title":"debe generar ciphertexts diferentes para payloads idénticos","duration":0.21897500000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Encriptación con clave aleatoria (QRs decoy)"],"fullName":"QRGenerator Encriptación con clave aleatoria (QRs decoy) debe generar payload encriptado con formato válido","status":"passed","title":"debe generar payload encriptado con formato válido","duration":0.29394700000000284,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Encriptación con clave aleatoria (QRs decoy)"],"fullName":"QRGenerator Encriptación con clave aleatoria (QRs decoy) debe generar ciphertexts diferentes en cada llamada (claves aleatorias)","status":"passed","title":"debe generar ciphertexts diferentes en cada llamada (claves aleatorias)","duration":1.4767590000000155,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","Encriptación con clave aleatoria (QRs decoy)"],"fullName":"QRGenerator Encriptación con clave aleatoria (QRs decoy) QR decoy debe ser indistinguible de QR real (mismo formato)","status":"passed","title":"QR decoy debe ser indistinguible de QR real (mismo formato)","duration":0.2634580000000142,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateV1 (método principal)"],"fullName":"QRGenerator generateV1 (método principal) debe generar envelope con payload y payloadString encriptado","status":"passed","title":"debe generar envelope con payload y payloadString encriptado","duration":0.17505199999999377,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateV1 (método principal)"],"fullName":"QRGenerator generateV1 (método principal) debe incluir payload V1 estructurado","status":"passed","title":"debe incluir payload V1 estructurado","duration":0.1683879999999931,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateV1 (método principal)"],"fullName":"QRGenerator generateV1 (método principal) debe incluir payloadString encriptado","status":"passed","title":"debe incluir payloadString encriptado","duration":0.1690979999999911,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateV1 (método principal)"],"fullName":"QRGenerator generateV1 (método principal) debe incluir sessionId original","status":"passed","title":"debe incluir sessionId original","duration":0.12414000000001124,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateForStudent (implementación IQRGenerator)"],"fullName":"QRGenerator generateForStudent (implementación IQRGenerator) debe generar payload para round específico","status":"passed","title":"debe generar payload para round específico","duration":0.20254299999999148,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateForStudent (implementación IQRGenerator)"],"fullName":"QRGenerator generateForStudent (implementación IQRGenerator) debe incluir sessionId y hostUserId correctos","status":"passed","title":"debe incluir sessionId y hostUserId correctos","duration":0.15242900000001214,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateForStudent (implementación IQRGenerator)"],"fullName":"QRGenerator generateForStudent (implementación IQRGenerator) debe retornar payload y encrypted","status":"passed","title":"debe retornar payload y encrypted","duration":0.14603600000000938,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRGenerator","generateForStudent (implementación IQRGenerator)"],"fullName":"QRGenerator generateForStudent (implementación IQRGenerator) debe generar nonce único en cada llamada","status":"passed","title":"debe generar nonce único en cada llamada","duration":0.1570300000000202,"failureMessages":[],"meta":{}}],"startTime":1766116809944,"endTime":1766116809954.157,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/qr-projection/domain/__tests__/qr-generator.test.ts"},{"assertionResults":[{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt"],"fullName":"AttendancePersistenceService saveValidationAttempt debería guardar nueva validación si no existe","status":"passed","title":"debería guardar nueva validación si no existe","duration":3.549315000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt"],"fullName":"AttendancePersistenceService saveValidationAttempt debería completar validación existente sin crear duplicado","status":"passed","title":"debería completar validación existente sin crear duplicado","duration":0.5432820000000049,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt"],"fullName":"AttendancePersistenceService saveValidationAttempt NO debería lanzar error si no encuentra registro","status":"passed","title":"NO debería lanzar error si no encuentra registro","duration":1.162401999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveValidationAttempt"],"fullName":"AttendancePersistenceService saveValidationAttempt NO debería lanzar error si sessionId no es numérico","status":"passed","title":"NO debería lanzar error si sessionId no es numérico","duration":0.395465999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult"],"fullName":"AttendancePersistenceService saveAttendanceResult debería guardar resultado final con estadísticas","status":"passed","title":"debería guardar resultado final con estadísticas","duration":0.5207249999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult"],"fullName":"AttendancePersistenceService saveAttendanceResult debería ser idempotente: NO duplicar si ya existe resultado","status":"passed","title":"debería ser idempotente: NO duplicar si ya existe resultado","duration":0.3019649999999956,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult"],"fullName":"AttendancePersistenceService saveAttendanceResult debería determinar finalStatus PRESENT si certainty >= 70","status":"passed","title":"debería determinar finalStatus PRESENT si certainty >= 70","duration":0.6161439999999914,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult"],"fullName":"AttendancePersistenceService saveAttendanceResult debería determinar finalStatus DOUBTFUL si 40 <= certainty < 70","status":"passed","title":"debería determinar finalStatus DOUBTFUL si 40 <= certainty < 70","duration":0.3741540000000043,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveAttendanceResult"],"fullName":"AttendancePersistenceService saveAttendanceResult debería determinar finalStatus ABSENT si certainty < 40","status":"passed","title":"debería determinar finalStatus ABSENT si certainty < 40","duration":0.3331290000000138,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","markRegistrationComplete"],"fullName":"AttendancePersistenceService markRegistrationComplete debería actualizar estado de registración a completed","status":"passed","title":"debería actualizar estado de registración a completed","duration":0.3512409999999875,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","markRegistrationComplete"],"fullName":"AttendancePersistenceService markRegistrationComplete NO debería lanzar error si no encuentra registro","status":"passed","title":"NO debería lanzar error si no encuentra registro","duration":0.3967179999999928,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendancePersistenceService","saveCompleteAttendance"],"fullName":"AttendancePersistenceService saveCompleteAttendance debería ejecutar las 3 operaciones en orden","status":"passed","title":"debería ejecutar las 3 operaciones en orden","duration":0.3440310000000011,"failureMessages":[],"meta":{}}],"startTime":1766116811714,"endTime":1766116811723.344,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/application/services/__tests__/attendance-persistence.service.test.ts"},{"assertionResults":[{"ancestorTitles":["QRLifecycleService","generateAndPublish (implementa IQRLifecycleManager)"],"fullName":"QRLifecycleService generateAndPublish (implementa IQRLifecycleManager) debe generar QR y retornar resultado correcto","status":"passed","title":"debe generar QR y retornar resultado correcto","duration":1.3408450000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndPublish (implementa IQRLifecycleManager)"],"fullName":"QRLifecycleService generateAndPublish (implementa IQRLifecycleManager) debe llamar a generateForStudent con parámetros correctos","status":"passed","title":"debe llamar a generateForStudent con parámetros correctos","duration":1.1619870000000105,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndPublish (implementa IQRLifecycleManager)"],"fullName":"QRLifecycleService generateAndPublish (implementa IQRLifecycleManager) debe almacenar payload en repositorio","status":"passed","title":"debe almacenar payload en repositorio","duration":0.9697050000000047,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndPublish (implementa IQRLifecycleManager)"],"fullName":"QRLifecycleService generateAndPublish (implementa IQRLifecycleManager) debe actualizar pool de proyección","status":"passed","title":"debe actualizar pool de proyección","duration":0.2694270000000074,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndPublish (implementa IQRLifecycleManager)"],"fullName":"QRLifecycleService generateAndPublish (implementa IQRLifecycleManager) debe propagar errores del generador","status":"passed","title":"debe propagar errores del generador","duration":0.8854550000000074,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndPublish (implementa IQRLifecycleManager)"],"fullName":"QRLifecycleService generateAndPublish (implementa IQRLifecycleManager) debe propagar errores del repositorio de payloads","status":"passed","title":"debe propagar errores del repositorio de payloads","duration":0.3150459999999953,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndProject"],"fullName":"QRLifecycleService generateAndProject debe generar QR con hostUserId custom","status":"passed","title":"debe generar QR con hostUserId custom","duration":0.2049910000000068,"failureMessages":[],"meta":{}},{"ancestorTitles":["QRLifecycleService","generateAndProject"],"fullName":"QRLifecycleService generateAndProject debe retornar payload y encrypted","status":"passed","title":"debe retornar payload y encrypted","duration":0.15997300000000791,"failureMessages":[],"meta":{}}],"startTime":1766116813512,"endTime":1766116813517.205,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/application/services/__tests__/qr-lifecycle.service.test.ts"},{"assertionResults":[{"ancestorTitles":["AttendanceStatsCalculator","calculate","con tiempos de respuesta vacíos"],"fullName":"AttendanceStatsCalculator calculate con tiempos de respuesta vacíos debe retornar estadísticas vacías","status":"passed","title":"debe retornar estadísticas vacías","duration":0.8972679999999968,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","con tiempos de respuesta normales"],"fullName":"AttendanceStatsCalculator calculate con tiempos de respuesta normales debe calcular promedio correctamente","status":"passed","title":"debe calcular promedio correctamente","duration":0.22143800000000624,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","con tiempos de respuesta normales"],"fullName":"AttendanceStatsCalculator calculate con tiempos de respuesta normales debe calcular min y max correctamente","status":"passed","title":"debe calcular min y max correctamente","duration":0.16829899999999043,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","con tiempos de respuesta normales"],"fullName":"AttendanceStatsCalculator calculate con tiempos de respuesta normales debe calcular desviación estándar correctamente","status":"passed","title":"debe calcular desviación estándar correctamente","duration":0.13049099999999214,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","con tiempos de respuesta normales"],"fullName":"AttendanceStatsCalculator calculate con tiempos de respuesta normales debe detectar fullCompletion cuando todos los rounds están completos","status":"passed","title":"debe detectar fullCompletion cuando todos los rounds están completos","duration":0.1348429999999894,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","con tiempos de respuesta normales"],"fullName":"AttendanceStatsCalculator calculate con tiempos de respuesta normales debe detectar no fullCompletion cuando faltan rounds","status":"passed","title":"debe detectar no fullCompletion cuando faltan rounds","duration":0.13239500000000248,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","cálculo de certeza"],"fullName":"AttendanceStatsCalculator calculate cálculo de certeza debe dar alta certeza para tiempos consistentes en rango óptimo","status":"passed","title":"debe dar alta certeza para tiempos consistentes en rango óptimo","duration":0.21091499999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","cálculo de certeza"],"fullName":"AttendanceStatsCalculator calculate cálculo de certeza debe dar menor certeza para tiempos muy dispersos","status":"passed","title":"debe dar menor certeza para tiempos muy dispersos","duration":0.13200100000000248,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","cálculo de certeza"],"fullName":"AttendanceStatsCalculator calculate cálculo de certeza debe penalizar tiempos sospechosamente rápidos (<300ms)","status":"passed","title":"debe penalizar tiempos sospechosamente rápidos (<300ms)","duration":0.11772899999999709,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","cálculo de certeza"],"fullName":"AttendanceStatsCalculator calculate cálculo de certeza debe penalizar tiempos excesivamente lentos (>15000ms)","status":"passed","title":"debe penalizar tiempos excesivamente lentos (>15000ms)","duration":0.12048699999999712,"failureMessages":[],"meta":{}},{"ancestorTitles":["AttendanceStatsCalculator","calculate","redondeo de valores"],"fullName":"AttendanceStatsCalculator calculate redondeo de valores debe redondear avg, stdDev, min, max a enteros","status":"passed","title":"debe redondear avg, stdDev, min, max a enteros","duration":0.2786670000000129,"failureMessages":[],"meta":{}}],"startTime":1766116813790,"endTime":1766116813793.2786,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/domain/services/__tests__/attendance-stats-calculator.service.test.ts"},{"assertionResults":[{"ancestorTitles":["EnrollmentFlowOrchestrator","attemptAccess","CheckEnrolado: User not enrolled"],"fullName":"EnrollmentFlowOrchestrator attemptAccess CheckEnrolado: User not enrolled returns REQUIRES_ENROLLMENT when user has no active devices","status":"passed","title":"returns REQUIRES_ENROLLMENT when user has no active devices","duration":1.464855,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","attemptAccess","CheckEnrolado: User not enrolled"],"fullName":"EnrollmentFlowOrchestrator attemptAccess CheckEnrolado: User not enrolled returns REQUIRES_ENROLLMENT with hasRevokedDevices=true when user has revoked devices","status":"passed","title":"returns REQUIRES_ENROLLMENT with hasRevokedDevices=true when user has revoked devices","duration":0.33559200000000544,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","attemptAccess","EvaluarUnoAUno: User enrolled, evaluate 1:1"],"fullName":"EnrollmentFlowOrchestrator attemptAccess EvaluarUnoAUno: User enrolled, evaluate 1:1 returns ACCESS_GRANTED when device fingerprint matches","status":"passed","title":"returns ACCESS_GRANTED when device fingerprint matches","duration":0.26399399999999673,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","attemptAccess","EvaluarUnoAUno: User enrolled, evaluate 1:1"],"fullName":"EnrollmentFlowOrchestrator attemptAccess EvaluarUnoAUno: User enrolled, evaluate 1:1 returns REQUIRES_REENROLLMENT when device fingerprint does not match","status":"passed","title":"returns REQUIRES_REENROLLMENT when device fingerprint does not match","duration":0.6792140000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","attemptAccess","EvaluarUnoAUno: User enrolled, evaluate 1:1"],"fullName":"EnrollmentFlowOrchestrator attemptAccess EvaluarUnoAUno: User enrolled, evaluate 1:1 returns REQUIRES_REENROLLMENT when user has multiple active devices","status":"passed","title":"returns REQUIRES_REENROLLMENT when user has multiple active devices","duration":0.5361580000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","attemptAccess","enrollment info accuracy"],"fullName":"EnrollmentFlowOrchestrator attemptAccess enrollment info accuracy correctly reports enrollment state","status":"passed","title":"correctly reports enrollment state","duration":0.26378800000000524,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","processEnrollmentConsent","consent rejected"],"fullName":"EnrollmentFlowOrchestrator processEnrollmentConsent consent rejected returns shouldProceed=false when consent rejected","status":"passed","title":"returns shouldProceed=false when consent rejected","duration":0.6112210000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","processEnrollmentConsent","consent accepted"],"fullName":"EnrollmentFlowOrchestrator processEnrollmentConsent consent accepted returns shouldProceed=true when consent accepted","status":"passed","title":"returns shouldProceed=true when consent accepted","duration":0.25113699999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","processEnrollmentConsent","consent accepted"],"fullName":"EnrollmentFlowOrchestrator processEnrollmentConsent consent accepted identifies devices to revoke when user has existing devices","status":"passed","title":"identifies devices to revoke when user has existing devices","duration":0.3051409999999919,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","processEnrollmentConsent","consent accepted"],"fullName":"EnrollmentFlowOrchestrator processEnrollmentConsent consent accepted returns undefined devicesToRevoke when user has no existing devices","status":"passed","title":"returns undefined devicesToRevoke when user has no existing devices","duration":0.18380600000000413,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","needsEnrollment"],"fullName":"EnrollmentFlowOrchestrator needsEnrollment returns true when user is not enrolled","status":"passed","title":"returns true when user is not enrolled","duration":0.3632070000000027,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","needsEnrollment"],"fullName":"EnrollmentFlowOrchestrator needsEnrollment returns true when user needs re-enrollment","status":"passed","title":"returns true when user needs re-enrollment","duration":0.20000100000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","needsEnrollment"],"fullName":"EnrollmentFlowOrchestrator needsEnrollment returns false when user has valid access","status":"passed","title":"returns false when user has valid access","duration":0.24375999999999465,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","workflow scenarios"],"fullName":"EnrollmentFlowOrchestrator workflow scenarios first-time enrollment flow","status":"passed","title":"first-time enrollment flow","duration":0.22050799999999526,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","workflow scenarios"],"fullName":"EnrollmentFlowOrchestrator workflow scenarios re-enrollment flow (new device)","status":"passed","title":"re-enrollment flow (new device)","duration":0.31190200000000345,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","workflow scenarios"],"fullName":"EnrollmentFlowOrchestrator workflow scenarios successful access flow","status":"passed","title":"successful access flow","duration":0.2275410000000022,"failureMessages":[],"meta":{}},{"ancestorTitles":["EnrollmentFlowOrchestrator","workflow scenarios"],"fullName":"EnrollmentFlowOrchestrator workflow scenarios consent rejection flow","status":"passed","title":"consent rejection flow","duration":0.1837539999999933,"failureMessages":[],"meta":{}}],"startTime":1766116811142,"endTime":1766116811149.312,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/application/orchestrators/__tests__/enrollment-flow.orchestrator.test.ts"},{"assertionResults":[{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","execute() - Listar dispositivos exitosamente"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos execute() - Listar dispositivos exitosamente Debe retornar lista de dispositivos activos del usuario","status":"passed","title":"Debe retornar lista de dispositivos activos del usuario","duration":2.864221999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","execute() - Listar dispositivos exitosamente"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos execute() - Listar dispositivos exitosamente Debe retornar array vacío si el usuario no tiene dispositivos","status":"passed","title":"Debe retornar array vacío si el usuario no tiene dispositivos","duration":0.5244470000000092,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","execute() - Listar dispositivos exitosamente"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos execute() - Listar dispositivos exitosamente Debe transformar correctamente los datos del dispositivo","status":"passed","title":"Debe transformar correctamente los datos del dispositivo","duration":0.7758330000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Múltiples dispositivos"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Múltiples dispositivos Debe manejar correctamente 5 dispositivos","status":"passed","title":"Debe manejar correctamente 5 dispositivos","duration":0.46183999999999514,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Múltiples dispositivos"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Múltiples dispositivos Debe mantener el orden de los dispositivos del repository","status":"passed","title":"Debe mantener el orden de los dispositivos del repository","duration":0.25109199999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Casos edge con fechas"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Casos edge con fechas Debe manejar dispositivo sin lastUsedAt (nunca usado después de enrollment)","status":"passed","title":"Debe manejar dispositivo sin lastUsedAt (nunca usado después de enrollment)","duration":0.193909000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Casos edge con fechas"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Casos edge con fechas Debe manejar correctamente timezone en fechas","status":"passed","title":"Debe manejar correctamente timezone en fechas","duration":0.19396799999999814,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Casos de uso reales"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Casos de uso reales Debe listar dispositivos para UI de gestión de usuario","status":"passed","title":"Debe listar dispositivos para UI de gestión de usuario","duration":0.22278299999999263,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Casos de uso reales"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Casos de uso reales Debe manejar nuevo usuario sin dispositivos enrolados","status":"passed","title":"Debe manejar nuevo usuario sin dispositivos enrolados","duration":0.18748600000000692,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Consistencia de datos"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Consistencia de datos Debe verificar que deviceCount coincide con el tamaño del array","status":"passed","title":"Debe verificar que deviceCount coincide con el tamaño del array","duration":0.20874399999999582,"failureMessages":[],"meta":{}},{"ancestorTitles":["GetDevicesUseCase - Tests de Listado de Dispositivos","Consistencia de datos"],"fullName":"GetDevicesUseCase - Tests de Listado de Dispositivos Consistencia de datos Debe retornar estructura consistente incluso con array vacío","status":"passed","title":"Debe retornar estructura consistente incluso con array vacío","duration":0.18714299999999184,"failureMessages":[],"meta":{}}],"startTime":1766116808594,"endTime":1766116808600.2087,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/application/use-cases/__tests__/get-devices.use-case.test.ts"},{"assertionResults":[{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","execute() - Revocar dispositivo exitosamente"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos execute() - Revocar dispositivo exitosamente Debe revocar un dispositivo enrolled exitosamente","status":"passed","title":"Debe revocar un dispositivo enrolled exitosamente","duration":2.2911589999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","execute() - Revocar dispositivo exitosamente"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos execute() - Revocar dispositivo exitosamente Debe usar reason por defecto si no se proporciona","status":"passed","title":"Debe usar reason por defecto si no se proporciona","duration":0.5533749999999884,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Validaciones de seguridad"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Validaciones de seguridad Debe lanzar error si el dispositivo no existe","status":"passed","title":"Debe lanzar error si el dispositivo no existe","duration":1.1021959999999922,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Validaciones de seguridad"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Validaciones de seguridad Debe lanzar error si el dispositivo pertenece a otro usuario","status":"passed","title":"Debe lanzar error si el dispositivo pertenece a otro usuario","duration":0.30047399999999413,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Validaciones de seguridad"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Validaciones de seguridad Debe lanzar error si el dispositivo ya está revocado","status":"passed","title":"Debe lanzar error si el dispositivo ya está revocado","duration":0.3000059999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Validaciones de seguridad"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Validaciones de seguridad Debe lanzar error si el estado es not_enrolled","status":"passed","title":"Debe lanzar error si el estado es not_enrolled","duration":0.27424800000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Flujo completo con repository"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Flujo completo con repository Debe completar el flujo completo de revocación","status":"passed","title":"Debe completar el flujo completo de revocación","duration":0.4320060000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Casos de uso reales"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Casos de uso reales Debe permitir revocar dispositivo perdido","status":"passed","title":"Debe permitir revocar dispositivo perdido","duration":0.2757610000000028,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Casos de uso reales"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Casos de uso reales Debe permitir revocar dispositivo robado","status":"passed","title":"Debe permitir revocar dispositivo robado","duration":0.2702020000000118,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceUseCase - Tests de Revocación de Dispositivos","Casos de uso reales"],"fullName":"RevokeDeviceUseCase - Tests de Revocación de Dispositivos Casos de uso reales Debe permitir revocación preventiva antes de vender dispositivo","status":"passed","title":"Debe permitir revocación preventiva antes de vender dispositivo","duration":0.1933830000000114,"failureMessages":[],"meta":{}}],"startTime":1766116811284,"endTime":1766116811291.1934,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/application/use-cases/__tests__/revoke-device.use-case.test.ts"},{"assertionResults":[{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","authorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) authorized AAGUIDs accepts Windows Hello AAGUID","status":"passed","title":"accepts Windows Hello AAGUID","duration":5.727740999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","authorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) authorized AAGUIDs accepts Google Password Manager AAGUID","status":"passed","title":"accepts Google Password Manager AAGUID","duration":1.3095190000000088,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","authorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) authorized AAGUIDs accepts iCloud Keychain AAGUID","status":"passed","title":"accepts iCloud Keychain AAGUID","duration":0.9620119999999872,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","authorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) authorized AAGUIDs accepts Samsung Pass AAGUID","status":"passed","title":"accepts Samsung Pass AAGUID","duration":1.263534000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","authorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) authorized AAGUIDs accepts uppercase AAGUID (case insensitive)","status":"passed","title":"accepts uppercase AAGUID (case insensitive)","duration":3.6614759999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","unauthorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) unauthorized AAGUIDs rejects unknown AAGUID","status":"passed","title":"rejects unknown AAGUID","duration":0.8938249999999925,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","unauthorized AAGUIDs"],"fullName":"AaguidValidationService when validation is enabled (default) unauthorized AAGUIDs rejects NULL AAGUID when allowNull is false","status":"passed","title":"rejects NULL AAGUID when allowNull is false","duration":1.7435089999999889,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","utility methods"],"fullName":"AaguidValidationService when validation is enabled (default) utility methods isEnabled returns true when validation is enabled","status":"passed","title":"isEnabled returns true when validation is enabled","duration":0.7384020000000078,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is enabled (default)","utility methods"],"fullName":"AaguidValidationService when validation is enabled (default) utility methods getAuthorizedAaguids returns list of whitelisted AAGUIDs","status":"passed","title":"getAuthorizedAaguids returns list of whitelisted AAGUIDs","duration":2.0301330000000064,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is disabled"],"fullName":"AaguidValidationService when validation is disabled accepts any AAGUID when disabled","status":"passed","title":"accepts any AAGUID when disabled","duration":0.818072000000015,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is disabled"],"fullName":"AaguidValidationService when validation is disabled accepts NULL AAGUID when validation is disabled","status":"passed","title":"accepts NULL AAGUID when validation is disabled","duration":0.6727019999999868,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when validation is disabled"],"fullName":"AaguidValidationService when validation is disabled isEnabled returns false when validation is disabled","status":"passed","title":"isEnabled returns false when validation is disabled","duration":0.703046999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when allowNull is true"],"fullName":"AaguidValidationService when allowNull is true accepts NULL AAGUID when allowNull is true","status":"passed","title":"accepts NULL AAGUID when allowNull is true","duration":0.7543770000000052,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when allowNull is true"],"fullName":"AaguidValidationService when allowNull is true still rejects unknown non-null AAGUIDs","status":"passed","title":"still rejects unknown non-null AAGUIDs","duration":0.6826979999999878,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when allowUnknown is true (permissive mode)"],"fullName":"AaguidValidationService when allowUnknown is true (permissive mode) accepts unknown AAGUID with permissive mode enabled","status":"passed","title":"accepts unknown AAGUID with permissive mode enabled","duration":0.7499569999999949,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when allowUnknown is true (permissive mode)"],"fullName":"AaguidValidationService when allowUnknown is true (permissive mode) still validates known AAGUIDs normally","status":"passed","title":"still validates known AAGUIDs normally","duration":2.898371999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["AaguidValidationService","when allowUnknown is true (permissive mode)"],"fullName":"AaguidValidationService when allowUnknown is true (permissive mode) still rejects NULL AAGUID when allowNull is false","status":"passed","title":"still rejects NULL AAGUID when allowNull is false","duration":0.6993909999999914,"failureMessages":[],"meta":{}}],"startTime":1766116813189,"endTime":1766116813215.6995,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/domain/services/__tests__/aaguid-validation.service.test.ts"},{"assertionResults":[{"ancestorTitles":["OneToOnePolicyService","validate","compliant scenarios (no violations)"],"fullName":"OneToOnePolicyService validate compliant scenarios (no violations) returns compliant when no existing devices","status":"passed","title":"returns compliant when no existing devices","duration":1.4271779999999978,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","validate","compliant scenarios (no violations)"],"fullName":"OneToOnePolicyService validate compliant scenarios (no violations) returns compliant when device exists but is inactive","status":"passed","title":"returns compliant when device exists but is inactive","duration":0.3341170000000062,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","validate","compliant scenarios (no violations)"],"fullName":"OneToOnePolicyService validate compliant scenarios (no violations) returns compliant when device is active for same user (re-validation)","status":"passed","title":"returns compliant when device is active for same user (re-validation)","duration":0.2539870000000093,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","validate","device conflict (device enrolled by another user)"],"fullName":"OneToOnePolicyService validate device conflict (device enrolled by another user) detects device conflict when device is active for different user","status":"passed","title":"detects device conflict when device is active for different user","duration":0.7970260000000025,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","validate","user conflict (user has other devices)"],"fullName":"OneToOnePolicyService validate user conflict (user has other devices) detects user conflict when user has other active devices","status":"passed","title":"detects user conflict when user has other active devices","duration":0.34189099999998973,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","validate","user conflict (user has other devices)"],"fullName":"OneToOnePolicyService validate user conflict (user has other devices) detects multiple device conflict","status":"passed","title":"detects multiple device conflict","duration":1.0850149999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","validate","combined conflicts"],"fullName":"OneToOnePolicyService validate combined conflicts detects both device and user conflicts simultaneously","status":"passed","title":"detects both device and user conflicts simultaneously","duration":0.3616880000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","revokeViolations"],"fullName":"OneToOnePolicyService revokeViolations returns empty result when no violations exist","status":"passed","title":"returns empty result when no violations exist","duration":0.32919199999999194,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","revokeViolations"],"fullName":"OneToOnePolicyService revokeViolations revokes device from other user (device conflict by fingerprint)","status":"passed","title":"revokes device from other user (device conflict by fingerprint)","duration":0.6559239999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","revokeViolations"],"fullName":"OneToOnePolicyService revokeViolations does not revoke when no other user has same fingerprint","status":"passed","title":"does not revoke when no other user has same fingerprint","duration":0.3305909999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","revokeViolations"],"fullName":"OneToOnePolicyService revokeViolations revokes all user existing devices (user conflict)","status":"passed","title":"revokes all user existing devices (user conflict)","duration":0.2724240000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","revokeViolations"],"fullName":"OneToOnePolicyService revokeViolations handles both conflicts in correct order","status":"passed","title":"handles both conflicts in correct order","duration":0.30099000000001297,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","isDuplicateEnrollment"],"fullName":"OneToOnePolicyService isDuplicateEnrollment returns true when device is active for same user","status":"passed","title":"returns true when device is active for same user","duration":0.2502139999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","isDuplicateEnrollment"],"fullName":"OneToOnePolicyService isDuplicateEnrollment returns false when device is inactive for same user","status":"passed","title":"returns false when device is inactive for same user","duration":0.21761800000000164,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","isDuplicateEnrollment"],"fullName":"OneToOnePolicyService isDuplicateEnrollment returns false when device is active for different user","status":"passed","title":"returns false when device is active for different user","duration":0.1946530000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","isDuplicateEnrollment"],"fullName":"OneToOnePolicyService isDuplicateEnrollment returns false when device does not exist","status":"passed","title":"returns false when device does not exist","duration":0.958439999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","integration scenarios"],"fullName":"OneToOnePolicyService integration scenarios workflow: validate -> revokeViolations for re-enrollment","status":"passed","title":"workflow: validate -> revokeViolations for re-enrollment","duration":0.29369299999999043,"failureMessages":[],"meta":{}},{"ancestorTitles":["OneToOnePolicyService","integration scenarios"],"fullName":"OneToOnePolicyService integration scenarios workflow: device takeover from another user by fingerprint","status":"passed","title":"workflow: device takeover from another user by fingerprint","duration":0.21050900000000183,"failureMessages":[],"meta":{}}],"startTime":1766116810085,"endTime":1766116810094.2937,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/domain/services/__tests__/one-to-one-policy.service.test.ts"},{"assertionResults":[{"ancestorTitles":["RestrictionService (Stub)","checkRestrictions"],"fullName":"RestrictionService (Stub) checkRestrictions returns blocked=false for any user (stub behavior)","status":"passed","title":"returns blocked=false for any user (stub behavior)","duration":0.8594240000000042,"failureMessages":[],"meta":{}},{"ancestorTitles":["RestrictionService (Stub)","checkRestrictions"],"fullName":"RestrictionService (Stub) checkRestrictions returns blocked=false for different users","status":"passed","title":"returns blocked=false for different users","duration":0.19953499999999735,"failureMessages":[],"meta":{}},{"ancestorTitles":["RestrictionService (Stub)","checkRestrictions"],"fullName":"RestrictionService (Stub) checkRestrictions implements IRestrictionService interface","status":"passed","title":"implements IRestrictionService interface","duration":0.11782300000000134,"failureMessages":[],"meta":{}},{"ancestorTitles":["RestrictionService (Stub)","stub documentation"],"fullName":"RestrictionService (Stub) stub documentation service has correct structure for future implementation","status":"passed","title":"service has correct structure for future implementation","duration":0.40135399999999777,"failureMessages":[],"meta":{}}],"startTime":1766116814476,"endTime":1766116814478.4014,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/domain/services/__tests__/restriction.service.test.ts"},{"assertionResults":[{"ancestorTitles":["DeviceStateMachine","canTransition","desde not_enrolled"],"fullName":"DeviceStateMachine canTransition desde not_enrolled permite transicion a pending (startEnrollment)","status":"passed","title":"permite transicion a pending (startEnrollment)","duration":0.7415529999999961,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde not_enrolled"],"fullName":"DeviceStateMachine canTransition desde not_enrolled NO permite transicion directa a enrolled","status":"passed","title":"NO permite transicion directa a enrolled","duration":0.1397929999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde not_enrolled"],"fullName":"DeviceStateMachine canTransition desde not_enrolled NO permite transicion a revoked","status":"passed","title":"NO permite transicion a revoked","duration":0.12175499999999317,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde not_enrolled"],"fullName":"DeviceStateMachine canTransition desde not_enrolled NO permite quedarse en not_enrolled","status":"passed","title":"NO permite quedarse en not_enrolled","duration":0.10770399999999825,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde pending"],"fullName":"DeviceStateMachine canTransition desde pending permite transicion a enrolled (finishEnrollment OK)","status":"passed","title":"permite transicion a enrolled (finishEnrollment OK)","duration":0.16886300000000176,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde pending"],"fullName":"DeviceStateMachine canTransition desde pending permite transicion a not_enrolled (TTL expira)","status":"passed","title":"permite transicion a not_enrolled (TTL expira)","duration":0.1941839999999928,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde pending"],"fullName":"DeviceStateMachine canTransition desde pending permite transicion a pending (reintento de enrollment)","status":"passed","title":"permite transicion a pending (reintento de enrollment)","duration":0.23429099999999892,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde pending"],"fullName":"DeviceStateMachine canTransition desde pending NO permite transicion directa a revoked","status":"passed","title":"NO permite transicion directa a revoked","duration":0.19403700000000867,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde enrolled"],"fullName":"DeviceStateMachine canTransition desde enrolled permite transicion a revoked (revoke manual)","status":"passed","title":"permite transicion a revoked (revoke manual)","duration":0.11287000000000091,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde enrolled"],"fullName":"DeviceStateMachine canTransition desde enrolled permite transicion a pending (re-enrollment)","status":"passed","title":"permite transicion a pending (re-enrollment)","duration":0.11666200000000515,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde enrolled"],"fullName":"DeviceStateMachine canTransition desde enrolled NO permite transicion a not_enrolled","status":"passed","title":"NO permite transicion a not_enrolled","duration":0.10850700000000302,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde enrolled"],"fullName":"DeviceStateMachine canTransition desde enrolled NO permite quedarse en enrolled","status":"passed","title":"NO permite quedarse en enrolled","duration":0.1081490000000116,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde revoked"],"fullName":"DeviceStateMachine canTransition desde revoked permite transicion a pending (nuevo enrollment)","status":"passed","title":"permite transicion a pending (nuevo enrollment)","duration":0.1416070000000076,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde revoked"],"fullName":"DeviceStateMachine canTransition desde revoked NO permite transicion directa a enrolled","status":"passed","title":"NO permite transicion directa a enrolled","duration":0.11721900000000574,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde revoked"],"fullName":"DeviceStateMachine canTransition desde revoked NO permite transicion a not_enrolled","status":"passed","title":"NO permite transicion a not_enrolled","duration":0.1102989999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde revoked"],"fullName":"DeviceStateMachine canTransition desde revoked NO permite quedarse en revoked","status":"passed","title":"NO permite quedarse en revoked","duration":0.10431900000000383,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde estado invalido"],"fullName":"DeviceStateMachine canTransition desde estado invalido retorna false para estado origen inexistente","status":"passed","title":"retorna false para estado origen inexistente","duration":0.12964599999999393,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","canTransition","desde estado invalido"],"fullName":"DeviceStateMachine canTransition desde estado invalido retorna false cuando origen es invalido sin importar destino","status":"passed","title":"retorna false cuando origen es invalido sin importar destino","duration":0.10443899999999928,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","getValidTransitions"],"fullName":"DeviceStateMachine getValidTransitions retorna [pending] desde not_enrolled","status":"passed","title":"retorna [pending] desde not_enrolled","duration":0.45969000000000904,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","getValidTransitions"],"fullName":"DeviceStateMachine getValidTransitions retorna [enrolled, not_enrolled, pending] desde pending","status":"passed","title":"retorna [enrolled, not_enrolled, pending] desde pending","duration":0.12789200000000278,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","getValidTransitions"],"fullName":"DeviceStateMachine getValidTransitions retorna [revoked, pending] desde enrolled","status":"passed","title":"retorna [revoked, pending] desde enrolled","duration":0.10891900000000021,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","getValidTransitions"],"fullName":"DeviceStateMachine getValidTransitions retorna [pending] desde revoked","status":"passed","title":"retorna [pending] desde revoked","duration":0.1325519999999898,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","getValidTransitions"],"fullName":"DeviceStateMachine getValidTransitions retorna array vacio para estado invalido","status":"passed","title":"retorna array vacio para estado invalido","duration":0.15209400000000528,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","assertTransition"],"fullName":"DeviceStateMachine assertTransition no lanza error para transicion valida","status":"passed","title":"no lanza error para transicion valida","duration":0.5521949999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","assertTransition"],"fullName":"DeviceStateMachine assertTransition lanza INVALID_TRANSITION para transicion invalida","status":"passed","title":"lanza INVALID_TRANSITION para transicion invalida","duration":0.21403800000000217,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","assertTransition"],"fullName":"DeviceStateMachine assertTransition incluye transiciones validas en mensaje de error","status":"passed","title":"incluye transiciones validas en mensaje de error","duration":0.1916920000000033,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","inferState"],"fullName":"DeviceStateMachine inferState retorna PENDING si hay challenge pendiente","status":"passed","title":"retorna PENDING si hay challenge pendiente","duration":0.12480499999999495,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","inferState"],"fullName":"DeviceStateMachine inferState retorna ENROLLED si hay dispositivo activo","status":"passed","title":"retorna ENROLLED si hay dispositivo activo","duration":0.13465499999999508,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","inferState"],"fullName":"DeviceStateMachine inferState retorna REVOKED si hay dispositivo revocado sin activo","status":"passed","title":"retorna REVOKED si hay dispositivo revocado sin activo","duration":0.09037800000000118,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","inferState"],"fullName":"DeviceStateMachine inferState retorna NOT_ENROLLED si no hay nada","status":"passed","title":"retorna NOT_ENROLLED si no hay nada","duration":0.08520000000000039,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","inferState"],"fullName":"DeviceStateMachine inferState prioriza PENDING sobre ENROLLED (challenge en curso)","status":"passed","title":"prioriza PENDING sobre ENROLLED (challenge en curso)","duration":0.08468600000000492,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","inferState"],"fullName":"DeviceStateMachine inferState prioriza ENROLLED sobre REVOKED","status":"passed","title":"prioriza ENROLLED sobre REVOKED","duration":0.09303400000000295,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","flujos completos"],"fullName":"DeviceStateMachine flujos completos flujo happy path: not_enrolled -> pending -> enrolled","status":"passed","title":"flujo happy path: not_enrolled -> pending -> enrolled","duration":0.8174000000000063,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","flujos completos"],"fullName":"DeviceStateMachine flujos completos flujo enrollment fallido: not_enrolled -> pending -> not_enrolled","status":"passed","title":"flujo enrollment fallido: not_enrolled -> pending -> not_enrolled","duration":0.0968819999999937,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceStateMachine","flujos completos"],"fullName":"DeviceStateMachine flujos completos flujo revoke y re-enrollment","status":"passed","title":"flujo revoke y re-enrollment","duration":0.10074500000000342,"failureMessages":[],"meta":{}}],"startTime":1766116812739,"endTime":1766116812746.1008,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/domain/state-machines/__tests__/device-state-machine.test.ts"},{"assertionResults":[{"ancestorTitles":["SessionStateMachine","isEnabled"],"fullName":"SessionStateMachine isEnabled retorna true solo para enrollment enrolled","status":"passed","title":"retorna true solo para enrollment enrolled","duration":0.8612129999999922,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","isEnabled"],"fullName":"SessionStateMachine isEnabled retorna false para enrollment not_enrolled","status":"passed","title":"retorna false para enrollment not_enrolled","duration":0.13405299999999443,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","isEnabled"],"fullName":"SessionStateMachine isEnabled retorna false para enrollment pending","status":"passed","title":"retorna false para enrollment pending","duration":0.1017620000000079,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","isEnabled"],"fullName":"SessionStateMachine isEnabled retorna false para enrollment revoked","status":"passed","title":"retorna false para enrollment revoked","duration":0.10980499999999438,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde no_session"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde no_session permite transicion a session_active (login)","status":"passed","title":"permite transicion a session_active (login)","duration":0.13454600000000028,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde no_session"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde no_session NO permite transicion directa a session_expired","status":"passed","title":"NO permite transicion directa a session_expired","duration":0.13640500000001055,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde no_session"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde no_session NO permite quedarse en no_session","status":"passed","title":"NO permite quedarse en no_session","duration":0.11510700000000895,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde session_active"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde session_active permite transicion a session_expired (TTL)","status":"passed","title":"permite transicion a session_expired (TTL)","duration":0.10713099999999542,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde session_active"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde session_active permite transicion a no_session (logout)","status":"passed","title":"permite transicion a no_session (logout)","duration":0.10753099999999449,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde session_active"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde session_active NO permite quedarse en session_active","status":"passed","title":"NO permite quedarse en session_active","duration":0.1314959999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde session_expired"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde session_expired permite transicion a no_session (cleanup)","status":"passed","title":"permite transicion a no_session (cleanup)","duration":0.11176000000000386,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde session_expired"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde session_expired NO permite transicion directa a session_active","status":"passed","title":"NO permite transicion directa a session_active","duration":0.11393300000000295,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment enrolled)","desde session_expired"],"fullName":"SessionStateMachine canTransition (con enrollment enrolled) desde session_expired NO permite quedarse en session_expired","status":"passed","title":"NO permite quedarse en session_expired","duration":0.1046620000000047,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment NO enrolled)","cuando enrollment es not_enrolled"],"fullName":"SessionStateMachine canTransition (con enrollment NO enrolled) cuando enrollment es not_enrolled NO permite transicion de no_session a session_active","status":"passed","title":"NO permite transicion de no_session a session_active","duration":0.13440599999999847,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment NO enrolled)","cuando enrollment es not_enrolled"],"fullName":"SessionStateMachine canTransition (con enrollment NO enrolled) cuando enrollment es not_enrolled permite transicion de session_active a no_session (cleanup)","status":"passed","title":"permite transicion de session_active a no_session (cleanup)","duration":0.10652799999999729,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment NO enrolled)","cuando enrollment es not_enrolled"],"fullName":"SessionStateMachine canTransition (con enrollment NO enrolled) cuando enrollment es not_enrolled permite transicion de session_expired a no_session","status":"passed","title":"permite transicion de session_expired a no_session","duration":0.10725200000000257,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment NO enrolled)","cuando enrollment es pending"],"fullName":"SessionStateMachine canTransition (con enrollment NO enrolled) cuando enrollment es pending NO permite iniciar sesion","status":"passed","title":"NO permite iniciar sesion","duration":0.11758500000000538,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment NO enrolled)","cuando enrollment es revoked"],"fullName":"SessionStateMachine canTransition (con enrollment NO enrolled) cuando enrollment es revoked NO permite iniciar sesion","status":"passed","title":"NO permite iniciar sesion","duration":0.10624999999998863,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","canTransition (con enrollment NO enrolled)","cuando enrollment es revoked"],"fullName":"SessionStateMachine canTransition (con enrollment NO enrolled) cuando enrollment es revoked permite limpiar sesion activa","status":"passed","title":"permite limpiar sesion activa","duration":0.1072110000000066,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","getValidTransitions","con enrollment enrolled"],"fullName":"SessionStateMachine getValidTransitions con enrollment enrolled retorna [session_active] desde no_session","status":"passed","title":"retorna [session_active] desde no_session","duration":0.4913800000000066,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","getValidTransitions","con enrollment enrolled"],"fullName":"SessionStateMachine getValidTransitions con enrollment enrolled retorna [session_expired, no_session] desde session_active","status":"passed","title":"retorna [session_expired, no_session] desde session_active","duration":0.15923899999999946,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","getValidTransitions","con enrollment enrolled"],"fullName":"SessionStateMachine getValidTransitions con enrollment enrolled retorna [no_session] desde session_expired","status":"passed","title":"retorna [no_session] desde session_expired","duration":0.12107199999999807,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","getValidTransitions","con enrollment NOT enrolled"],"fullName":"SessionStateMachine getValidTransitions con enrollment NOT enrolled retorna [] desde no_session (no puede iniciar)","status":"passed","title":"retorna [] desde no_session (no puede iniciar)","duration":0.15890100000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","getValidTransitions","con enrollment NOT enrolled"],"fullName":"SessionStateMachine getValidTransitions con enrollment NOT enrolled retorna [no_session] desde session_active (solo cleanup)","status":"passed","title":"retorna [no_session] desde session_active (solo cleanup)","duration":0.14630800000000477,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","getValidTransitions","con enrollment NOT enrolled"],"fullName":"SessionStateMachine getValidTransitions con enrollment NOT enrolled retorna [no_session] desde session_expired","status":"passed","title":"retorna [no_session] desde session_expired","duration":0.12232099999999946,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","assertTransition"],"fullName":"SessionStateMachine assertTransition no lanza error para transicion valida","status":"passed","title":"no lanza error para transicion valida","duration":0.5653629999999907,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","assertTransition"],"fullName":"SessionStateMachine assertTransition lanza INVALID_SESSION_TRANSITION para transicion invalida","status":"passed","title":"lanza INVALID_SESSION_TRANSITION para transicion invalida","duration":0.1978239999999971,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","assertTransition"],"fullName":"SessionStateMachine assertTransition lanza SESSION_BLOCKED cuando enrollment no esta activo","status":"passed","title":"lanza SESSION_BLOCKED cuando enrollment no esta activo","duration":0.8371350000000035,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","assertTransition"],"fullName":"SessionStateMachine assertTransition mensaje de SESSION_BLOCKED incluye estado de enrollment","status":"passed","title":"mensaje de SESSION_BLOCKED incluye estado de enrollment","duration":0.11871700000000374,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","assertTransition"],"fullName":"SessionStateMachine assertTransition permite ir a no_session incluso con enrollment inactivo","status":"passed","title":"permite ir a no_session incluso con enrollment inactivo","duration":0.11447200000000635,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","flujos completos"],"fullName":"SessionStateMachine flujos completos flujo happy path: login -> logout","status":"passed","title":"flujo happy path: login -> logout","duration":0.12064500000001033,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","flujos completos"],"fullName":"SessionStateMachine flujos completos flujo expiracion: login -> expired -> cleanup","status":"passed","title":"flujo expiracion: login -> expired -> cleanup","duration":0.08382899999999438,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","flujos completos"],"fullName":"SessionStateMachine flujos completos flujo revoke durante sesion activa","status":"passed","title":"flujo revoke durante sesion activa","duration":0.07672099999999205,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","flujos completos"],"fullName":"SessionStateMachine flujos completos intento de login sin enrollment completo","status":"passed","title":"intento de login sin enrollment completo","duration":0.1409579999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","integracion con EnrollmentStateMachine"],"fullName":"SessionStateMachine integracion con EnrollmentStateMachine solo enrolled permite iniciar sesion","status":"passed","title":"solo enrolled permite iniciar sesion","duration":0.10875099999999804,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","inferState - Inferir estado de session desde datos"],"fullName":"SessionStateMachine inferState - Inferir estado de session desde datos debe retornar NO_SESSION cuando no hay session key","status":"passed","title":"debe retornar NO_SESSION cuando no hay session key","duration":0.07940200000000175,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","inferState - Inferir estado de session desde datos"],"fullName":"SessionStateMachine inferState - Inferir estado de session desde datos debe retornar NO_SESSION incluso si sessionKeyExpired es true cuando no hay key","status":"passed","title":"debe retornar NO_SESSION incluso si sessionKeyExpired es true cuando no hay key","duration":0.05622299999998859,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","inferState - Inferir estado de session desde datos"],"fullName":"SessionStateMachine inferState - Inferir estado de session desde datos debe retornar SESSION_EXPIRED cuando hay key pero está expirada","status":"passed","title":"debe retornar SESSION_EXPIRED cuando hay key pero está expirada","duration":0.05305100000001062,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","inferState - Inferir estado de session desde datos"],"fullName":"SessionStateMachine inferState - Inferir estado de session desde datos debe retornar SESSION_ACTIVE cuando hay key y no está expirada","status":"passed","title":"debe retornar SESSION_ACTIVE cuando hay key y no está expirada","duration":0.0511020000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","Edge cases - Estados inválidos"],"fullName":"SessionStateMachine Edge cases - Estados inválidos debe manejar estado inválido en canTransition","status":"passed","title":"debe manejar estado inválido en canTransition","duration":0.05994800000000566,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionStateMachine","Edge cases - Estados inválidos"],"fullName":"SessionStateMachine Edge cases - Estados inválidos debe retornar array vacío para getValidTransitions con estado inválido","status":"passed","title":"debe retornar array vacío para getValidTransitions con estado inválido","duration":0.06957800000000702,"failureMessages":[],"meta":{}}],"startTime":1766116811426,"endTime":1766116811434.0793,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/domain/state-machines/__tests__/session-state-machine.test.ts"},{"assertionResults":[{"ancestorTitles":["EcdhService - Tests de Key Exchange","generateKeyPair() - Generar par de claves efímeras"],"fullName":"EcdhService - Tests de Key Exchange generateKeyPair() - Generar par de claves efímeras Debe generar par de claves con publicKey en base64 y privateKey como Buffer","status":"passed","title":"Debe generar par de claves con publicKey en base64 y privateKey como Buffer","duration":1.1575809999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","generateKeyPair() - Generar par de claves efímeras"],"fullName":"EcdhService - Tests de Key Exchange generateKeyPair() - Generar par de claves efímeras Debe generar pares de claves diferentes en cada llamada","status":"passed","title":"Debe generar pares de claves diferentes en cada llamada","duration":0.6441429999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","generateKeyPair() - Generar par de claves efímeras"],"fullName":"EcdhService - Tests de Key Exchange generateKeyPair() - Generar par de claves efímeras Debe generar claves privadas de longitud correcta para P-256","status":"passed","title":"Debe generar claves privadas de longitud correcta para P-256","duration":0.1755200000000059,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","generateKeyPair() - Generar par de claves efímeras"],"fullName":"EcdhService - Tests de Key Exchange generateKeyPair() - Generar par de claves efímeras Debe generar clave pública válida decodificable en base64","status":"passed","title":"Debe generar clave pública válida decodificable en base64","duration":0.5892139999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","performKeyExchange() - Key exchange completo"],"fullName":"EcdhService - Tests de Key Exchange performKeyExchange() - Key exchange completo Debe realizar key exchange y retornar sharedSecret y serverPublicKey","status":"passed","title":"Debe realizar key exchange y retornar sharedSecret y serverPublicKey","duration":0.44761300000000404,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","performKeyExchange() - Key exchange completo"],"fullName":"EcdhService - Tests de Key Exchange performKeyExchange() - Key exchange completo Debe generar serverPublicKey diferente en cada key exchange (Perfect Forward Secrecy)","status":"passed","title":"Debe generar serverPublicKey diferente en cada key exchange (Perfect Forward Secrecy)","duration":0.37069199999999114,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","performKeyExchange() - Key exchange completo"],"fullName":"EcdhService - Tests de Key Exchange performKeyExchange() - Key exchange completo Debe producir mismo sharedSecret en cliente y servidor","status":"passed","title":"Debe producir mismo sharedSecret en cliente y servidor","duration":0.3840679999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","performKeyExchange() - Key exchange completo"],"fullName":"EcdhService - Tests de Key Exchange performKeyExchange() - Key exchange completo Debe manejar clave pública del cliente en formato base64 válido","status":"passed","title":"Debe manejar clave pública del cliente en formato base64 válido","duration":0.32603000000000293,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","performKeyExchange() - Key exchange completo"],"fullName":"EcdhService - Tests de Key Exchange performKeyExchange() - Key exchange completo Debe lanzar error con clave pública inválida","status":"passed","title":"Debe lanzar error con clave pública inválida","duration":0.41922300000000234,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","performKeyExchange() - Key exchange completo"],"fullName":"EcdhService - Tests de Key Exchange performKeyExchange() - Key exchange completo Debe lanzar error con clave pública de longitud incorrecta","status":"passed","title":"Debe lanzar error con clave pública de longitud incorrecta","duration":0.2661810000000031,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","Vectores de prueba con valores determinísticos"],"fullName":"EcdhService - Tests de Key Exchange Vectores de prueba con valores determinísticos Debe producir sharedSecret que cliente puede verificar independientemente","status":"passed","title":"Debe producir sharedSecret que cliente puede verificar independientemente","duration":0.33067200000000696,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","Seguridad y validaciones"],"fullName":"EcdhService - Tests de Key Exchange Seguridad y validaciones Debe usar curva P-256 (prime256v1)","status":"passed","title":"Debe usar curva P-256 (prime256v1)","duration":0.27265699999999526,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","Seguridad y validaciones"],"fullName":"EcdhService - Tests de Key Exchange Seguridad y validaciones Debe generar sharedSecret de 32 bytes (256 bits)","status":"passed","title":"Debe generar sharedSecret de 32 bytes (256 bits)","duration":0.28116099999999733,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","Seguridad y validaciones"],"fullName":"EcdhService - Tests de Key Exchange Seguridad y validaciones Debe generar sharedSecret con alta entropía (no todos ceros)","status":"passed","title":"Debe generar sharedSecret con alta entropía (no todos ceros)","duration":0.3404730000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["EcdhService - Tests de Key Exchange","Interoperabilidad con cliente frontend"],"fullName":"EcdhService - Tests de Key Exchange Interoperabilidad con cliente frontend Debe producir resultado compatible con Web Crypto API del frontend","status":"passed","title":"Debe producir resultado compatible con Web Crypto API del frontend","duration":0.4202449999999942,"failureMessages":[],"meta":{}}],"startTime":1766116811854,"endTime":1766116811861.4202,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/infrastructure/crypto/__tests__/ecdh.service.test.ts"},{"assertionResults":[{"ancestorTitles":["Fido2Service - Tests de WebAuthn","generateRegistrationOptions() - Generar challenge de registro"],"fullName":"Fido2Service - Tests de WebAuthn generateRegistrationOptions() - Generar challenge de registro Debe generar opciones de registro con datos del usuario","status":"passed","title":"Debe generar opciones de registro con datos del usuario","duration":7.573279999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","generateRegistrationOptions() - Generar challenge de registro"],"fullName":"Fido2Service - Tests de WebAuthn generateRegistrationOptions() - Generar challenge de registro Debe configurar authenticatorSelection para platform authenticator","status":"passed","title":"Debe configurar authenticatorSelection para platform authenticator","duration":0.707099999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","generateRegistrationOptions() - Generar challenge de registro"],"fullName":"Fido2Service - Tests de WebAuthn generateRegistrationOptions() - Generar challenge de registro Debe excluir credenciales existentes para evitar duplicados","status":"passed","title":"Debe excluir credenciales existentes para evitar duplicados","duration":0.577635000000015,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","generateRegistrationOptions() - Generar challenge de registro"],"fullName":"Fido2Service - Tests de WebAuthn generateRegistrationOptions() - Generar challenge de registro Debe soportar algoritmos ES256 (-7) y RS256 (-257)","status":"passed","title":"Debe soportar algoritmos ES256 (-7) y RS256 (-257)","duration":0.4400070000000085,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","generateRegistrationOptions() - Generar challenge de registro"],"fullName":"Fido2Service - Tests de WebAuthn generateRegistrationOptions() - Generar challenge de registro Debe configurar timeout de 5 minutos (300000ms)","status":"passed","title":"Debe configurar timeout de 5 minutos (300000ms)","duration":0.34269699999998693,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","verifyRegistration() - Verificar respuesta de registro"],"fullName":"Fido2Service - Tests de WebAuthn verifyRegistration() - Verificar respuesta de registro Debe verificar registro exitosamente","status":"passed","title":"Debe verificar registro exitosamente","duration":0.6276320000000055,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","verifyRegistration() - Verificar respuesta de registro"],"fullName":"Fido2Service - Tests de WebAuthn verifyRegistration() - Verificar respuesta de registro Debe rechazar registro con challenge incorrecto","status":"passed","title":"Debe rechazar registro con challenge incorrecto","duration":1.0434740000000033,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","verifyRegistration() - Verificar respuesta de registro"],"fullName":"Fido2Service - Tests de WebAuthn verifyRegistration() - Verificar respuesta de registro Debe requerir user verification","status":"passed","title":"Debe requerir user verification","duration":0.3567160000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","extractCredentialInfo() - Extraer información de credencial"],"fullName":"Fido2Service - Tests de WebAuthn extractCredentialInfo() - Extraer información de credencial Debe extraer credentialId, publicKey, counter y aaguid","status":"passed","title":"Debe extraer credentialId, publicKey, counter y aaguid","duration":0.47562899999999786,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","extractCredentialInfo() - Extraer información de credencial"],"fullName":"Fido2Service - Tests de WebAuthn extractCredentialInfo() - Extraer información de credencial Debe lanzar error si falta registrationInfo","status":"passed","title":"Debe lanzar error si falta registrationInfo","duration":1.4768349999999941,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","extractCredentialInfo() - Extraer información de credencial"],"fullName":"Fido2Service - Tests de WebAuthn extractCredentialInfo() - Extraer información de credencial Debe lanzar error si falta credential.id","status":"passed","title":"Debe lanzar error si falta credential.id","duration":0.34524600000000305,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","generateAuthenticationOptions() - Generar challenge de autenticación"],"fullName":"Fido2Service - Tests de WebAuthn generateAuthenticationOptions() - Generar challenge de autenticación Debe generar opciones de autenticación con allowCredentials","status":"passed","title":"Debe generar opciones de autenticación con allowCredentials","duration":0.6085759999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","verifyAuthentication() - Verificar respuesta de autenticación"],"fullName":"Fido2Service - Tests de WebAuthn verifyAuthentication() - Verificar respuesta de autenticación Debe verificar autenticación exitosamente","status":"passed","title":"Debe verificar autenticación exitosamente","duration":0.4812869999999805,"failureMessages":[],"meta":{}},{"ancestorTitles":["Fido2Service - Tests de WebAuthn","Conversiones Base64URL y Uint8Array"],"fullName":"Fido2Service - Tests de WebAuthn Conversiones Base64URL y Uint8Array Debe convertir userId numérico a Uint8Array","status":"passed","title":"Debe convertir userId numérico a Uint8Array","duration":0.46172599999999875,"failureMessages":[],"meta":{}}],"startTime":1766116808450,"endTime":1766116808466.4617,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/infrastructure/crypto/__tests__/fido2.service.test.ts"},{"assertionResults":[{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Derivación con HkdfService (Backend)"],"fullName":"HKDF Compatibilidad Frontend-Backend Derivación con HkdfService (Backend) debe derivar session_key determinística con vector 1","status":"passed","title":"debe derivar session_key determinística con vector 1","duration":2.076053999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Derivación con HkdfService (Backend)"],"fullName":"HKDF Compatibilidad Frontend-Backend Derivación con HkdfService (Backend) debe producir session_key diferente con vector 2 (diferente credentialId)","status":"passed","title":"debe producir session_key diferente con vector 2 (diferente credentialId)","duration":0.5474920000000054,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Compatibilidad con Web Crypto API (simulación)"],"fullName":"HKDF Compatibilidad Frontend-Backend Compatibilidad con Web Crypto API (simulación) HKDF nativo debe producir mismo resultado que HkdfService","status":"passed","title":"HKDF nativo debe producir mismo resultado que HkdfService","duration":0.4445639999999855,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Compatibilidad con Web Crypto API (simulación)"],"fullName":"HKDF Compatibilidad Frontend-Backend Compatibilidad con Web Crypto API (simulación) info string debe formarse correctamente","status":"passed","title":"info string debe formarse correctamente","duration":0.12032199999998738,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Compatibilidad con Web Crypto API (simulación)"],"fullName":"HKDF Compatibilidad Frontend-Backend Compatibilidad con Web Crypto API (simulación) salt vacío debe ser equivalente entre Uint8Array y Buffer","status":"passed","title":"salt vacío debe ser equivalente entre Uint8Array y Buffer","duration":0.15302199999999289,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Documentación de Vectores de Prueba"],"fullName":"HKDF Compatibilidad Frontend-Backend Documentación de Vectores de Prueba debe documentar session_key esperada para vector 1","status":"passed","title":"debe documentar session_key esperada para vector 1","duration":0.29049100000000294,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Edge Cases"],"fullName":"HKDF Compatibilidad Frontend-Backend Edge Cases debe manejar credentialId con caracteres especiales Base64","status":"passed","title":"debe manejar credentialId con caracteres especiales Base64","duration":0.44652600000000575,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Edge Cases"],"fullName":"HKDF Compatibilidad Frontend-Backend Edge Cases debe manejar credentialId largo","status":"passed","title":"debe manejar credentialId largo","duration":0.17581900000001838,"failureMessages":[],"meta":{}},{"ancestorTitles":["HKDF Compatibilidad Frontend-Backend","Edge Cases"],"fullName":"HKDF Compatibilidad Frontend-Backend Edge Cases debe manejar sharedSecret de exactamente 32 bytes (P-256 ECDH)","status":"passed","title":"debe manejar sharedSecret de exactamente 32 bytes (P-256 ECDH)","duration":0.17551399999999262,"failureMessages":[],"meta":{}}],"startTime":1766116812161,"endTime":1766116812166.1758,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/infrastructure/crypto/__tests__/hkdf-compatibility.test.ts"},{"assertionResults":[{"ancestorTitles":["HkdfService","deriveSessionKey con credentialId binding"],"fullName":"HkdfService deriveSessionKey con credentialId binding debe derivar session_key de 32 bytes","status":"passed","title":"debe derivar session_key de 32 bytes","duration":1.8072080000000028,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveSessionKey con credentialId binding"],"fullName":"HkdfService deriveSessionKey con credentialId binding debe producir session_keys diferentes para diferentes credentialId","status":"passed","title":"debe producir session_keys diferentes para diferentes credentialId","duration":0.29724000000000217,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveSessionKey con credentialId binding"],"fullName":"HkdfService deriveSessionKey con credentialId binding debe producir session_key idéntica para mismo sharedSecret y credentialId","status":"passed","title":"debe producir session_key idéntica para mismo sharedSecret y credentialId","duration":0.2389960000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveSessionKey con credentialId binding"],"fullName":"HkdfService deriveSessionKey con credentialId binding debe producir session_keys diferentes para diferentes sharedSecret","status":"passed","title":"debe producir session_keys diferentes para diferentes sharedSecret","duration":0.20298699999999315,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveHandshakeSecret"],"fullName":"HkdfService deriveHandshakeSecret debe derivar handshake_secret de 32 bytes","status":"passed","title":"debe derivar handshake_secret de 32 bytes","duration":0.2633239999999972,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveHandshakeSecret"],"fullName":"HkdfService deriveHandshakeSecret debe producir secrets diferentes para diferentes usuarios","status":"passed","title":"debe producir secrets diferentes para diferentes usuarios","duration":0.348811000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveHandshakeSecret"],"fullName":"HkdfService deriveHandshakeSecret debe ser determinístico para mismo credentialId y userId","status":"passed","title":"debe ser determinístico para mismo credentialId y userId","duration":0.2261220000000037,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveKey - Derivación genérica"],"fullName":"HkdfService deriveKey - Derivación genérica debe derivar clave de 32 bytes por defecto","status":"passed","title":"debe derivar clave de 32 bytes por defecto","duration":0.20514099999999758,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveKey - Derivación genérica"],"fullName":"HkdfService deriveKey - Derivación genérica debe derivar clave con longitud personalizada","status":"passed","title":"debe derivar clave con longitud personalizada","duration":0.2281990000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveKey - Derivación genérica"],"fullName":"HkdfService deriveKey - Derivación genérica debe producir claves diferentes para diferentes contextos","status":"passed","title":"debe producir claves diferentes para diferentes contextos","duration":0.20944699999999727,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","deriveKey - Derivación genérica"],"fullName":"HkdfService deriveKey - Derivación genérica debe ser determinístico para mismo ikm y contexto","status":"passed","title":"debe ser determinístico para mismo ikm y contexto","duration":0.1819279999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","generateTotp - Generación TOTP"],"fullName":"HkdfService generateTotp - Generación TOTP debe generar TOTP de 6 dígitos","status":"passed","title":"debe generar TOTP de 6 dígitos","duration":0.4416220000000095,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","generateTotp - Generación TOTP"],"fullName":"HkdfService generateTotp - Generación TOTP debe generar TOTP con padding de ceros a la izquierda","status":"passed","title":"debe generar TOTP con padding de ceros a la izquierda","duration":0.20171200000000056,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","generateTotp - Generación TOTP"],"fullName":"HkdfService generateTotp - Generación TOTP debe generar diferentes TOTPs con diferentes time steps","status":"passed","title":"debe generar diferentes TOTPs con diferentes time steps","duration":0.1715899999999948,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","generateTotp - Generación TOTP"],"fullName":"HkdfService generateTotp - Generación TOTP debe ser consistente en el mismo periodo de tiempo","status":"passed","title":"debe ser consistente en el mismo periodo de tiempo","duration":0.20502000000000464,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","generateTotp - Generación TOTP"],"fullName":"HkdfService generateTotp - Generación TOTP debe generar TOTPs diferentes para secrets diferentes","status":"passed","title":"debe generar TOTPs diferentes para secrets diferentes","duration":0.5403830000000056,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","validateTotp - Validación TOTP"],"fullName":"HkdfService validateTotp - Validación TOTP debe validar TOTP correcto en ventana actual","status":"passed","title":"debe validar TOTP correcto en ventana actual","duration":0.2230509999999981,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","validateTotp - Validación TOTP"],"fullName":"HkdfService validateTotp - Validación TOTP debe rechazar TOTP incorrecto","status":"passed","title":"debe rechazar TOTP incorrecto","duration":0.14593200000000195,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","validateTotp - Validación TOTP"],"fullName":"HkdfService validateTotp - Validación TOTP debe validar TOTP con ventana de tolerancia","status":"passed","title":"debe validar TOTP con ventana de tolerancia","duration":0.14282500000000198,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","validateTotp - Validación TOTP"],"fullName":"HkdfService validateTotp - Validación TOTP debe rechazar TOTP con secret diferente","status":"passed","title":"debe rechazar TOTP con secret diferente","duration":0.14452899999999147,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","validateTotp - Validación TOTP"],"fullName":"HkdfService validateTotp - Validación TOTP debe rechazar TOTP con formato inválido","status":"passed","title":"debe rechazar TOTP con formato inválido","duration":0.26568000000000325,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","validateTotp - Validación TOTP"],"fullName":"HkdfService validateTotp - Validación TOTP debe manejar ventana de tolerancia de 0","status":"passed","title":"debe manejar ventana de tolerancia de 0","duration":0.13741699999999923,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Error handling y edge cases"],"fullName":"HkdfService Error handling y edge cases debe manejar Buffer vacío en deriveSessionKey","status":"passed","title":"debe manejar Buffer vacío en deriveSessionKey","duration":4.015567000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Error handling y edge cases"],"fullName":"HkdfService Error handling y edge cases debe manejar credentialId largo pero dentro del límite","status":"passed","title":"debe manejar credentialId largo pero dentro del límite","duration":2.29007,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Error handling y edge cases"],"fullName":"HkdfService Error handling y edge cases debe manejar userId = 0 en deriveHandshakeSecret","status":"passed","title":"debe manejar userId = 0 en deriveHandshakeSecret","duration":0.19244700000001558,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Error handling y edge cases"],"fullName":"HkdfService Error handling y edge cases debe manejar userId negativo en deriveHandshakeSecret","status":"passed","title":"debe manejar userId negativo en deriveHandshakeSecret","duration":0.1467580000000055,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Error handling y edge cases"],"fullName":"HkdfService Error handling y edge cases debe manejar context vacío en deriveKey","status":"passed","title":"debe manejar context vacío en deriveKey","duration":0.1580409999999972,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Error handling y edge cases"],"fullName":"HkdfService Error handling y edge cases debe generar TOTP válido con secret de 1 byte","status":"passed","title":"debe generar TOTP válido con secret de 1 byte","duration":0.13159899999999425,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Compatibilidad con masterSecret por defecto"],"fullName":"HkdfService Compatibilidad con masterSecret por defecto debe usar config.crypto.masterSecret si no se proporciona","status":"passed","title":"debe usar config.crypto.masterSecret si no se proporciona","duration":0.14625499999999647,"failureMessages":[],"meta":{}},{"ancestorTitles":["HkdfService","Compatibilidad con masterSecret por defecto"],"fullName":"HkdfService Compatibilidad con masterSecret por defecto debe derivar claves consistentemente con masterSecret personalizado","status":"passed","title":"debe derivar claves consistentemente con masterSecret personalizado","duration":0.17601999999999407,"failureMessages":[],"meta":{}}],"startTime":1766116809513,"endTime":1766116809528.176,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/infrastructure/crypto/__tests__/hkdf.service.test.ts"},{"assertionResults":[{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","create() - Crear nuevo dispositivo"],"fullName":"DeviceRepository - Tests Críticos de Persistencia create() - Crear nuevo dispositivo Debe crear un dispositivo nuevo con todos los campos","status":"passed","title":"Debe crear un dispositivo nuevo con todos los campos","duration":2.9055119999999874,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","create() - Crear nuevo dispositivo"],"fullName":"DeviceRepository - Tests Críticos de Persistencia create() - Crear nuevo dispositivo Debe usar valores por defecto para campos opcionales","status":"passed","title":"Debe usar valores por defecto para campos opcionales","duration":0.5544150000000059,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findByCredentialId() - Buscar por credentialId"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findByCredentialId() - Buscar por credentialId Debe retornar dispositivo cuando existe y está activo","status":"passed","title":"Debe retornar dispositivo cuando existe y está activo","duration":0.531642000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findByCredentialId() - Buscar por credentialId"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findByCredentialId() - Buscar por credentialId Debe retornar null cuando el dispositivo no existe","status":"passed","title":"Debe retornar null cuando el dispositivo no existe","duration":0.22184899999999175,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findByUserId() - Buscar dispositivos de usuario"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findByUserId() - Buscar dispositivos de usuario Debe retornar array vacío si el usuario no tiene dispositivos","status":"passed","title":"Debe retornar array vacío si el usuario no tiene dispositivos","duration":0.30476999999999066,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findByUserId() - Buscar dispositivos de usuario"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findByUserId() - Buscar dispositivos de usuario Debe retornar múltiples dispositivos del usuario","status":"passed","title":"Debe retornar múltiples dispositivos del usuario","duration":0.7087119999999913,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","updateCounter() - Actualizar contador de firmas"],"fullName":"DeviceRepository - Tests Críticos de Persistencia updateCounter() - Actualizar contador de firmas Debe actualizar sign_count y last_used_at","status":"passed","title":"Debe actualizar sign_count y last_used_at","duration":0.6133839999999964,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","updateLastUsed() - Actualizar timestamp de uso"],"fullName":"DeviceRepository - Tests Críticos de Persistencia updateLastUsed() - Actualizar timestamp de uso Debe actualizar last_used_at a NOW()","status":"passed","title":"Debe actualizar last_used_at a NOW()","duration":0.42126299999998196,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","revoke() - Revocar dispositivo (soft delete)"],"fullName":"DeviceRepository - Tests Críticos de Persistencia revoke() - Revocar dispositivo (soft delete) Debe actualizar is_active = FALSE en transacción","status":"passed","title":"Debe actualizar is_active = FALSE en transacción","duration":0.48884100000000785,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findByCredentialIdIncludingInactive() - Buscar incluyendo inactivos"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findByCredentialIdIncludingInactive() - Buscar incluyendo inactivos Debe retornar dispositivo revocado cuando se busca con includeInactive","status":"passed","title":"Debe retornar dispositivo revocado cuando se busca con includeInactive","duration":1.1566020000000208,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","Mapeo de rows a Device"],"fullName":"DeviceRepository - Tests Críticos de Persistencia Mapeo de rows a Device Debe parsear transports JSON correctamente","status":"passed","title":"Debe parsear transports JSON correctamente","duration":0.2296400000000176,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","Mapeo de rows a Device"],"fullName":"DeviceRepository - Tests Críticos de Persistencia Mapeo de rows a Device Debe manejar transports null correctamente","status":"passed","title":"Debe manejar transports null correctamente","duration":0.20156000000000063,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findById() - Buscar dispositivo por ID"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findById() - Buscar dispositivo por ID Debe retornar dispositivo cuando existe","status":"passed","title":"Debe retornar dispositivo cuando existe","duration":0.2797390000000064,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findById() - Buscar dispositivo por ID"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findById() - Buscar dispositivo por ID Debe retornar null si no existe","status":"passed","title":"Debe retornar null si no existe","duration":0.16012299999999868,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findByUserIdIncludingInactive() - Incluye dispositivos revocados"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findByUserIdIncludingInactive() - Incluye dispositivos revocados Debe retornar dispositivos activos e inactivos","status":"passed","title":"Debe retornar dispositivos activos e inactivos","duration":0.394929999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","updateDeviceFingerprint() - Actualiza fingerprint del dispositivo"],"fullName":"DeviceRepository - Tests Críticos de Persistencia updateDeviceFingerprint() - Actualiza fingerprint del dispositivo Debe actualizar deviceFingerprint y last_used_at","status":"passed","title":"Debe actualizar deviceFingerprint y last_used_at","duration":0.35576399999999353,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","countByUserId() - Contar dispositivos activos"],"fullName":"DeviceRepository - Tests Críticos de Persistencia countByUserId() - Contar dispositivos activos Debe retornar número de dispositivos activos","status":"passed","title":"Debe retornar número de dispositivos activos","duration":0.28325399999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","countByUserId() - Contar dispositivos activos"],"fullName":"DeviceRepository - Tests Críticos de Persistencia countByUserId() - Contar dispositivos activos Debe retornar 0 si no tiene dispositivos","status":"passed","title":"Debe retornar 0 si no tiene dispositivos","duration":0.2059590000000071,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","hasEnrolledDevices() - Verificar si tiene dispositivos"],"fullName":"DeviceRepository - Tests Críticos de Persistencia hasEnrolledDevices() - Verificar si tiene dispositivos Debe retornar true si tiene dispositivos","status":"passed","title":"Debe retornar true si tiene dispositivos","duration":0.1579409999999939,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","hasEnrolledDevices() - Verificar si tiene dispositivos"],"fullName":"DeviceRepository - Tests Críticos de Persistencia hasEnrolledDevices() - Verificar si tiene dispositivos Debe retornar false si no tiene dispositivos","status":"passed","title":"Debe retornar false si no tiene dispositivos","duration":0.1452589999999816,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","revokeAllByUserId() - Revocar todos los dispositivos del usuario"],"fullName":"DeviceRepository - Tests Críticos de Persistencia revokeAllByUserId() - Revocar todos los dispositivos del usuario Debe revocar todos los dispositivos activos en transacción","status":"passed","title":"Debe revocar todos los dispositivos activos en transacción","duration":0.48932800000000043,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","revokeAllByUserId() - Revocar todos los dispositivos del usuario"],"fullName":"DeviceRepository - Tests Críticos de Persistencia revokeAllByUserId() - Revocar todos los dispositivos del usuario Debe retornar 0 si no hay dispositivos activos","status":"passed","title":"Debe retornar 0 si no hay dispositivos activos","duration":0.18951599999999758,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findActiveByDeviceFingerprint() - Buscar por fingerprint físico"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findActiveByDeviceFingerprint() - Buscar por fingerprint físico Debe retornar dispositivos activos con ese fingerprint","status":"passed","title":"Debe retornar dispositivos activos con ese fingerprint","duration":0.3877149999999858,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findActiveByDeviceFingerprint() - Buscar por fingerprint físico"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findActiveByDeviceFingerprint() - Buscar por fingerprint físico Debe retornar array vacío si no hay dispositivos con ese fingerprint","status":"passed","title":"Debe retornar array vacío si no hay dispositivos con ese fingerprint","duration":0.1616160000000093,"failureMessages":[],"meta":{}},{"ancestorTitles":["DeviceRepository - Tests Críticos de Persistencia","findActiveByDeviceFingerprint() - Buscar por fingerprint físico"],"fullName":"DeviceRepository - Tests Críticos de Persistencia findActiveByDeviceFingerprint() - Buscar por fingerprint físico NO debe retornar dispositivos revocados aunque tengan el mismo fingerprint","status":"passed","title":"NO debe retornar dispositivos revocados aunque tengan el mismo fingerprint","duration":0.21063499999999635,"failureMessages":[],"meta":{}}],"startTime":1766116807945,"endTime":1766116807958.2107,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/infrastructure/repositories/__tests__/device.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["FinishEnrollmentController","handle() - Casos exitosos"],"fullName":"FinishEnrollmentController handle() - Casos exitosos Debe finalizar enrollment exitosamente sin revocaciones","status":"passed","title":"Debe finalizar enrollment exitosamente sin revocaciones","duration":2.6761750000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Casos exitosos"],"fullName":"FinishEnrollmentController handle() - Casos exitosos Debe finalizar enrollment CON revocación de usuario previo","status":"passed","title":"Debe finalizar enrollment CON revocación de usuario previo","duration":0.9880799999999965,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Casos exitosos"],"fullName":"FinishEnrollmentController handle() - Casos exitosos Debe finalizar enrollment CON revocación de propios dispositivos","status":"passed","title":"Debe finalizar enrollment CON revocación de propios dispositivos","duration":0.5460499999999939,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Casos exitosos"],"fullName":"FinishEnrollmentController handle() - Casos exitosos Debe continuar enrollment aunque falle la revocación (best-effort)","status":"passed","title":"Debe continuar enrollment aunque falle la revocación (best-effort)","duration":0.6986920000000083,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Validaciones de request"],"fullName":"FinishEnrollmentController handle() - Validaciones de request Debe retornar 401 si no hay usuario autenticado","status":"passed","title":"Debe retornar 401 si no hay usuario autenticado","duration":0.41145099999999957,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Validaciones de request"],"fullName":"FinishEnrollmentController handle() - Validaciones de request Debe retornar 400 si falta credential","status":"passed","title":"Debe retornar 400 si falta credential","duration":0.3522129999999919,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Validaciones de request"],"fullName":"FinishEnrollmentController handle() - Validaciones de request Debe retornar 400 si falta deviceFingerprint","status":"passed","title":"Debe retornar 400 si falta deviceFingerprint","duration":0.33292800000000966,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Validaciones de request"],"fullName":"FinishEnrollmentController handle() - Validaciones de request Debe retornar 400 si faltan ambos campos","status":"passed","title":"Debe retornar 400 si faltan ambos campos","duration":0.2719809999999967,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe retornar 400 para CHALLENGE_NOT_FOUND","status":"passed","title":"Debe retornar 400 para CHALLENGE_NOT_FOUND","duration":4.846689999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe retornar 400 para CHALLENGE_EXPIRED","status":"passed","title":"Debe retornar 400 para CHALLENGE_EXPIRED","duration":0.44564500000001317,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe retornar 400 para VERIFICATION_FAILED","status":"passed","title":"Debe retornar 400 para VERIFICATION_FAILED","duration":0.3870689999999968,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe retornar 409 para CREDENTIAL_ALREADY_EXISTS","status":"passed","title":"Debe retornar 409 para CREDENTIAL_ALREADY_EXISTS","duration":0.41251600000001076,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe retornar 403 para AAGUID_NOT_AUTHORIZED","status":"passed","title":"Debe retornar 403 para AAGUID_NOT_AUTHORIZED","duration":0.46007000000000176,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe retornar 500 para errores genéricos","status":"passed","title":"Debe retornar 500 para errores genéricos","duration":0.45038600000000883,"failureMessages":[],"meta":{}},{"ancestorTitles":["FinishEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"FinishEnrollmentController handle() - Manejo de errores del use case Debe manejar errores que no son instancias de Error","status":"passed","title":"Debe manejar errores que no son instancias de Error","duration":0.3225260000000105,"failureMessages":[],"meta":{}}],"startTime":1766116808880,"endTime":1766116808893.4504,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/presentation/controllers/__tests__/finish-enrollment.controller.test.ts"},{"assertionResults":[{"ancestorTitles":["RevokeDeviceController","handle() - Casos exitosos"],"fullName":"RevokeDeviceController handle() - Casos exitosos Debe revocar dispositivo exitosamente","status":"passed","title":"Debe revocar dispositivo exitosamente","duration":2.4756749999999954,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Casos exitosos"],"fullName":"RevokeDeviceController handle() - Casos exitosos Debe pasar el reason si viene en el body","status":"passed","title":"Debe pasar el reason si viene en el body","duration":0.3798709999999943,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Validaciones de request"],"fullName":"RevokeDeviceController handle() - Validaciones de request Debe retornar 401 si no hay usuario autenticado","status":"passed","title":"Debe retornar 401 si no hay usuario autenticado","duration":0.3915310000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Validaciones de request"],"fullName":"RevokeDeviceController handle() - Validaciones de request Debe retornar 400 si deviceId no es un número","status":"passed","title":"Debe retornar 400 si deviceId no es un número","duration":0.325279000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Manejo de errores del use case"],"fullName":"RevokeDeviceController handle() - Manejo de errores del use case Debe retornar 404 para DEVICE_NOT_FOUND","status":"passed","title":"Debe retornar 404 para DEVICE_NOT_FOUND","duration":0.37343400000000315,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Manejo de errores del use case"],"fullName":"RevokeDeviceController handle() - Manejo de errores del use case Debe retornar 403 para DEVICE_NOT_OWNED","status":"passed","title":"Debe retornar 403 para DEVICE_NOT_OWNED","duration":0.32769700000000057,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Manejo de errores del use case"],"fullName":"RevokeDeviceController handle() - Manejo de errores del use case Debe retornar 409 para DEVICE_ALREADY_REVOKED","status":"passed","title":"Debe retornar 409 para DEVICE_ALREADY_REVOKED","duration":0.30500299999999925,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Manejo de errores del use case"],"fullName":"RevokeDeviceController handle() - Manejo de errores del use case Debe retornar 500 para errores genéricos","status":"passed","title":"Debe retornar 500 para errores genéricos","duration":3.0305490000000077,"failureMessages":[],"meta":{}},{"ancestorTitles":["RevokeDeviceController","handle() - Manejo de errores del use case"],"fullName":"RevokeDeviceController handle() - Manejo de errores del use case Debe manejar errores que no son instancia de Error","status":"passed","title":"Debe manejar errores que no son instancia de Error","duration":0.5206909999999993,"failureMessages":[],"meta":{}}],"startTime":1766116814212,"endTime":1766116814220.5208,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/presentation/controllers/__tests__/revoke-device.controller.test.ts"},{"assertionResults":[{"ancestorTitles":["StartEnrollmentController","handle() - Casos exitosos"],"fullName":"StartEnrollmentController handle() - Casos exitosos Debe iniciar enrollment exitosamente con displayName del body","status":"passed","title":"Debe iniciar enrollment exitosamente con displayName del body","duration":2.4714989999999943,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Casos exitosos"],"fullName":"StartEnrollmentController handle() - Casos exitosos Debe usar nombreCompleto como displayName si no viene en body","status":"passed","title":"Debe usar nombreCompleto como displayName si no viene en body","duration":0.42988900000000285,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Casos exitosos"],"fullName":"StartEnrollmentController handle() - Casos exitosos Debe usar username como displayName si no hay nombreCompleto ni body","status":"passed","title":"Debe usar username como displayName si no hay nombreCompleto ni body","duration":0.32892499999999814,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Validaciones de autenticación"],"fullName":"StartEnrollmentController handle() - Validaciones de autenticación Debe retornar 401 si no hay usuario autenticado","status":"passed","title":"Debe retornar 401 si no hay usuario autenticado","duration":0.374046000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Validaciones de autenticación"],"fullName":"StartEnrollmentController handle() - Validaciones de autenticación Debe retornar 401 si request.user es null","status":"passed","title":"Debe retornar 401 si request.user es null","duration":0.3111899999999963,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"StartEnrollmentController handle() - Manejo de errores del use case Debe retornar 429 cuando hay penalización activa","status":"passed","title":"Debe retornar 429 cuando hay penalización activa","duration":0.5979449999999957,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"StartEnrollmentController handle() - Manejo de errores del use case Debe extraer waitMinutes de diferentes formatos de mensaje de penalización","status":"passed","title":"Debe extraer waitMinutes de diferentes formatos de mensaje de penalización","duration":0.42531099999999356,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"StartEnrollmentController handle() - Manejo de errores del use case Debe usar waitMinutes=0 si no se puede extraer del mensaje","status":"passed","title":"Debe usar waitMinutes=0 si no se puede extraer del mensaje","duration":0.3347100000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"StartEnrollmentController handle() - Manejo de errores del use case Debe retornar 500 para errores genéricos","status":"passed","title":"Debe retornar 500 para errores genéricos","duration":4.152661000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Manejo de errores del use case"],"fullName":"StartEnrollmentController handle() - Manejo de errores del use case Debe manejar errores que no son instancias de Error","status":"passed","title":"Debe manejar errores que no son instancias de Error","duration":0.5113970000000023,"failureMessages":[],"meta":{}},{"ancestorTitles":["StartEnrollmentController","handle() - Integración con el use case"],"fullName":"StartEnrollmentController handle() - Integración con el use case Debe pasar correctamente el userId convertido a número","status":"passed","title":"Debe pasar correctamente el userId convertido a número","duration":0.3483800000000059,"failureMessages":[],"meta":{}}],"startTime":1766116811561,"endTime":1766116811571.5115,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/enrollment/presentation/controllers/__tests__/start-enrollment.controller.test.ts"},{"assertionResults":[{"ancestorTitles":["PoolBalancer","Constructor y configuración"],"fullName":"PoolBalancer Constructor y configuración debería inicializar con configuración por defecto","status":"passed","title":"debería inicializar con configuración por defecto","duration":2.2197999999999922,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","Constructor y configuración"],"fullName":"PoolBalancer Constructor y configuración debería aceptar configuración personalizada","status":"passed","title":"debería aceptar configuración personalizada","duration":0.2084209999999871,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","Constructor y configuración"],"fullName":"PoolBalancer Constructor y configuración debería permitir actualizar configuración en runtime","status":"passed","title":"debería permitir actualizar configuración en runtime","duration":0.162146000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular 10 falsos cuando hay 0 reales (minPoolSize=10)","status":"passed","title":"debería calcular 10 falsos cuando hay 0 reales (minPoolSize=10)","duration":0.12906700000002047,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular 5 falsos cuando hay 5 reales (minPoolSize=10)","status":"passed","title":"debería calcular 5 falsos cuando hay 5 reales (minPoolSize=10)","duration":0.11919299999999566,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería calcular 0 falsos cuando hay >= minPoolSize reales","status":"passed","title":"debería calcular 0 falsos cuando hay >= minPoolSize reales","duration":0.1324470000000133,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","calculateFakesNeeded()"],"fullName":"PoolBalancer calculateFakesNeeded() debería manejar valores negativos retornando 0","status":"passed","title":"debería manejar valores negativos retornando 0","duration":0.11218500000001086,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Agregar falsos"],"fullName":"PoolBalancer balance() - Agregar falsos debería agregar falsos cuando pool está vacío","status":"passed","title":"debería agregar falsos cuando pool está vacío","duration":1.6225379999999916,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Agregar falsos"],"fullName":"PoolBalancer balance() - Agregar falsos debería agregar falsos parciales cuando hay algunos reales","status":"passed","title":"debería agregar falsos parciales cuando hay algunos reales","duration":0.2180919999999844,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Agregar falsos"],"fullName":"PoolBalancer balance() - Agregar falsos debería generar encrypted falsos usando AesGcmService","status":"passed","title":"debería generar encrypted falsos usando AesGcmService","duration":0.43757999999999697,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Remover falsos"],"fullName":"PoolBalancer balance() - Remover falsos debería remover falsos cuando sobran","status":"passed","title":"debería remover falsos cuando sobran","duration":0.3125829999999894,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Remover falsos"],"fullName":"PoolBalancer balance() - Remover falsos debería remover todos los falsos cuando hay >= minPoolSize reales","status":"passed","title":"debería remover todos los falsos cuando hay >= minPoolSize reales","duration":0.1730179999999848,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Pool balanceado"],"fullName":"PoolBalancer balance() - Pool balanceado no debería hacer cambios si pool está balanceado","status":"passed","title":"no debería hacer cambios si pool está balanceado","duration":0.2202739999999892,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","balance() - Pool balanceado"],"fullName":"PoolBalancer balance() - Pool balanceado no debería hacer cambios si hay solo reales >= minPoolSize","status":"passed","title":"no debería hacer cambios si hay solo reales >= minPoolSize","duration":0.146552000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() debería inyectar cantidad específica de falsos","status":"passed","title":"debería inyectar cantidad específica de falsos","duration":0.23472300000000246,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() no debería hacer nada si count es 0","status":"passed","title":"no debería hacer nada si count es 0","duration":0.15192299999998227,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() no debería hacer nada si count es negativo","status":"passed","title":"no debería hacer nada si count es negativo","duration":0.12619300000000067,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","injectFakes()"],"fullName":"PoolBalancer injectFakes() debería usar el generador de falsos","status":"passed","title":"debería usar el generador de falsos","duration":0.1641599999999812,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","getPoolStats()"],"fullName":"PoolBalancer getPoolStats() debería retornar estadísticas del pool","status":"passed","title":"debería retornar estadísticas del pool","duration":0.1984510000000057,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","getConfig() y updateConfig()"],"fullName":"PoolBalancer getConfig() y updateConfig() getConfig debería retornar copia de la configuración","status":"passed","title":"getConfig debería retornar copia de la configuración","duration":0.12485200000000418,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","getConfig() y updateConfig()"],"fullName":"PoolBalancer getConfig() y updateConfig() updateConfig debería actualizar configuración","status":"passed","title":"updateConfig debería actualizar configuración","duration":0.11310999999997762,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","getConfig() y updateConfig()"],"fullName":"PoolBalancer getConfig() y updateConfig() updateConfig debería mantener otros valores no actualizados","status":"passed","title":"updateConfig debería mantener otros valores no actualizados","duration":0.12331399999999348,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","Integración - Escenarios reales"],"fullName":"PoolBalancer Integración - Escenarios reales debería manejar sesión que crece de 0 a 15 estudiantes","status":"passed","title":"debería manejar sesión que crece de 0 a 15 estudiantes","duration":0.1878200000000163,"failureMessages":[],"meta":{}},{"ancestorTitles":["PoolBalancer","Integración - Escenarios reales"],"fullName":"PoolBalancer Integración - Escenarios reales debería manejar configuración dinámica durante operación","status":"passed","title":"debería manejar configuración dinámica durante operación","duration":0.14660699999998883,"failureMessages":[],"meta":{}}],"startTime":1766116809370,"endTime":1766116809379.1467,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/qr-projection/application/services/__tests__/pool-balancer.service.test.ts"},{"assertionResults":[{"ancestorTitles":["PayloadBuilder","generateNonce()"],"fullName":"PayloadBuilder generateNonce() debería generar nonce de 32 caracteres hex (16 bytes)","status":"passed","title":"debería generar nonce de 32 caracteres hex (16 bytes)","duration":1.8972960000000114,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","generateNonce()"],"fullName":"PayloadBuilder generateNonce() debería generar nonces diferentes en cada llamada","status":"passed","title":"debería generar nonces diferentes en cada llamada","duration":0.40725099999998804,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildStudentPayload()"],"fullName":"PayloadBuilder buildStudentPayload() debería construir payload con todos los campos","status":"passed","title":"debería construir payload con todos los campos","duration":0.21969699999999648,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildStudentPayload()"],"fullName":"PayloadBuilder buildStudentPayload() debería generar timestamp automático si no se provee","status":"passed","title":"debería generar timestamp automático si no se provee","duration":0.25652000000000896,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildStudentPayload()"],"fullName":"PayloadBuilder buildStudentPayload() debería generar nonce automático si no se provee","status":"passed","title":"debería generar nonce automático si no se provee","duration":0.2002080000000035,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildStudentPayload()"],"fullName":"PayloadBuilder buildStudentPayload() debería usar nonce personalizado si se provee","status":"passed","title":"debería usar nonce personalizado si se provee","duration":0.16570400000000518,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildStudentPayload()"],"fullName":"PayloadBuilder buildStudentPayload() debería soportar múltiples rounds","status":"passed","title":"debería soportar múltiples rounds","duration":0.12921099999999797,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildStudentPayload()"],"fullName":"PayloadBuilder buildStudentPayload() debería soportar userId grande","status":"passed","title":"debería soportar userId grande","duration":0.1347239999999914,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildFakePayload()"],"fullName":"PayloadBuilder buildFakePayload() debería construir payload con uid=0 (honeypot)","status":"passed","title":"debería construir payload con uid=0 (honeypot)","duration":0.20607200000000603,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildFakePayload()"],"fullName":"PayloadBuilder buildFakePayload() debería generar timestamp y nonce automáticos","status":"passed","title":"debería generar timestamp y nonce automáticos","duration":0.20222800000000518,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildFakePayload()"],"fullName":"PayloadBuilder buildFakePayload() debería usar timestamp personalizado","status":"passed","title":"debería usar timestamp personalizado","duration":0.13460299999999847,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","buildFakePayload()"],"fullName":"PayloadBuilder buildFakePayload() debería usar nonce personalizado","status":"passed","title":"debería usar nonce personalizado","duration":0.16268999999999778,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería validar payload correcto","status":"passed","title":"debería validar payload correcto","duration":0.17616599999999494,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería rechazar payload sin versión","status":"passed","title":"debería rechazar payload sin versión","duration":0.1281759999999963,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería rechazar payload con versión incorrecta","status":"passed","title":"debería rechazar payload con versión incorrecta","duration":0.12043300000000556,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería rechazar payload sin sid","status":"passed","title":"debería rechazar payload sin sid","duration":0.12488700000000108,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería rechazar payload null","status":"passed","title":"debería rechazar payload null","duration":0.1201549999999969,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería rechazar payload undefined","status":"passed","title":"debería rechazar payload undefined","duration":0.10985999999999763,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","isValidPayload()"],"fullName":"PayloadBuilder isValidPayload() debería rechazar payload con tipo incorrecto","status":"passed","title":"debería rechazar payload con tipo incorrecto","duration":0.10754199999999514,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","toJsonString()"],"fullName":"PayloadBuilder toJsonString() debería serializar payload a JSON string","status":"passed","title":"debería serializar payload a JSON string","duration":0.13321600000000444,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","toJsonString()"],"fullName":"PayloadBuilder toJsonString() debería serializar payload fake (uid=0)","status":"passed","title":"debería serializar payload fake (uid=0)","duration":0.1556990000000127,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","fromJsonString()"],"fullName":"PayloadBuilder fromJsonString() debería deserializar JSON string válido","status":"passed","title":"debería deserializar JSON string válido","duration":0.15431499999999687,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","fromJsonString()"],"fullName":"PayloadBuilder fromJsonString() debería retornar null si JSON inválido","status":"passed","title":"debería retornar null si JSON inválido","duration":0.151362000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","fromJsonString()"],"fullName":"PayloadBuilder fromJsonString() debería retornar null si estructura incorrecta","status":"passed","title":"debería retornar null si estructura incorrecta","duration":0.11730900000000588,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","fromJsonString()"],"fullName":"PayloadBuilder fromJsonString() debería retornar null si falta campo requerido","status":"passed","title":"debería retornar null si falta campo requerido","duration":0.11582200000000853,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","fromJsonString()"],"fullName":"PayloadBuilder fromJsonString() debería manejar whitespace en JSON","status":"passed","title":"debería manejar whitespace en JSON","duration":0.14978100000000438,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","Integración buildStudentPayload() + toJsonString() + fromJsonString()"],"fullName":"PayloadBuilder Integración buildStudentPayload() + toJsonString() + fromJsonString() debería serializar y deserializar correctamente","status":"passed","title":"debería serializar y deserializar correctamente","duration":0.20159100000000763,"failureMessages":[],"meta":{}},{"ancestorTitles":["PayloadBuilder","Integración buildFakePayload() + serialización"],"fullName":"PayloadBuilder Integración buildFakePayload() + serialización debería mantener uid=0 después de serialización","status":"passed","title":"debería mantener uid=0 después de serialización","duration":0.1577520000000021,"failureMessages":[],"meta":{}}],"startTime":1766116810229,"endTime":1766116810236.1577,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/qr-projection/domain/services/__tests__/payload-builder.service.test.ts"},{"assertionResults":[{"ancestorTitles":["LoginEcdhUseCase","Casos de error"],"fullName":"LoginEcdhUseCase Casos de error debe lanzar error DEVICE_NOT_FOUND si dispositivo no existe","status":"passed","title":"debe lanzar error DEVICE_NOT_FOUND si dispositivo no existe","duration":2.008326999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Casos de error"],"fullName":"LoginEcdhUseCase Casos de error debe lanzar error DEVICE_NOT_OWNED si dispositivo pertenece a otro usuario","status":"passed","title":"debe lanzar error DEVICE_NOT_OWNED si dispositivo pertenece a otro usuario","duration":0.3769489999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Casos de error"],"fullName":"LoginEcdhUseCase Casos de error debe manejar correctamente comparación de userId cuando device.userId es string","status":"passed","title":"debe manejar correctamente comparación de userId cuando device.userId es string","duration":0.3997279999999961,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Casos de error"],"fullName":"LoginEcdhUseCase Casos de error debe lanzar error SESSION_NOT_ALLOWED si dispositivo está revocado","status":"passed","title":"debe lanzar error SESSION_NOT_ALLOWED si dispositivo está revocado","duration":0.29403500000000804,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Casos de error"],"fullName":"LoginEcdhUseCase Casos de error debe lanzar error SESSION_NOT_ALLOWED si dispositivo está pending","status":"passed","title":"debe lanzar error SESSION_NOT_ALLOWED si dispositivo está pending","duration":0.2834789999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Flujo exitoso"],"fullName":"LoginEcdhUseCase Flujo exitoso debe derivar session_key con HKDF incluyendo credentialId","status":"passed","title":"debe derivar session_key con HKDF incluyendo credentialId","duration":1.7459069999999883,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Flujo exitoso"],"fullName":"LoginEcdhUseCase Flujo exitoso debe guardar session_key en Valkey con TTL de 7200 segundos (2 horas)","status":"passed","title":"debe guardar session_key en Valkey con TTL de 7200 segundos (2 horas)","duration":0.9036740000000094,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Flujo exitoso"],"fullName":"LoginEcdhUseCase Flujo exitoso debe generar TOTPu con handshake_secret del dispositivo","status":"passed","title":"debe generar TOTPu con handshake_secret del dispositivo","duration":0.31149399999999616,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Flujo exitoso"],"fullName":"LoginEcdhUseCase Flujo exitoso debe actualizar last_used_at del dispositivo","status":"passed","title":"debe actualizar last_used_at del dispositivo","duration":0.2616390000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Flujo exitoso"],"fullName":"LoginEcdhUseCase Flujo exitoso debe retornar serverPublicKey, TOTPu y deviceId","status":"passed","title":"debe retornar serverPublicKey, TOTPu y deviceId","duration":0.28971099999999694,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Flujo exitoso"],"fullName":"LoginEcdhUseCase Flujo exitoso debe vincular session_key al dispositivo específico (1:1)","status":"passed","title":"debe vincular session_key al dispositivo específico (1:1)","duration":0.27234199999999475,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Integracion ECDH + HKDF"],"fullName":"LoginEcdhUseCase Integracion ECDH + HKDF debe usar sharedSecret de ECDH como input para HKDF","status":"passed","title":"debe usar sharedSecret de ECDH como input para HKDF","duration":0.6671300000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Integracion ECDH + HKDF"],"fullName":"LoginEcdhUseCase Integracion ECDH + HKDF debe derivar session_keys diferentes para diferentes credentialId (binding)","status":"passed","title":"debe derivar session_keys diferentes para diferentes credentialId (binding)","duration":0.4310870000000051,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Validacion de estado del dispositivo"],"fullName":"LoginEcdhUseCase Validacion de estado del dispositivo debe permitir login solo si dispositivo está enrolled","status":"passed","title":"debe permitir login solo si dispositivo está enrolled","duration":1.0342210000000023,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Validacion de estado del dispositivo"],"fullName":"LoginEcdhUseCase Validacion de estado del dispositivo debe rechazar login si dispositivo no está en estado válido","status":"passed","title":"debe rechazar login si dispositivo no está en estado válido","duration":0.42151900000000353,"failureMessages":[],"meta":{}},{"ancestorTitles":["LoginEcdhUseCase","Manejo de timestamps"],"fullName":"LoginEcdhUseCase Manejo de timestamps debe incluir createdAt en session_key guardada","status":"passed","title":"debe incluir createdAt en session_key guardada","duration":0.2635630000000049,"failureMessages":[],"meta":{}}],"startTime":1766116811994,"endTime":1766116812004.4216,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/session/application/use-cases/__tests__/login-ecdh.use-case.test.ts"},{"assertionResults":[{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","save() - Guardar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia save() - Guardar session_key Debe guardar session_key en Valkey con TTL por defecto (7200s)","status":"passed","title":"Debe guardar session_key en Valkey con TTL por defecto (7200s)","duration":2.4729500000000115,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","save() - Guardar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia save() - Guardar session_key Debe guardar session_key con TTL personalizado","status":"passed","title":"Debe guardar session_key con TTL personalizado","duration":0.3446749999999952,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","save() - Guardar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia save() - Guardar session_key Debe serializar Buffer sessionKey como base64","status":"passed","title":"Debe serializar Buffer sessionKey como base64","duration":0.2587469999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","save() - Guardar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia save() - Guardar session_key Debe sobrescribir session_key existente (re-login)","status":"passed","title":"Debe sobrescribir session_key existente (re-login)","duration":0.2958730000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","findByUserId() - Buscar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia findByUserId() - Buscar session_key Debe retornar session_key cuando existe","status":"passed","title":"Debe retornar session_key cuando existe","duration":0.45543499999999426,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","findByUserId() - Buscar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia findByUserId() - Buscar session_key Debe retornar null cuando no existe session_key","status":"passed","title":"Debe retornar null cuando no existe session_key","duration":0.23014500000000737,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","findByUserId() - Buscar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia findByUserId() - Buscar session_key Debe deserializar correctamente números desde strings","status":"passed","title":"Debe deserializar correctamente números desde strings","duration":0.38042399999999077,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","findByUserId() - Buscar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia findByUserId() - Buscar session_key Debe reconstruir Buffer desde base64 correctamente","status":"passed","title":"Debe reconstruir Buffer desde base64 correctamente","duration":0.3115010000000069,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","delete() - Eliminar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia delete() - Eliminar session_key Debe eliminar session_key de Valkey","status":"passed","title":"Debe eliminar session_key de Valkey","duration":0.23445199999999033,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","delete() - Eliminar session_key"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia delete() - Eliminar session_key Debe manejar eliminación de key inexistente sin error","status":"passed","title":"Debe manejar eliminación de key inexistente sin error","duration":0.6910689999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","buildKey() - Construcción de keys"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia buildKey() - Construcción de keys Debe construir key con formato correcto","status":"passed","title":"Debe construir key con formato correcto","duration":0.289203999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","buildKey() - Construcción de keys"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia buildKey() - Construcción de keys Debe generar keys únicas para diferentes usuarios","status":"passed","title":"Debe generar keys únicas para diferentes usuarios","duration":0.38970199999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["SessionKeyRepository - Tests Críticos de Persistencia","Flujo completo: save -> find -> delete"],"fullName":"SessionKeyRepository - Tests Críticos de Persistencia Flujo completo: save -> find -> delete Debe completar ciclo de vida de session_key","status":"passed","title":"Debe completar ciclo de vida de session_key","duration":0.3627609999999919,"failureMessages":[],"meta":{}}],"startTime":1766116809659,"endTime":1766116809666.3896,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/session/infrastructure/repositories/__tests__/session-key.repository.test.ts"},{"assertionResults":[{"ancestorTitles":["DecryptStage","Desencriptación con session_key del estudiante"],"fullName":"DecryptStage Desencriptación con session_key del estudiante usa session_key real cuando existe en Valkey","status":"passed","title":"usa session_key real cuando existe en Valkey","duration":2.895001999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Desencriptación con session_key del estudiante"],"fullName":"DecryptStage Desencriptación con session_key del estudiante desencripta correctamente StudentResponse con session_key real","status":"passed","title":"desencripta correctamente StudentResponse con session_key real","duration":0.44503200000001186,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Fallback a mock key cuando no existe session_key"],"fullName":"DecryptStage Fallback a mock key cuando no existe session_key usa fallbackAesGcmService cuando no hay session_key en Valkey","status":"passed","title":"usa fallbackAesGcmService cuando no hay session_key en Valkey","duration":0.372320000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Fallback a mock key cuando no existe session_key"],"fullName":"DecryptStage Fallback a mock key cuando no existe session_key desencripta correctamente con fallback en modo desarrollo","status":"passed","title":"desencripta correctamente con fallback en modo desarrollo","duration":0.3207139999999953,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Manejo de errores de formato y desencriptación"],"fullName":"DecryptStage Manejo de errores de formato y desencriptación retorna error INVALID_FORMAT si el payload no es válido","status":"passed","title":"retorna error INVALID_FORMAT si el payload no es válido","duration":0.24942099999999812,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Manejo de errores de formato y desencriptación"],"fullName":"DecryptStage Manejo de errores de formato y desencriptación retorna error DECRYPTION_FAILED si no puede desencriptar","status":"passed","title":"retorna error DECRYPTION_FAILED si no puede desencriptar","duration":0.37858900000000517,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Manejo de errores de formato y desencriptación"],"fullName":"DecryptStage Manejo de errores de formato y desencriptación retorna error DECRYPTION_FAILED si el JSON no es parseable","status":"passed","title":"retorna error DECRYPTION_FAILED si el JSON no es parseable","duration":0.3163030000000049,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","STUB_MODE: conversión de QRPayloadV1 a StudentResponse"],"fullName":"DecryptStage STUB_MODE: conversión de QRPayloadV1 a StudentResponse convierte QRPayloadV1 del servidor a StudentResponse en STUB_MODE","status":"passed","title":"convierte QRPayloadV1 del servidor a StudentResponse en STUB_MODE","duration":0.47406499999999596,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","STUB_MODE: conversión de QRPayloadV1 a StudentResponse"],"fullName":"DecryptStage STUB_MODE: conversión de QRPayloadV1 a StudentResponse procesa StudentResponse normal en STUB_MODE sin conversión","status":"passed","title":"procesa StudentResponse normal en STUB_MODE sin conversión","duration":0.35294299999999623,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","STUB_MODE: conversión de QRPayloadV1 a StudentResponse"],"fullName":"DecryptStage STUB_MODE: conversión de QRPayloadV1 a StudentResponse solo convierte a StudentResponse si el payload es QRPayloadV1 válido","status":"passed","title":"solo convierte a StudentResponse si el payload es QRPayloadV1 válido","duration":0.34353400000000534,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Integración con SessionKeyQuery"],"fullName":"DecryptStage Integración con SessionKeyQuery llama findByUserId con el studentId correcto","status":"passed","title":"llama findByUserId con el studentId correcto","duration":0.3375479999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["DecryptStage","Integración con SessionKeyQuery"],"fullName":"DecryptStage Integración con SessionKeyQuery crea nueva instancia de AesGcmService con session_key específica","status":"passed","title":"crea nueva instancia de AesGcmService con session_key específica","duration":0.341116999999997,"failureMessages":[],"meta":{}}],"startTime":1766116808735,"endTime":1766116808742.341,"status":"passed","message":"","name":"/var/www/html/hawaii/asistencia/node-service/src/backend/attendance/domain/validation-pipeline/stages/__tests__/decrypt.stage.test.ts"}]}